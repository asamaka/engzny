{
  "metadata": {
    "generatedAt": "2026-01-25T16:36:56.782Z",
    "project": "thinx.fun"
  },
  "knowledgeLayer": {
    "concepts": [
      {
        "id": "c_image_pipeline",
        "name": "Image Processing Pipeline",
        "description": "The end-to-end flow of image upload, validation, and compression before AI analysis.",
        "domain": "Core Product",
        "criticality": "High",
        "implementations": [
          "api/index.js:compressImageForAPI",
          "api/index.js:detectMediaType"
        ]
      },
      {
        "id": "c_job_lifecycle",
        "name": "Asynchronous Job Lifecycle",
        "description": "Manages the state of an analysis request from Queued to Streaming to Completed.",
        "domain": "Infrastructure",
        "criticality": "High",
        "implementations": [
          "api/index.js:JOB_STATUS",
          "api/index.js:storage",
          "public/job.html"
        ]
      },
      {
        "id": "c_ai_reasoning",
        "name": "AI Reasoning & Prompting",
        "description": "The logic that structures how Claude analyzes images based on user questions.",
        "domain": "AI/LLM",
        "criticality": "Highest",
        "implementations": [
          "api/index.js:buildAnalysisPrompt",
          "api/index.js:getAnthropicClient"
        ]
      },
      {
        "id": "c_realtime_comm",
        "name": "Real-time Result Streaming",
        "description": "Using Server-Sent Events (SSE) to push AI tokens to the UI as they are generated.",
        "domain": "User Experience",
        "criticality": "Medium",
        "implementations": [
          "api/index.js:/api/job/:jobId/stream",
          "public/job.html:connectToStream"
        ]
      }
    ],
    "rules": [
      {
        "name": "Size Limitation",
        "description": "Images must be under 5MB for Claude API compatibility.",
        "target": "api/index.js:MAX_IMAGE_SIZE"
      }
    ]
  },
  "technicalLayer": {
    "files": [
      {
        "path": "api/agents/orchestrator.js",
        "loc": 272
      },
      {
        "path": "api/generators/html-generator.js",
        "loc": 433
      },
      {
        "path": "api/generators/style-manager.js",
        "loc": 419
      },
      {
        "path": "api/generators/vision-analyzer.js",
        "loc": 274
      },
      {
        "path": "api/index.js",
        "loc": 1154
      },
      {
        "path": "api/llm/adapter.js",
        "loc": 105
      },
      {
        "path": "api/llm/claude.js",
        "loc": 235
      },
      {
        "path": "api/llm/index.js",
        "loc": 122
      },
      {
        "path": "public/canvas.html",
        "loc": 606
      },
      {
        "path": "public/index.html",
        "loc": 607
      },
      {
        "path": "public/job.html",
        "loc": 684
      },
      {
        "path": "public/paste.html",
        "loc": 683
      },
      {
        "path": "scripts/generate-shortcut.js",
        "loc": 235
      },
      {
        "path": "scripts/generate-test-image.js",
        "loc": 64
      }
    ],
    "functions": [
      {
        "id": "api/agents/orchestrator.js:createOrchestrator:263",
        "name": "createOrchestrator",
        "file": "api/agents/orchestrator.js",
        "startLine": 263,
        "endLine": 265,
        "async": false,
        "generator": false,
        "params": [
          "config=default"
        ],
        "code": "function createOrchestrator(config = {}) {\n  return new Orchestrator(config);\n}",
        "normalizedCode": "function createOrchestrator(config = {}) { return new Orchestrator(config); }"
      },
      {
        "id": "api/generators/html-generator.js:escapeHtml:16",
        "name": "escapeHtml",
        "file": "api/generators/html-generator.js",
        "startLine": 16,
        "endLine": 24,
        "async": false,
        "generator": false,
        "params": [
          "text"
        ],
        "code": "function escapeHtml(text) {\n  if (!text) return '';\n  return text\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n}",
        "normalizedCode": "function escapeHtml(text) { if (!text) return ''; return text .replace(/&/g, '&amp;') .replace(/</g, '&lt;') .replace(/>/g, '&gt;') .replace(/\"/g, '&quot;') .replace(/'/g, '&#039;'); }"
      },
      {
        "id": "api/generators/html-generator.js:generateHotspotHTML:32",
        "name": "generateHotspotHTML",
        "file": "api/generators/html-generator.js",
        "startLine": 32,
        "endLine": 71,
        "async": false,
        "generator": false,
        "params": [
          "hotspot",
          "index"
        ],
        "code": "function generateHotspotHTML(hotspot, index) {\n  const { id, bounds, type, contentSummary, extractedText, predictedQuestion, priority, investigatable } = hotspot;\n  \n  const priorityClass = priority === 'high' ? 'giue-hotspot--high' : '';\n  const animDelay = index * 0.1;\n  \n  const style = [\n    `left: ${bounds.x}%`,\n    `top: ${bounds.y}%`,\n    `width: ${bounds.width}%`,\n    `min-height: ${Math.min(bounds.height, 30)}%`,\n    `animation-delay: ${animDelay}s`,\n  ].join('; ');\n  \n  const ctaButton = investigatable \n    ? `<button class=\"giue-hotspot__cta\" data-hotspot-id=\"${escapeHtml(id)}\" data-action=\"investigate\">\n        <span>investigate</span>\n        <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n          <path d=\"M21 21l-4.35-4.35\"></path>\n        </svg>\n      </button>`\n    : '';\n  \n  return `\n  <div \n    class=\"giue-hotspot ${priorityClass} giue-hotspot--${type}\" \n    id=\"${escapeHtml(id)}\"\n    data-hotspot-type=\"${escapeHtml(type)}\"\n    data-priority=\"${escapeHtml(priority)}\"\n    data-investigatable=\"${investigatable}\"\n    style=\"${style}\"\n  >\n    <span class=\"giue-type-badge\">${escapeHtml(type.replace(/_/g, ' '))}</span>\n    ${contentSummary ? `<div class=\"giue-hotspot__content\">${escapeHtml(contentSummary)}</div>` : ''}\n    ${extractedText ? `<div class=\"giue-hotspot__text\">${escapeHtml(extractedText)}</div>` : ''}\n    ${predictedQuestion ? `<div class=\"giue-hotspot__question\">\"${escapeHtml(predictedQuestion)}\"</div>` : ''}\n    ${ctaButton}\n  </div>`;\n}",
        "normalizedCode": "function generateHotspotHTML(hotspot, index) { const { id, bounds, type, contentSummary, extractedText, predictedQuestion, priority, investigatable } = hotspot; const priorityClass = priority === 'high' ? 'giue-hotspot--high' : ''; const animDelay = index * 0.1; const style = [ `left: ${bounds.x}%`, `top: ${bounds.y}%`, `width: ${bounds.width}%`, `min-height: ${Math.min(bounds.height, 30)}%`, `animation-delay: ${animDelay}s`, ].join('; '); const ctaButton = investigatable ? `<button class=\"giue-hotspot__cta\" data-hotspot-id=\"${escapeHtml(id)}\" data-action=\"investigate\"> <span>investigate</span> <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"> <circle cx=\"11\" cy=\"11\" r=\"8\"></circle> <path d=\"M21 21l-4.35-4.35\"></path> </svg> </button>` : ''; return ` <div class=\"giue-hotspot ${priorityClass} giue-hotspot--${type}\" id=\"${escapeHtml(id)}\" data-hotspot-type=\"${escapeHtml(type)}\" data-priority=\"${escapeHtml(priority)}\" data-investigatable=\"${investigatable}\" style=\"${style}\" > <span class=\"giue-type-badge\">${escapeHtml(type.replace(/_/g, ' '))}</span> ${contentSummary ? `<div class=\"giue-hotspot__content\">${escapeHtml(contentSummary)}</div>` : ''} ${extractedText ? `<div class=\"giue-hotspot__text\">${escapeHtml(extractedText)}</div>` : ''} ${predictedQuestion ? `<div class=\"giue-hotspot__question\">\"${escapeHtml(predictedQuestion)}\"</div>` : ''} ${ctaButton} </div>`; }"
      },
      {
        "id": "api/generators/html-generator.js:generateNoiseRegionHTML:78",
        "name": "generateNoiseRegionHTML",
        "file": "api/generators/html-generator.js",
        "startLine": 78,
        "endLine": 96,
        "async": false,
        "generator": false,
        "params": [
          "region"
        ],
        "code": "function generateNoiseRegionHTML(region) {\n  const { id, bounds, type } = region;\n  \n  const style = [\n    `left: ${bounds.x}%`,\n    `top: ${bounds.y}%`,\n    `width: ${bounds.width}%`,\n    `height: ${bounds.height}%`,\n  ].join('; ');\n  \n  return `\n  <div \n    class=\"giue-noise giue-noise--${type}\" \n    id=\"${escapeHtml(id)}\"\n    data-noise-type=\"${escapeHtml(type)}\"\n    style=\"${style}\"\n    title=\"${escapeHtml(type)} (filtered)\"\n  ></div>`;\n}",
        "normalizedCode": "function generateNoiseRegionHTML(region) { const { id, bounds, type } = region; const style = [ `left: ${bounds.x}%`, `top: ${bounds.y}%`, `width: ${bounds.width}%`, `height: ${bounds.height}%`, ].join('; '); return ` <div class=\"giue-noise giue-noise--${type}\" id=\"${escapeHtml(id)}\" data-noise-type=\"${escapeHtml(type)}\" style=\"${style}\" title=\"${escapeHtml(type)} (filtered)\" ></div>`; }"
      },
      {
        "id": "api/generators/html-generator.js:generateContextBar:104",
        "name": "generateContextBar",
        "file": "api/generators/html-generator.js",
        "startLine": 104,
        "endLine": 113,
        "async": false,
        "generator": false,
        "params": [
          "manifest",
          "hotspotCount"
        ],
        "code": "function generateContextBar(manifest, hotspotCount) {\n  const context = manifest.contentContext || 'Screenshot analysis';\n  \n  return `\n  <div class=\"giue-context-bar\">\n    <a href=\"/\" class=\"giue-back-link\">← thinx.fun</a>\n    <span class=\"giue-context-bar__title\">${escapeHtml(context)}</span>\n    <span>${hotspotCount} hotspot${hotspotCount !== 1 ? 's' : ''}</span>\n  </div>`;\n}",
        "normalizedCode": "function generateContextBar(manifest, hotspotCount) { const context = manifest.contentContext || 'Screenshot analysis'; return ` <div class=\"giue-context-bar\"> <a href=\"/\" class=\"giue-back-link\">← thinx.fun</a> <span class=\"giue-context-bar__title\">${escapeHtml(context)}</span> <span>${hotspotCount} hotspot${hotspotCount !== 1 ? 's' : ''}</span> </div>`; }"
      },
      {
        "id": "api/generators/html-generator.js:generateClientScript:119",
        "name": "generateClientScript",
        "file": "api/generators/html-generator.js",
        "startLine": 119,
        "endLine": 215,
        "async": false,
        "generator": false,
        "params": [],
        "code": "function generateClientScript() {\n  return `\n  <script>\n    // GIUE Canvas Client\n    (function() {\n      // Handle investigate button clicks\n      document.addEventListener('click', (e) => {\n        const btn = e.target.closest('[data-action=\"investigate\"]');\n        if (btn) {\n          const hotspotId = btn.dataset.hotspotId;\n          const hotspot = document.getElementById(hotspotId);\n          \n          // Visual feedback\n          btn.textContent = 'researching...';\n          btn.disabled = true;\n          \n          // Dispatch custom event for future research integration\n          window.dispatchEvent(new CustomEvent('giue:investigate', {\n            detail: {\n              hotspotId,\n              type: hotspot?.dataset.hotspotType,\n              element: hotspot,\n            }\n          }));\n          \n          // For MVP, show a placeholder message\n          setTimeout(() => {\n            btn.innerHTML = '<span>investigate</span><svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"11\" cy=\"11\" r=\"8\"></circle><path d=\"M21 21l-4.35-4.35\"></path></svg>';\n            btn.disabled = false;\n            \n            // Create research panel (MVP placeholder)\n            showResearchPlaceholder(hotspot, hotspotId);\n          }, 1500);\n        }\n      });\n      \n      // Hotspot hover effects\n      document.querySelectorAll('.giue-hotspot').forEach(hotspot => {\n        hotspot.addEventListener('mouseenter', () => {\n          hotspot.style.zIndex = '50';\n        });\n        hotspot.addEventListener('mouseleave', () => {\n          hotspot.style.zIndex = '';\n        });\n      });\n      \n      // Show research placeholder panel\n      function showResearchPlaceholder(hotspot, id) {\n        // Remove existing panel\n        const existing = document.querySelector('.giue-research-panel');\n        if (existing) existing.remove();\n        \n        const panel = document.createElement('div');\n        panel.className = 'giue-research-panel';\n        panel.innerHTML = \\`\n          <div class=\"giue-research-panel__header\">\n            <span>Research: \\${id}</span>\n            <button class=\"giue-research-panel__close\">×</button>\n          </div>\n          <div class=\"giue-research-panel__content\">\n            <p>Deep-dive research will appear here in a future update.</p>\n            <p style=\"color: var(--giue-accent); margin-top: 1em;\">\n              This feature will integrate with Perplexity or similar research APIs \n              to fact-check claims and provide additional context.\n            </p>\n          </div>\n        \\`;\n        \n        // Position near hotspot\n        const rect = hotspot.getBoundingClientRect();\n        panel.style.position = 'fixed';\n        panel.style.top = Math.min(rect.bottom + 10, window.innerHeight - 200) + 'px';\n        panel.style.left = Math.max(10, Math.min(rect.left, window.innerWidth - 320)) + 'px';\n        \n        document.body.appendChild(panel);\n        \n        // Close button\n        panel.querySelector('.giue-research-panel__close').onclick = () => panel.remove();\n        \n        // Auto-close after 10s\n        setTimeout(() => panel.remove(), 10000);\n      }\n      \n      // Keyboard navigation\n      document.addEventListener('keydown', (e) => {\n        if (e.key === 'Escape') {\n          const panel = document.querySelector('.giue-research-panel');\n          if (panel) panel.remove();\n        }\n      });\n      \n      // Signal canvas ready\n      window.dispatchEvent(new CustomEvent('giue:ready'));\n      console.log('GIUE Canvas initialized');\n    })();\n  </script>`;\n}",
        "normalizedCode": "function generateClientScript() { return ` <script> // GIUE Canvas Client (function() { // Handle investigate button clicks document.addEventListener('click', (e) => { const btn = e.target.closest('[data-action=\"investigate\"]'); if (btn) { const hotspotId = btn.dataset.hotspotId; const hotspot = document.getElementById(hotspotId); // Visual feedback btn.textContent = 'researching...'; btn.disabled = true; // Dispatch custom event for future research integration window.dispatchEvent(new CustomEvent('giue:investigate', { detail: { hotspotId, type: hotspot?.dataset.hotspotType, element: hotspot, } })); // For MVP, show a placeholder message setTimeout(() => { btn.innerHTML = '<span>investigate</span><svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"11\" cy=\"11\" r=\"8\"></circle><path d=\"M21 21l-4.35-4.35\"></path></svg>'; btn.disabled = false; // Create research panel (MVP placeholder) showResearchPlaceholder(hotspot, hotspotId); }, 1500); } }); // Hotspot hover effects document.querySelectorAll('.giue-hotspot').forEach(hotspot => { hotspot.addEventListener('mouseenter', () => { hotspot.style.zIndex = '50'; }); hotspot.addEventListener('mouseleave', () => { hotspot.style.zIndex = ''; }); }); // Show research placeholder panel function showResearchPlaceholder(hotspot, id) { // Remove existing panel const existing = document.querySelector('.giue-research-panel'); if (existing) existing.remove(); const panel = document.createElement('div'); panel.className = 'giue-research-panel'; panel.innerHTML = \\` <div class=\"giue-research-panel__header\"> <span>Research: \\${id}</span> <button class=\"giue-research-panel__close\">×</button> </div> <div class=\"giue-research-panel__content\"> <p>Deep-dive research will appear here in a future update.</p> <p style=\"color: var(--giue-accent); margin-top: 1em;\"> This feature will integrate with Perplexity or similar research APIs to fact-check claims and provide additional context. </p> </div> \\`; // Position near hotspot const rect = hotspot.getBoundingClientRect(); panel.style.position = 'fixed'; panel.style.top = Math.min(rect.bottom + 10, window.innerHeight - 200) + 'px'; panel.style.left = Math.max(10, Math.min(rect.left, window.innerWidth - 320)) + 'px'; document.body.appendChild(panel); // Close button panel.querySelector('.giue-research-panel__close').onclick = () => panel.remove(); // Auto-close after 10s setTimeout(() => panel.remove(), 10000); } // Keyboard navigation document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { const panel = document.querySelector('.giue-research-panel'); if (panel) panel.remove(); } }); // Signal canvas ready window.dispatchEvent(new CustomEvent('giue:ready')); console.log('GIUE Canvas initialized'); })(); </script>`; }"
      },
      {
        "id": "api/generators/html-generator.js:generateResearchPanelCSS:221",
        "name": "generateResearchPanelCSS",
        "file": "api/generators/html-generator.js",
        "startLine": 221,
        "endLine": 290,
        "async": false,
        "generator": false,
        "params": [],
        "code": "function generateResearchPanelCSS() {\n  return `\n  <style>\n    .giue-research-panel {\n      width: 300px;\n      background: var(--giue-bg-secondary);\n      border: 1px solid var(--giue-accent);\n      border-radius: var(--giue-radius-lg);\n      box-shadow: 0 10px 40px var(--giue-shadow);\n      z-index: 1000;\n      animation: giue-panel-in 0.2s ease;\n    }\n    \n    @keyframes giue-panel-in {\n      from {\n        opacity: 0;\n        transform: translateY(-10px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n    \n    .giue-research-panel__header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: var(--giue-space-sm) var(--giue-space-md);\n      border-bottom: 1px solid var(--giue-border);\n      font-size: var(--giue-font-size-sm);\n      color: var(--giue-accent);\n    }\n    \n    .giue-research-panel__close {\n      background: none;\n      border: none;\n      color: var(--giue-text-muted);\n      font-size: 18px;\n      cursor: pointer;\n      padding: 0 4px;\n    }\n    \n    .giue-research-panel__close:hover {\n      color: var(--giue-text-primary);\n    }\n    \n    .giue-research-panel__content {\n      padding: var(--giue-space-md);\n      font-size: var(--giue-font-size-sm);\n      color: var(--giue-text-secondary);\n    }\n    \n    /* Hotspot entrance animation */\n    .giue-hotspot {\n      animation: giue-hotspot-in 0.4s ease backwards;\n    }\n    \n    @keyframes giue-hotspot-in {\n      from {\n        opacity: 0;\n        transform: scale(0.95);\n      }\n      to {\n        opacity: 1;\n        transform: scale(1);\n      }\n    }\n  </style>`;\n}",
        "normalizedCode": "function generateResearchPanelCSS() { return ` <style> .giue-research-panel { width: 300px; background: var(--giue-bg-secondary); border: 1px solid var(--giue-accent); border-radius: var(--giue-radius-lg); box-shadow: 0 10px 40px var(--giue-shadow); z-index: 1000; animation: giue-panel-in 0.2s ease; } @keyframes giue-panel-in { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } } .giue-research-panel__header { display: flex; justify-content: space-between; align-items: center; padding: var(--giue-space-sm) var(--giue-space-md); border-bottom: 1px solid var(--giue-border); font-size: var(--giue-font-size-sm); color: var(--giue-accent); } .giue-research-panel__close { background: none; border: none; color: var(--giue-text-muted); font-size: 18px; cursor: pointer; padding: 0 4px; } .giue-research-panel__close:hover { color: var(--giue-text-primary); } .giue-research-panel__content { padding: var(--giue-space-md); font-size: var(--giue-font-size-sm); color: var(--giue-text-secondary); } /* Hotspot entrance animation */ .giue-hotspot { animation: giue-hotspot-in 0.4s ease backwards; } @keyframes giue-hotspot-in { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } } </style>`; }"
      },
      {
        "id": "api/generators/html-generator.js:generateHTML:301",
        "name": "generateHTML",
        "file": "api/generators/html-generator.js",
        "startLine": 301,
        "endLine": 343,
        "async": false,
        "generator": false,
        "params": [
          "{...}"
        ],
        "code": "function generateHTML({ manifest, hotspots, noiseRegions = [], originalImage = null }) {\n  const baseCSS = generateBaseCSS(manifest.styles || manifest);\n  const contextBar = generateContextBar(manifest, hotspots.length);\n  const hotspotElements = hotspots.map((hs, i) => generateHotspotHTML(hs, i)).join('\\n');\n  const noiseElements = noiseRegions.map(nr => generateNoiseRegionHTML(nr)).join('\\n');\n  const researchCSS = generateResearchPanelCSS();\n  const clientScript = generateClientScript();\n  \n  // Optional background image (dimmed original screenshot)\n  const backgroundStyle = originalImage \n    ? `background-image: url(data:${originalImage.mediaType};base64,${originalImage.data});\n       background-size: contain;\n       background-position: center;\n       background-repeat: no-repeat;\n       background-color: var(--giue-bg-primary);`\n    : '';\n  \n  return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Canvas - thinx.fun</title>\n  <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n  <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n  <link href=\"https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap\" rel=\"stylesheet\">\n  <style>${baseCSS}</style>\n  ${researchCSS}\n</head>\n<body>\n  ${contextBar}\n  \n  <div class=\"giue-canvas\" id=\"canvas\" style=\"${backgroundStyle}\">\n    <div class=\"giue-canvas__hotspots\" style=\"position: relative; width: 100%; height: 100%; padding-top: 60px;\">\n      ${noiseElements}\n      ${hotspotElements}\n    </div>\n  </div>\n  \n  ${clientScript}\n</body>\n</html>`;\n}",
        "normalizedCode": "function generateHTML({ manifest, hotspots, noiseRegions = [], originalImage = null }) { const baseCSS = generateBaseCSS(manifest.styles || manifest); const contextBar = generateContextBar(manifest, hotspots.length); const hotspotElements = hotspots.map((hs, i) => generateHotspotHTML(hs, i)).join('\\n'); const noiseElements = noiseRegions.map(nr => generateNoiseRegionHTML(nr)).join('\\n'); const researchCSS = generateResearchPanelCSS(); const clientScript = generateClientScript(); // Optional background image (dimmed original screenshot) const backgroundStyle = originalImage ? `background-image: url(data:${originalImage.mediaType};base64,${originalImage.data}); background-size: contain; background-position: center; background-repeat: no-repeat; background-color: var(--giue-bg-primary);` : ''; return `<!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <title>Canvas - thinx.fun</title> <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\"> <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin> <link href=\"https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap\" rel=\"stylesheet\"> <style>${baseCSS}</style> ${researchCSS} </head> <body> ${contextBar} <div class=\"giue-canvas\" id=\"canvas\" style=\"${backgroundStyle}\"> <div class=\"giue-canvas__hotspots\" style=\"position: relative; width: 100%; height: 100%; padding-top: 60px;\"> ${noiseElements} ${hotspotElements} </div> </div> ${clientScript} </body> </html>`; }"
      },
      {
        "id": "api/generators/html-generator.js:generateHTMLStream:356",
        "name": "generateHTMLStream",
        "file": "api/generators/html-generator.js",
        "startLine": 356,
        "endLine": 415,
        "async": true,
        "generator": false,
        "params": [
          "{...}"
        ],
        "code": "async function generateHTMLStream({ manifest, hotspots, noiseRegions = [], originalImage = null, onChunk, onProgress }) {\n  const baseCSS = generateBaseCSS(manifest.styles || manifest);\n  const contextBar = generateContextBar(manifest, hotspots.length);\n  const researchCSS = generateResearchPanelCSS();\n  \n  const backgroundStyle = originalImage \n    ? `background-image: url(data:${originalImage.mediaType};base64,${originalImage.data});\n       background-size: contain;\n       background-position: center;\n       background-repeat: no-repeat;\n       background-color: var(--giue-bg-primary);`\n    : '';\n  \n  // Stream the document head\n  onChunk(`<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Canvas - thinx.fun</title>\n  <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n  <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n  <link href=\"https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap\" rel=\"stylesheet\">\n  <style>${baseCSS}</style>\n  ${researchCSS}\n</head>\n<body>\n  ${contextBar}\n  <div class=\"giue-canvas\" id=\"canvas\" style=\"${backgroundStyle}\">\n    <div class=\"giue-canvas__hotspots\" style=\"position: relative; width: 100%; height: 100%; padding-top: 60px;\">`);\n  \n  if (onProgress) onProgress(0.2);\n  \n  // Stream noise regions\n  for (const nr of noiseRegions) {\n    onChunk(generateNoiseRegionHTML(nr));\n    await delay(10); // Small delay for streaming effect\n  }\n  \n  if (onProgress) onProgress(0.4);\n  \n  // Stream hotspots one by one\n  const total = hotspots.length;\n  for (let i = 0; i < total; i++) {\n    onChunk(generateHotspotHTML(hotspots[i], i));\n    if (onProgress) onProgress(0.4 + (0.5 * (i + 1) / total));\n    await delay(50); // Delay for visual streaming effect\n  }\n  \n  // Stream closing tags and script\n  const clientScript = generateClientScript();\n  onChunk(`\n    </div>\n  </div>\n  ${clientScript}\n</body>\n</html>`);\n  \n  if (onProgress) onProgress(1);\n}",
        "normalizedCode": "async function generateHTMLStream({ manifest, hotspots, noiseRegions = [], originalImage = null, onChunk, onProgress }) { const baseCSS = generateBaseCSS(manifest.styles || manifest); const contextBar = generateContextBar(manifest, hotspots.length); const researchCSS = generateResearchPanelCSS(); const backgroundStyle = originalImage ? `background-image: url(data:${originalImage.mediaType};base64,${originalImage.data}); background-size: contain; background-position: center; background-repeat: no-repeat; background-color: var(--giue-bg-primary);` : ''; // Stream the document head onChunk(`<!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <title>Canvas - thinx.fun</title> <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\"> <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin> <link href=\"https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap\" rel=\"stylesheet\"> <style>${baseCSS}</style> ${researchCSS} </head> <body> ${contextBar} <div class=\"giue-canvas\" id=\"canvas\" style=\"${backgroundStyle}\"> <div class=\"giue-canvas__hotspots\" style=\"position: relative; width: 100%; height: 100%; padding-top: 60px;\">`); if (onProgress) onProgress(0.2); // Stream noise regions for (const nr of noiseRegions) { onChunk(generateNoiseRegionHTML(nr)); await delay(10); // Small delay for streaming effect } if (onProgress) onProgress(0.4); // Stream hotspots one by one const total = hotspots.length; for (let i = 0; i < total; i++) { onChunk(generateHotspotHTML(hotspots[i], i)); if (onProgress) onProgress(0.4 + (0.5 * (i + 1) / total)); await delay(50); // Delay for visual streaming effect } // Stream closing tags and script const clientScript = generateClientScript(); onChunk(` </div> </div> ${clientScript} </body> </html>`); if (onProgress) onProgress(1); }"
      },
      {
        "id": "api/generators/html-generator.js:delay:420",
        "name": "delay",
        "file": "api/generators/html-generator.js",
        "startLine": 420,
        "endLine": 422,
        "async": false,
        "generator": false,
        "params": [
          "ms"
        ],
        "code": "function delay(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}",
        "normalizedCode": "function delay(ms) { return new Promise(resolve => setTimeout(resolve, ms)); }"
      },
      {
        "id": "api/generators/style-manager.js:analyzeColor:82",
        "name": "analyzeColor",
        "file": "api/generators/style-manager.js",
        "startLine": 82,
        "endLine": 105,
        "async": false,
        "generator": false,
        "params": [
          "hexColor"
        ],
        "code": "function analyzeColor(hexColor) {\n  // Convert hex to RGB\n  const hex = hexColor.replace('#', '');\n  const r = parseInt(hex.substr(0, 2), 16);\n  const g = parseInt(hex.substr(2, 2), 16);\n  const b = parseInt(hex.substr(4, 2), 16);\n  \n  // Calculate luminance\n  const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n  \n  // Calculate saturation (simplified HSL)\n  const max = Math.max(r, g, b) / 255;\n  const min = Math.min(r, g, b) / 255;\n  const saturation = max === 0 ? 0 : (max - min) / max;\n  \n  return {\n    hex: hexColor,\n    r, g, b,\n    luminance,\n    saturation,\n    isDark: luminance < 0.5,\n    isVibrant: saturation > 0.5,\n  };\n}",
        "normalizedCode": "function analyzeColor(hexColor) { // Convert hex to RGB const hex = hexColor.replace('#', ''); const r = parseInt(hex.substr(0, 2), 16); const g = parseInt(hex.substr(2, 2), 16); const b = parseInt(hex.substr(4, 2), 16); // Calculate luminance const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255; // Calculate saturation (simplified HSL) const max = Math.max(r, g, b) / 255; const min = Math.min(r, g, b) / 255; const saturation = max === 0 ? 0 : (max - min) / max; return { hex: hexColor, r, g, b, luminance, saturation, isDark: luminance < 0.5, isVibrant: saturation > 0.5, }; }"
      },
      {
        "id": "api/generators/style-manager.js:adjustColor:113",
        "name": "adjustColor",
        "file": "api/generators/style-manager.js",
        "startLine": 113,
        "endLine": 131,
        "async": false,
        "generator": false,
        "params": [
          "hexColor",
          "factor"
        ],
        "code": "function adjustColor(hexColor, factor) {\n  const hex = hexColor.replace('#', '');\n  const r = parseInt(hex.substr(0, 2), 16);\n  const g = parseInt(hex.substr(2, 2), 16);\n  const b = parseInt(hex.substr(4, 2), 16);\n  \n  const adjust = (c) => {\n    if (factor > 0) {\n      return Math.round(c + (255 - c) * factor);\n    }\n    return Math.round(c * (1 + factor));\n  };\n  \n  const nr = Math.min(255, Math.max(0, adjust(r)));\n  const ng = Math.min(255, Math.max(0, adjust(g)));\n  const nb = Math.min(255, Math.max(0, adjust(b)));\n  \n  return `#${nr.toString(16).padStart(2, '0')}${ng.toString(16).padStart(2, '0')}${nb.toString(16).padStart(2, '0')}`;\n}",
        "normalizedCode": "function adjustColor(hexColor, factor) { const hex = hexColor.replace('#', ''); const r = parseInt(hex.substr(0, 2), 16); const g = parseInt(hex.substr(2, 2), 16); const b = parseInt(hex.substr(4, 2), 16); const adjust = (c) => { if (factor > 0) { return Math.round(c + (255 - c) * factor); } return Math.round(c * (1 + factor)); }; const nr = Math.min(255, Math.max(0, adjust(r))); const ng = Math.min(255, Math.max(0, adjust(g))); const nb = Math.min(255, Math.max(0, adjust(b))); return `#${nr.toString(16).padStart(2, '0')}${ng.toString(16).padStart(2, '0')}${nb.toString(16).padStart(2, '0')}`; }"
      },
      {
        "id": "api/generators/style-manager.js:adjust:119",
        "name": "adjust",
        "file": "api/generators/style-manager.js",
        "startLine": 119,
        "endLine": 124,
        "async": false,
        "params": [
          "c"
        ],
        "exported": false,
        "code": "  const adjust = (c) => {\n    if (factor > 0) {\n      return Math.round(c + (255 - c) * factor);\n    }\n    return Math.round(c * (1 + factor));\n  };",
        "normalizedCode": " const adjust = (c) => { if (factor > 0) { return Math.round(c + (255 - c) * factor); } return Math.round(c * (1 + factor)); };"
      },
      {
        "id": "api/generators/style-manager.js:hexToRgba:139",
        "name": "hexToRgba",
        "file": "api/generators/style-manager.js",
        "startLine": 139,
        "endLine": 145,
        "async": false,
        "generator": false,
        "params": [
          "hexColor",
          "alpha"
        ],
        "code": "function hexToRgba(hexColor, alpha) {\n  const hex = hexColor.replace('#', '');\n  const r = parseInt(hex.substr(0, 2), 16);\n  const g = parseInt(hex.substr(2, 2), 16);\n  const b = parseInt(hex.substr(4, 2), 16);\n  return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n}",
        "normalizedCode": "function hexToRgba(hexColor, alpha) { const hex = hexColor.replace('#', ''); const r = parseInt(hex.substr(0, 2), 16); const g = parseInt(hex.substr(2, 2), 16); const b = parseInt(hex.substr(4, 2), 16); return `rgba(${r}, ${g}, ${b}, ${alpha})`; }"
      },
      {
        "id": "api/generators/style-manager.js:createStyleManifest:152",
        "name": "createStyleManifest",
        "file": "api/generators/style-manager.js",
        "startLine": 152,
        "endLine": 224,
        "async": false,
        "generator": false,
        "params": [
          "analysis"
        ],
        "code": "function createStyleManifest(analysis) {\n  const colors = (analysis.dominantColors || []).map(analyzeColor);\n  const layoutType = analysis.layoutType || 'other';\n  const gridConfig = LAYOUT_GRID_MAP[layoutType] || LAYOUT_GRID_MAP.other;\n  \n  // Find accent color (most vibrant)\n  const accentColor = colors.find(c => c.isVibrant) || colors[0];\n  \n  // Find background color (darkest)\n  const bgColor = colors.reduce((darkest, c) => \n    (!darkest || c.luminance < darkest.luminance) ? c : darkest, null);\n  \n  // Find text color (lightest)\n  const textColor = colors.reduce((lightest, c) => \n    (!lightest || c.luminance > lightest.luminance) ? c : lightest, null);\n  \n  // Build CSS variables object\n  const cssVariables = {\n    // Colors from analysis or defaults\n    '--giue-bg-primary': bgColor?.hex || DEFAULT_STYLES.bgPrimary,\n    '--giue-bg-secondary': bgColor ? adjustColor(bgColor.hex, 0.1) : DEFAULT_STYLES.bgSecondary,\n    '--giue-bg-tertiary': bgColor ? adjustColor(bgColor.hex, 0.15) : DEFAULT_STYLES.bgTertiary,\n    \n    '--giue-text-primary': textColor?.hex || DEFAULT_STYLES.textPrimary,\n    '--giue-text-secondary': textColor ? adjustColor(textColor.hex, -0.3) : DEFAULT_STYLES.textSecondary,\n    '--giue-text-muted': textColor ? adjustColor(textColor.hex, -0.5) : DEFAULT_STYLES.textMuted,\n    \n    '--giue-accent': accentColor?.hex || DEFAULT_STYLES.accentPrimary,\n    '--giue-accent-secondary': accentColor ? adjustColor(accentColor.hex, -0.2) : DEFAULT_STYLES.accentSecondary,\n    '--giue-accent-muted': accentColor ? hexToRgba(accentColor.hex, 0.15) : DEFAULT_STYLES.accentMuted,\n    \n    '--giue-border': DEFAULT_STYLES.borderColor,\n    '--giue-border-hover': DEFAULT_STYLES.borderColorHover,\n    '--giue-shadow': DEFAULT_STYLES.shadowColor,\n    \n    // Typography\n    '--giue-font': DEFAULT_STYLES.fontFamily,\n    '--giue-font-size': DEFAULT_STYLES.fontSizeBase,\n    '--giue-font-size-sm': DEFAULT_STYLES.fontSizeSmall,\n    '--giue-font-size-lg': DEFAULT_STYLES.fontSizeLarge,\n    '--giue-line-height': DEFAULT_STYLES.lineHeight,\n    \n    // Spacing\n    '--giue-space-xs': DEFAULT_STYLES.spacingXs,\n    '--giue-space-sm': DEFAULT_STYLES.spacingSm,\n    '--giue-space-md': DEFAULT_STYLES.spacingMd,\n    '--giue-space-lg': DEFAULT_STYLES.spacingLg,\n    '--giue-space-xl': DEFAULT_STYLES.spacingXl,\n    \n    // Borders\n    '--giue-radius': DEFAULT_STYLES.borderRadius,\n    '--giue-radius-lg': DEFAULT_STYLES.borderRadiusLg,\n    \n    // Transitions\n    '--giue-transition-fast': DEFAULT_STYLES.transitionFast,\n    '--giue-transition': DEFAULT_STYLES.transitionNormal,\n    '--giue-transition-slow': DEFAULT_STYLES.transitionSlow,\n    \n    // Layout\n    '--giue-grid-columns': gridConfig.columns,\n    '--giue-gap': gridConfig.gap,\n  };\n  \n  return {\n    cssVariables,\n    dominantColors: colors.map(c => c.hex),\n    gridColumns: gridConfig.columns,\n    gap: gridConfig.gap,\n    layoutType,\n    theme: bgColor?.isDark ? 'dark' : 'light',\n    accentHex: accentColor?.hex || DEFAULT_STYLES.accentPrimary,\n  };\n}",
        "normalizedCode": "function createStyleManifest(analysis) { const colors = (analysis.dominantColors || []).map(analyzeColor); const layoutType = analysis.layoutType || 'other'; const gridConfig = LAYOUT_GRID_MAP[layoutType] || LAYOUT_GRID_MAP.other; // Find accent color (most vibrant) const accentColor = colors.find(c => c.isVibrant) || colors[0]; // Find background color (darkest) const bgColor = colors.reduce((darkest, c) => (!darkest || c.luminance < darkest.luminance) ? c : darkest, null); // Find text color (lightest) const textColor = colors.reduce((lightest, c) => (!lightest || c.luminance > lightest.luminance) ? c : lightest, null); // Build CSS variables object const cssVariables = { // Colors from analysis or defaults '--giue-bg-primary': bgColor?.hex || DEFAULT_STYLES.bgPrimary, '--giue-bg-secondary': bgColor ? adjustColor(bgColor.hex, 0.1) : DEFAULT_STYLES.bgSecondary, '--giue-bg-tertiary': bgColor ? adjustColor(bgColor.hex, 0.15) : DEFAULT_STYLES.bgTertiary, '--giue-text-primary': textColor?.hex || DEFAULT_STYLES.textPrimary, '--giue-text-secondary': textColor ? adjustColor(textColor.hex, -0.3) : DEFAULT_STYLES.textSecondary, '--giue-text-muted': textColor ? adjustColor(textColor.hex, -0.5) : DEFAULT_STYLES.textMuted, '--giue-accent': accentColor?.hex || DEFAULT_STYLES.accentPrimary, '--giue-accent-secondary': accentColor ? adjustColor(accentColor.hex, -0.2) : DEFAULT_STYLES.accentSecondary, '--giue-accent-muted': accentColor ? hexToRgba(accentColor.hex, 0.15) : DEFAULT_STYLES.accentMuted, '--giue-border': DEFAULT_STYLES.borderColor, '--giue-border-hover': DEFAULT_STYLES.borderColorHover, '--giue-shadow': DEFAULT_STYLES.shadowColor, // Typography '--giue-font': DEFAULT_STYLES.fontFamily, '--giue-font-size': DEFAULT_STYLES.fontSizeBase, '--giue-font-size-sm': DEFAULT_STYLES.fontSizeSmall, '--giue-font-size-lg': DEFAULT_STYLES.fontSizeLarge, '--giue-line-height': DEFAULT_STYLES.lineHeight, // Spacing '--giue-space-xs': DEFAULT_STYLES.spacingXs, '--giue-space-sm': DEFAULT_STYLES.spacingSm, '--giue-space-md': DEFAULT_STYLES.spacingMd, '--giue-space-lg': DEFAULT_STYLES.spacingLg, '--giue-space-xl': DEFAULT_STYLES.spacingXl, // Borders '--giue-radius': DEFAULT_STYLES.borderRadius, '--giue-radius-lg': DEFAULT_STYLES.borderRadiusLg, // Transitions '--giue-transition-fast': DEFAULT_STYLES.transitionFast, '--giue-transition': DEFAULT_STYLES.transitionNormal, '--giue-transition-slow': DEFAULT_STYLES.transitionSlow, // Layout '--giue-grid-columns': gridConfig.columns, '--giue-gap': gridConfig.gap, }; return { cssVariables, dominantColors: colors.map(c => c.hex), gridColumns: gridConfig.columns, gap: gridConfig.gap, layoutType, theme: bgColor?.isDark ? 'dark' : 'light', accentHex: accentColor?.hex || DEFAULT_STYLES.accentPrimary, }; }"
      },
      {
        "id": "api/generators/style-manager.js:generateCSSString:231",
        "name": "generateCSSString",
        "file": "api/generators/style-manager.js",
        "startLine": 231,
        "endLine": 237,
        "async": false,
        "generator": false,
        "params": [
          "variables"
        ],
        "code": "function generateCSSString(variables) {\n  const varEntries = Object.entries(variables)\n    .map(([key, value]) => `  ${key}: ${value};`)\n    .join('\\n');\n  \n  return `:root {\\n${varEntries}\\n}`;\n}",
        "normalizedCode": "function generateCSSString(variables) { const varEntries = Object.entries(variables) .map(([key, value]) => ` ${key}: ${value};`) .join('\\n'); return `:root {\\n${varEntries}\\n}`; }"
      },
      {
        "id": "api/generators/style-manager.js:generateBaseCSS:244",
        "name": "generateBaseCSS",
        "file": "api/generators/style-manager.js",
        "startLine": 244,
        "endLine": 408,
        "async": false,
        "generator": false,
        "params": [
          "manifest"
        ],
        "code": "function generateBaseCSS(manifest) {\n  const vars = generateCSSString(manifest.cssVariables);\n  \n  return `${vars}\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nhtml, body {\n  height: 100%;\n  overflow: hidden;\n}\n\nbody {\n  font-family: var(--giue-font);\n  font-size: var(--giue-font-size);\n  line-height: var(--giue-line-height);\n  background: var(--giue-bg-primary);\n  color: var(--giue-text-primary);\n}\n\n.giue-canvas {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n}\n\n.giue-hotspot {\n  position: absolute;\n  background: var(--giue-bg-secondary);\n  border: 1px solid var(--giue-border);\n  border-radius: var(--giue-radius);\n  padding: var(--giue-space-md);\n  transition: all var(--giue-transition);\n  cursor: pointer;\n  overflow: hidden;\n}\n\n.giue-hotspot:hover {\n  border-color: var(--giue-accent);\n  box-shadow: 0 0 20px var(--giue-accent-muted);\n  transform: translateY(-2px);\n}\n\n.giue-hotspot--high {\n  border-color: var(--giue-accent-secondary);\n}\n\n.giue-hotspot__content {\n  font-size: var(--giue-font-size-sm);\n  color: var(--giue-text-secondary);\n  margin-bottom: var(--giue-space-sm);\n}\n\n.giue-hotspot__text {\n  font-size: var(--giue-font-size);\n  color: var(--giue-text-primary);\n  margin-bottom: var(--giue-space-md);\n}\n\n.giue-hotspot__question {\n  font-size: var(--giue-font-size-sm);\n  color: var(--giue-text-muted);\n  font-style: italic;\n  margin-bottom: var(--giue-space-sm);\n}\n\n.giue-hotspot__cta {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--giue-space-xs);\n  padding: var(--giue-space-xs) var(--giue-space-sm);\n  background: var(--giue-accent-muted);\n  color: var(--giue-accent);\n  border: 1px solid var(--giue-accent);\n  border-radius: var(--giue-radius);\n  font-size: var(--giue-font-size-sm);\n  cursor: pointer;\n  transition: all var(--giue-transition-fast);\n  font-family: inherit;\n}\n\n.giue-hotspot__cta:hover {\n  background: var(--giue-accent);\n  color: var(--giue-bg-primary);\n}\n\n.giue-noise {\n  position: absolute;\n  background: var(--giue-bg-tertiary);\n  border: 1px dashed var(--giue-border);\n  border-radius: var(--giue-radius);\n  opacity: 0.3;\n  pointer-events: none;\n}\n\n.giue-type-badge {\n  display: inline-block;\n  padding: 2px 6px;\n  background: var(--giue-bg-tertiary);\n  border-radius: 2px;\n  font-size: 10px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  color: var(--giue-text-muted);\n  margin-bottom: var(--giue-space-xs);\n}\n\n.giue-loading {\n  position: fixed;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--giue-bg-primary);\n  z-index: 1000;\n}\n\n.giue-loading__spinner {\n  width: 40px;\n  height: 40px;\n  border: 2px solid var(--giue-border);\n  border-top-color: var(--giue-accent);\n  border-radius: 50%;\n  animation: giue-spin 0.8s linear infinite;\n}\n\n@keyframes giue-spin {\n  to { transform: rotate(360deg); }\n}\n\n.giue-context-bar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  padding: var(--giue-space-sm) var(--giue-space-md);\n  background: var(--giue-bg-secondary);\n  border-bottom: 1px solid var(--giue-border);\n  font-size: var(--giue-font-size-sm);\n  color: var(--giue-text-muted);\n  z-index: 100;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.giue-context-bar__title {\n  color: var(--giue-text-primary);\n}\n\n.giue-back-link {\n  color: var(--giue-text-muted);\n  text-decoration: none;\n  transition: color var(--giue-transition-fast);\n}\n\n.giue-back-link:hover {\n  color: var(--giue-accent);\n}`;\n}",
        "normalizedCode": "function generateBaseCSS(manifest) { const vars = generateCSSString(manifest.cssVariables); return `${vars} * { margin: 0; padding: 0; box-sizing: border-box; } html, body { height: 100%; overflow: hidden; } body { font-family: var(--giue-font); font-size: var(--giue-font-size); line-height: var(--giue-line-height); background: var(--giue-bg-primary); color: var(--giue-text-primary); } .giue-canvas { position: relative; width: 100%; height: 100%; overflow: auto; } .giue-hotspot { position: absolute; background: var(--giue-bg-secondary); border: 1px solid var(--giue-border); border-radius: var(--giue-radius); padding: var(--giue-space-md); transition: all var(--giue-transition); cursor: pointer; overflow: hidden; } .giue-hotspot:hover { border-color: var(--giue-accent); box-shadow: 0 0 20px var(--giue-accent-muted); transform: translateY(-2px); } .giue-hotspot--high { border-color: var(--giue-accent-secondary); } .giue-hotspot__content { font-size: var(--giue-font-size-sm); color: var(--giue-text-secondary); margin-bottom: var(--giue-space-sm); } .giue-hotspot__text { font-size: var(--giue-font-size); color: var(--giue-text-primary); margin-bottom: var(--giue-space-md); } .giue-hotspot__question { font-size: var(--giue-font-size-sm); color: var(--giue-text-muted); font-style: italic; margin-bottom: var(--giue-space-sm); } .giue-hotspot__cta { display: inline-flex; align-items: center; gap: var(--giue-space-xs); padding: var(--giue-space-xs) var(--giue-space-sm); background: var(--giue-accent-muted); color: var(--giue-accent); border: 1px solid var(--giue-accent); border-radius: var(--giue-radius); font-size: var(--giue-font-size-sm); cursor: pointer; transition: all var(--giue-transition-fast); font-family: inherit; } .giue-hotspot__cta:hover { background: var(--giue-accent); color: var(--giue-bg-primary); } .giue-noise { position: absolute; background: var(--giue-bg-tertiary); border: 1px dashed var(--giue-border); border-radius: var(--giue-radius); opacity: 0.3; pointer-events: none; } .giue-type-badge { display: inline-block; padding: 2px 6px; background: var(--giue-bg-tertiary); border-radius: 2px; font-size: 10px; text-transform: uppercase; letter-spacing: 0.5px; color: var(--giue-text-muted); margin-bottom: var(--giue-space-xs); } .giue-loading { position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; background: var(--giue-bg-primary); z-index: 1000; } .giue-loading__spinner { width: 40px; height: 40px; border: 2px solid var(--giue-border); border-top-color: var(--giue-accent); border-radius: 50%; animation: giue-spin 0.8s linear infinite; } @keyframes giue-spin { to { transform: rotate(360deg); } } .giue-context-bar { position: fixed; top: 0; left: 0; right: 0; padding: var(--giue-space-sm) var(--giue-space-md); background: var(--giue-bg-secondary); border-bottom: 1px solid var(--giue-border); font-size: var(--giue-font-size-sm); color: var(--giue-text-muted); z-index: 100; display: flex; justify-content: space-between; align-items: center; } .giue-context-bar__title { color: var(--giue-text-primary); } .giue-back-link { color: var(--giue-text-muted); text-decoration: none; transition: color var(--giue-transition-fast); } .giue-back-link:hover { color: var(--giue-accent); }`; }"
      },
      {
        "id": "api/generators/vision-analyzer.js:analyzeScreenshot:130",
        "name": "analyzeScreenshot",
        "file": "api/generators/vision-analyzer.js",
        "startLine": 130,
        "endLine": 144,
        "async": true,
        "generator": false,
        "params": [
          "{...}"
        ],
        "code": "async function analyzeScreenshot({ imageData, mediaType, adapterConfig = {} }) {\n  const adapter = getVisionAdapter(adapterConfig);\n  \n  const result = await adapter.analyzeImage({\n    imageData,\n    mediaType,\n    prompt: VISION_ANALYSIS_PROMPT,\n    responseFormat: ANALYSIS_SCHEMA,\n  });\n  \n  // Validate and normalize the response\n  const analysis = result.structured || parseAnalysisFromText(result.text);\n  \n  return normalizeAnalysis(analysis);\n}",
        "normalizedCode": "async function analyzeScreenshot({ imageData, mediaType, adapterConfig = {} }) { const adapter = getVisionAdapter(adapterConfig); const result = await adapter.analyzeImage({ imageData, mediaType, prompt: VISION_ANALYSIS_PROMPT, responseFormat: ANALYSIS_SCHEMA, }); // Validate and normalize the response const analysis = result.structured || parseAnalysisFromText(result.text); return normalizeAnalysis(analysis); }"
      },
      {
        "id": "api/generators/vision-analyzer.js:parseAnalysisFromText:151",
        "name": "parseAnalysisFromText",
        "file": "api/generators/vision-analyzer.js",
        "startLine": 151,
        "endLine": 173,
        "async": false,
        "generator": false,
        "params": [
          "text"
        ],
        "code": "function parseAnalysisFromText(text) {\n  try {\n    // Try to extract JSON from markdown code blocks\n    const jsonMatch = text.match(/```(?:json)?\\s*([\\s\\S]*?)```/);\n    if (jsonMatch) {\n      return JSON.parse(jsonMatch[1].trim());\n    }\n    \n    // Try to parse the entire text as JSON\n    return JSON.parse(text.trim());\n  } catch (e) {\n    console.error('Failed to parse analysis from text:', e.message);\n    // Return a minimal valid structure\n    return {\n      viewport: { width: 1200, height: 800 },\n      hotspots: [],\n      noiseRegions: [],\n      layoutType: 'other',\n      contentContext: 'Unable to analyze',\n      dominantColors: ['#111111', '#ffffff'],\n    };\n  }\n}",
        "normalizedCode": "function parseAnalysisFromText(text) { try { // Try to extract JSON from markdown code blocks const jsonMatch = text.match(/```(?:json)?\\s*([\\s\\S]*?)```/); if (jsonMatch) { return JSON.parse(jsonMatch[1].trim()); } // Try to parse the entire text as JSON return JSON.parse(text.trim()); } catch (e) { console.error('Failed to parse analysis from text:', e.message); // Return a minimal valid structure return { viewport: { width: 1200, height: 800 }, hotspots: [], noiseRegions: [], layoutType: 'other', contentContext: 'Unable to analyze', dominantColors: ['#111111', '#ffffff'], }; } }"
      },
      {
        "id": "api/generators/vision-analyzer.js:normalizeAnalysis:180",
        "name": "normalizeAnalysis",
        "file": "api/generators/vision-analyzer.js",
        "startLine": 180,
        "endLine": 221,
        "async": false,
        "generator": false,
        "params": [
          "analysis"
        ],
        "code": "function normalizeAnalysis(analysis) {\n  const normalized = {\n    viewport: analysis.viewport || { width: 1200, height: 800 },\n    dominantColors: (analysis.dominantColors || ['#111111', '#ffffff']).slice(0, 5),\n    hotspots: [],\n    noiseRegions: [],\n    layoutType: analysis.layoutType || 'other',\n    contentContext: analysis.contentContext || '',\n  };\n  \n  // Normalize hotspots\n  if (Array.isArray(analysis.hotspots)) {\n    normalized.hotspots = analysis.hotspots.map((hs, index) => ({\n      id: hs.id || `hs-${index + 1}`,\n      bounds: normalizeBounds(hs.bounds),\n      type: hs.type || 'other',\n      contentSummary: hs.contentSummary || hs.content_summary || '',\n      extractedText: hs.extractedText || hs.extracted_text || '',\n      predictedQuestion: hs.predictedQuestion || hs.predicted_question || '',\n      priority: hs.priority || 'medium',\n      investigatable: hs.investigatable !== false,\n    }));\n  }\n  \n  // Normalize noise regions\n  if (Array.isArray(analysis.noiseRegions || analysis.noise_regions)) {\n    const noiseArr = analysis.noiseRegions || analysis.noise_regions;\n    normalized.noiseRegions = noiseArr.map((nr, index) => ({\n      id: `noise-${index + 1}`,\n      bounds: normalizeBounds(nr.bounds),\n      type: nr.type || 'other',\n    }));\n  }\n  \n  // Sort hotspots by priority\n  const priorityOrder = { high: 0, medium: 1, low: 2 };\n  normalized.hotspots.sort((a, b) => \n    (priorityOrder[a.priority] || 1) - (priorityOrder[b.priority] || 1)\n  );\n  \n  return normalized;\n}",
        "normalizedCode": "function normalizeAnalysis(analysis) { const normalized = { viewport: analysis.viewport || { width: 1200, height: 800 }, dominantColors: (analysis.dominantColors || ['#111111', '#ffffff']).slice(0, 5), hotspots: [], noiseRegions: [], layoutType: analysis.layoutType || 'other', contentContext: analysis.contentContext || '', }; // Normalize hotspots if (Array.isArray(analysis.hotspots)) { normalized.hotspots = analysis.hotspots.map((hs, index) => ({ id: hs.id || `hs-${index + 1}`, bounds: normalizeBounds(hs.bounds), type: hs.type || 'other', contentSummary: hs.contentSummary || hs.content_summary || '', extractedText: hs.extractedText || hs.extracted_text || '', predictedQuestion: hs.predictedQuestion || hs.predicted_question || '', priority: hs.priority || 'medium', investigatable: hs.investigatable !== false, })); } // Normalize noise regions if (Array.isArray(analysis.noiseRegions || analysis.noise_regions)) { const noiseArr = analysis.noiseRegions || analysis.noise_regions; normalized.noiseRegions = noiseArr.map((nr, index) => ({ id: `noise-${index + 1}`, bounds: normalizeBounds(nr.bounds), type: nr.type || 'other', })); } // Sort hotspots by priority const priorityOrder = { high: 0, medium: 1, low: 2 }; normalized.hotspots.sort((a, b) => (priorityOrder[a.priority] || 1) - (priorityOrder[b.priority] || 1) ); return normalized; }"
      },
      {
        "id": "api/generators/vision-analyzer.js:normalizeBounds:228",
        "name": "normalizeBounds",
        "file": "api/generators/vision-analyzer.js",
        "startLine": 228,
        "endLine": 239,
        "async": false,
        "generator": false,
        "params": [
          "bounds"
        ],
        "code": "function normalizeBounds(bounds) {\n  if (!bounds) {\n    return { x: 0, y: 0, width: 100, height: 100 };\n  }\n  \n  return {\n    x: clamp(bounds.x || 0, 0, 100),\n    y: clamp(bounds.y || 0, 0, 100),\n    width: clamp(bounds.width || 10, 1, 100),\n    height: clamp(bounds.height || 10, 1, 100),\n  };\n}",
        "normalizedCode": "function normalizeBounds(bounds) { if (!bounds) { return { x: 0, y: 0, width: 100, height: 100 }; } return { x: clamp(bounds.x || 0, 0, 100), y: clamp(bounds.y || 0, 0, 100), width: clamp(bounds.width || 10, 1, 100), height: clamp(bounds.height || 10, 1, 100), }; }"
      },
      {
        "id": "api/generators/vision-analyzer.js:clamp:244",
        "name": "clamp",
        "file": "api/generators/vision-analyzer.js",
        "startLine": 244,
        "endLine": 246,
        "async": false,
        "generator": false,
        "params": [
          "value",
          "min",
          "max"
        ],
        "code": "function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}",
        "normalizedCode": "function clamp(value, min, max) { return Math.min(Math.max(value, min), max); }"
      },
      {
        "id": "api/generators/vision-analyzer.js:getInvestigatableHotspots:253",
        "name": "getInvestigatableHotspots",
        "file": "api/generators/vision-analyzer.js",
        "startLine": 253,
        "endLine": 255,
        "async": false,
        "generator": false,
        "params": [
          "analysis"
        ],
        "code": "function getInvestigatableHotspots(analysis) {\n  return analysis.hotspots.filter(hs => hs.investigatable);\n}",
        "normalizedCode": "function getInvestigatableHotspots(analysis) { return analysis.hotspots.filter(hs => hs.investigatable); }"
      },
      {
        "id": "api/generators/vision-analyzer.js:getTopHotspots:263",
        "name": "getTopHotspots",
        "file": "api/generators/vision-analyzer.js",
        "startLine": 263,
        "endLine": 265,
        "async": false,
        "generator": false,
        "params": [
          "analysis",
          "limit=default"
        ],
        "code": "function getTopHotspots(analysis, limit = 5) {\n  return analysis.hotspots.slice(0, limit);\n}",
        "normalizedCode": "function getTopHotspots(analysis, limit = 5) { return analysis.hotspots.slice(0, limit); }"
      },
      {
        "id": "api/index.js:getRedis:37",
        "name": "getRedis",
        "file": "api/index.js",
        "startLine": 37,
        "endLine": 50,
        "async": true,
        "params": [],
        "exported": false,
        "code": "const getRedis = async () => {\n  if (redis) return redis;\n  \n  if (process.env.UPSTASH_REDIS_REST_URL && process.env.UPSTASH_REDIS_REST_TOKEN) {\n    const { Redis } = require('@upstash/redis');\n    redis = new Redis({\n      url: process.env.UPSTASH_REDIS_REST_URL,\n      token: process.env.UPSTASH_REDIS_REST_TOKEN,\n    });\n    return redis;\n  }\n  \n  return null;\n};",
        "normalizedCode": "const getRedis = async () => { if (redis) return redis; if (process.env.UPSTASH_REDIS_REST_URL && process.env.UPSTASH_REDIS_REST_TOKEN) { const { Redis } = require('@upstash/redis'); redis = new Redis({ url: process.env.UPSTASH_REDIS_REST_URL, token: process.env.UPSTASH_REDIS_REST_TOKEN, }); return redis; } return null; };"
      },
      {
        "id": "api/index.js:storage.setJob:54",
        "name": "storage.setJob",
        "file": "api/index.js",
        "startLine": 54,
        "endLine": 61,
        "async": true,
        "generator": false,
        "params": [
          "jobId",
          "data",
          "ttl=default"
        ],
        "code": "  async setJob(jobId, data, ttl = 3600) {\n    const redis = await getRedis();\n    if (redis) {\n      await redis.setex(`job:${jobId}`, ttl, JSON.stringify(data));\n    } else {\n      jobStore.set(jobId, data);\n    }\n  },",
        "normalizedCode": " async setJob(jobId, data, ttl = 3600) { const redis = await getRedis(); if (redis) { await redis.setex(`job:${jobId}`, ttl, JSON.stringify(data)); } else { jobStore.set(jobId, data); } },"
      },
      {
        "id": "api/index.js:storage.getJob:63",
        "name": "storage.getJob",
        "file": "api/index.js",
        "startLine": 63,
        "endLine": 71,
        "async": true,
        "generator": false,
        "params": [
          "jobId"
        ],
        "code": "  async getJob(jobId) {\n    const redis = await getRedis();\n    if (redis) {\n      const data = await redis.get(`job:${jobId}`);\n      return data ? (typeof data === 'string' ? JSON.parse(data) : data) : null;\n    } else {\n      return jobStore.get(jobId) || null;\n    }\n  },",
        "normalizedCode": " async getJob(jobId) { const redis = await getRedis(); if (redis) { const data = await redis.get(`job:${jobId}`); return data ? (typeof data === 'string' ? JSON.parse(data) : data) : null; } else { return jobStore.get(jobId) || null; } },"
      },
      {
        "id": "api/index.js:storage.updateJob:73",
        "name": "storage.updateJob",
        "file": "api/index.js",
        "startLine": 73,
        "endLine": 81,
        "async": true,
        "generator": false,
        "params": [
          "jobId",
          "updates"
        ],
        "code": "  async updateJob(jobId, updates) {\n    const job = await this.getJob(jobId);\n    if (job) {\n      const updated = { ...job, ...updates };\n      await this.setJob(jobId, updated);\n      return updated;\n    }\n    return null;\n  },",
        "normalizedCode": " async updateJob(jobId, updates) { const job = await this.getJob(jobId); if (job) { const updated = { ...job, ...updates }; await this.setJob(jobId, updated); return updated; } return null; },"
      },
      {
        "id": "api/index.js:getAnthropicClient:100",
        "name": "getAnthropicClient",
        "file": "api/index.js",
        "startLine": 100,
        "endLine": 107,
        "async": false,
        "params": [],
        "exported": false,
        "code": "const getAnthropicClient = () => {\n  if (!process.env.ANTHROPIC_API_KEY) {\n    throw new Error('ANTHROPIC_API_KEY environment variable is not set');\n  }\n  return new Anthropic({\n    apiKey: process.env.ANTHROPIC_API_KEY,\n  });\n};",
        "normalizedCode": "const getAnthropicClient = () => { if (!process.env.ANTHROPIC_API_KEY) { throw new Error('ANTHROPIC_API_KEY environment variable is not set'); } return new Anthropic({ apiKey: process.env.ANTHROPIC_API_KEY, }); };"
      },
      {
        "id": "api/index.js:sendEvent:255",
        "name": "sendEvent",
        "file": "api/index.js",
        "startLine": 255,
        "endLine": 259,
        "async": false,
        "params": [
          "event",
          "data"
        ],
        "exported": false,
        "code": "  const sendEvent = (event, data) => {\n    res.write(`event: ${event}\\n`);\n    res.write(`data: ${JSON.stringify(data)}\\n\\n`);\n    if (res.flush) res.flush();\n  };",
        "normalizedCode": " const sendEvent = (event, data) => { res.write(`event: ${event}\\n`); res.write(`data: ${JSON.stringify(data)}\\n\\n`); if (res.flush) res.flush(); };"
      },
      {
        "id": "api/index.js:buildAnalysisPrompt:380",
        "name": "buildAnalysisPrompt",
        "file": "api/index.js",
        "startLine": 380,
        "endLine": 408,
        "async": false,
        "params": [
          "question"
        ],
        "exported": false,
        "code": "const buildAnalysisPrompt = (question) => {\n  return `You are a helpful AI assistant that analyzes images to help users understand what they're looking at. \n\nAnalyze this image thoroughly and provide:\n\n1. **What You See**: A clear description of the main content in the image.\n\n2. **Key Information**: Extract and highlight any important information visible, such as:\n   - Text, headlines, or titles\n   - Product names, brands, or prices\n   - News claims or statements\n   - Data, statistics, or numbers\n   - People, places, or events shown\n\n3. **Fact Check & Context**: If the image contains:\n   - News claims: Assess the credibility and provide context\n   - Product information: Share relevant details or considerations\n   - Statistics or data: Explain what they mean and any caveats\n   - Advertisements: Identify what's being promoted and any fine print\n\n4. **Helpful Insights**: Provide any additional context that would help the user understand:\n   - Background information on topics shown\n   - Things to be aware of or consider\n   - Related information that might be useful\n\n${question ? `\\n5. **User's Question**: The user specifically asked: \"${question}\"\\nPlease address this question in your analysis.` : ''}\n\nBe factual, helpful, and highlight anything the user should be cautious about (misleading claims, too-good-to-be-true offers, etc.).`;\n};",
        "normalizedCode": "const buildAnalysisPrompt = (question) => { return `You are a helpful AI assistant that analyzes images to help users understand what they're looking at. Analyze this image thoroughly and provide: 1. **What You See**: A clear description of the main content in the image. 2. **Key Information**: Extract and highlight any important information visible, such as: - Text, headlines, or titles - Product names, brands, or prices - News claims or statements - Data, statistics, or numbers - People, places, or events shown 3. **Fact Check & Context**: If the image contains: - News claims: Assess the credibility and provide context - Product information: Share relevant details or considerations - Statistics or data: Explain what they mean and any caveats - Advertisements: Identify what's being promoted and any fine print 4. **Helpful Insights**: Provide any additional context that would help the user understand: - Background information on topics shown - Things to be aware of or consider - Related information that might be useful ${question ? `\\n5. **User's Question**: The user specifically asked: \"${question}\"\\nPlease address this question in your analysis.` : ''} Be factual, helpful, and highlight anything the user should be cautious about (misleading claims, too-good-to-be-true offers, etc.).`; };"
      },
      {
        "id": "api/index.js:detectMediaType:548",
        "name": "detectMediaType",
        "file": "api/index.js",
        "startLine": 548,
        "endLine": 562,
        "async": false,
        "generator": false,
        "params": [
          "buffer"
        ],
        "code": "function detectMediaType(buffer) {\n  if (buffer[0] === 0xFF && buffer[1] === 0xD8 && buffer[2] === 0xFF) {\n    return 'image/jpeg';\n  }\n  if (buffer[0] === 0x89 && buffer[1] === 0x50 && buffer[2] === 0x4E && buffer[3] === 0x47) {\n    return 'image/png';\n  }\n  if (buffer[0] === 0x47 && buffer[1] === 0x49 && buffer[2] === 0x46) {\n    return 'image/gif';\n  }\n  if (buffer[0] === 0x52 && buffer[1] === 0x49 && buffer[2] === 0x46 && buffer[3] === 0x46) {\n    return 'image/webp';\n  }\n  return null;\n}",
        "normalizedCode": "function detectMediaType(buffer) { if (buffer[0] === 0xFF && buffer[1] === 0xD8 && buffer[2] === 0xFF) { return 'image/jpeg'; } if (buffer[0] === 0x89 && buffer[1] === 0x50 && buffer[2] === 0x4E && buffer[3] === 0x47) { return 'image/png'; } if (buffer[0] === 0x47 && buffer[1] === 0x49 && buffer[2] === 0x46) { return 'image/gif'; } if (buffer[0] === 0x52 && buffer[1] === 0x49 && buffer[2] === 0x46 && buffer[3] === 0x46) { return 'image/webp'; } return null; }"
      },
      {
        "id": "api/index.js:compressImageForAPI:577",
        "name": "compressImageForAPI",
        "file": "api/index.js",
        "startLine": 577,
        "endLine": 698,
        "async": true,
        "generator": false,
        "params": [
          "imageBuffer",
          "mediaType"
        ],
        "code": "async function compressImageForAPI(imageBuffer, mediaType) {\n  const originalSize = imageBuffer.length;\n  \n  // If already under limit, return as-is\n  if (originalSize <= MAX_IMAGE_SIZE) {\n    return {\n      buffer: imageBuffer,\n      mediaType: mediaType,\n      wasCompressed: false,\n      originalSize,\n      finalSize: originalSize,\n    };\n  }\n\n  console.log(`Image size ${(originalSize / 1024 / 1024).toFixed(2)}MB exceeds limit, compressing...`);\n\n  let sharpInstance = sharp(imageBuffer);\n  const metadata = await sharpInstance.metadata();\n  \n  // Start with the original dimensions\n  let targetWidth = metadata.width;\n  let targetHeight = metadata.height;\n  \n  // If image is very large, start by resizing down\n  if (targetWidth > MAX_DIMENSION || targetHeight > MAX_DIMENSION) {\n    const scale = Math.min(MAX_DIMENSION / targetWidth, MAX_DIMENSION / targetHeight);\n    targetWidth = Math.round(targetWidth * scale);\n    targetHeight = Math.round(targetHeight * scale);\n  }\n\n  // Progressive compression strategy:\n  // 1. Try high quality JPEG first (works well for photos/screenshots)\n  // 2. Reduce quality progressively\n  // 3. Reduce dimensions if quality reduction isn't enough\n\n  const qualityLevels = [85, 75, 65, 55, 45];\n  const scaleLevels = [1.0, 0.85, 0.7, 0.55, 0.4];\n\n  for (const scale of scaleLevels) {\n    const width = Math.round(targetWidth * scale);\n    const height = Math.round(targetHeight * scale);\n    \n    for (const quality of qualityLevels) {\n      sharpInstance = sharp(imageBuffer)\n        .resize(width, height, {\n          fit: 'inside',\n          withoutEnlargement: true,\n        });\n\n      // Convert to JPEG for best compression (unless it's a GIF with animation)\n      // JPEG works well for screenshots and photos\n      let outputBuffer;\n      let outputMediaType;\n\n      if (mediaType === 'image/gif') {\n        // For GIFs, try WebP first (supports animation), fallback to JPEG\n        try {\n          outputBuffer = await sharpInstance\n            .webp({ quality: quality })\n            .toBuffer();\n          outputMediaType = 'image/webp';\n        } catch {\n          // If WebP fails (e.g., animated GIF issues), convert to JPEG\n          outputBuffer = await sharpInstance\n            .jpeg({ quality: quality, mozjpeg: true })\n            .toBuffer();\n          outputMediaType = 'image/jpeg';\n        }\n      } else if (mediaType === 'image/png') {\n        // For PNGs, check if it has transparency\n        // If it does, use WebP. Otherwise, JPEG compresses better.\n        if (metadata.hasAlpha) {\n          outputBuffer = await sharpInstance\n            .webp({ quality: quality })\n            .toBuffer();\n          outputMediaType = 'image/webp';\n        } else {\n          outputBuffer = await sharpInstance\n            .jpeg({ quality: quality, mozjpeg: true })\n            .toBuffer();\n          outputMediaType = 'image/jpeg';\n        }\n      } else {\n        // For JPEG and WebP, output as JPEG for consistent compression\n        outputBuffer = await sharpInstance\n          .jpeg({ quality: quality, mozjpeg: true })\n          .toBuffer();\n        outputMediaType = 'image/jpeg';\n      }\n\n      if (outputBuffer.length <= MAX_IMAGE_SIZE) {\n        console.log(`Compressed: ${(originalSize / 1024 / 1024).toFixed(2)}MB -> ${(outputBuffer.length / 1024 / 1024).toFixed(2)}MB (${width}x${height}, quality ${quality})`);\n        return {\n          buffer: outputBuffer,\n          mediaType: outputMediaType,\n          wasCompressed: true,\n          originalSize,\n          finalSize: outputBuffer.length,\n          finalDimensions: { width, height },\n          quality,\n        };\n      }\n    }\n  }\n\n  // Last resort: aggressive compression\n  console.log('Using aggressive compression as last resort');\n  const finalBuffer = await sharp(imageBuffer)\n    .resize(1920, 1920, { fit: 'inside', withoutEnlargement: true })\n    .jpeg({ quality: 35, mozjpeg: true })\n    .toBuffer();\n\n  console.log(`Aggressively compressed: ${(originalSize / 1024 / 1024).toFixed(2)}MB -> ${(finalBuffer.length / 1024 / 1024).toFixed(2)}MB`);\n  \n  return {\n    buffer: finalBuffer,\n    mediaType: 'image/jpeg',\n    wasCompressed: true,\n    originalSize,\n    finalSize: finalBuffer.length,\n  };\n}",
        "normalizedCode": "async function compressImageForAPI(imageBuffer, mediaType) { const originalSize = imageBuffer.length; // If already under limit, return as-is if (originalSize <= MAX_IMAGE_SIZE) { return { buffer: imageBuffer, mediaType: mediaType, wasCompressed: false, originalSize, finalSize: originalSize, }; } console.log(`Image size ${(originalSize / 1024 / 1024).toFixed(2)}MB exceeds limit, compressing...`); let sharpInstance = sharp(imageBuffer); const metadata = await sharpInstance.metadata(); // Start with the original dimensions let targetWidth = metadata.width; let targetHeight = metadata.height; // If image is very large, start by resizing down if (targetWidth > MAX_DIMENSION || targetHeight > MAX_DIMENSION) { const scale = Math.min(MAX_DIMENSION / targetWidth, MAX_DIMENSION / targetHeight); targetWidth = Math.round(targetWidth * scale); targetHeight = Math.round(targetHeight * scale); } // Progressive compression strategy: // 1. Try high quality JPEG first (works well for photos/screenshots) // 2. Reduce quality progressively // 3. Reduce dimensions if quality reduction isn't enough const qualityLevels = [85, 75, 65, 55, 45]; const scaleLevels = [1.0, 0.85, 0.7, 0.55, 0.4]; for (const scale of scaleLevels) { const width = Math.round(targetWidth * scale); const height = Math.round(targetHeight * scale); for (const quality of qualityLevels) { sharpInstance = sharp(imageBuffer) .resize(width, height, { fit: 'inside', withoutEnlargement: true, }); // Convert to JPEG for best compression (unless it's a GIF with animation) // JPEG works well for screenshots and photos let outputBuffer; let outputMediaType; if (mediaType === 'image/gif') { // For GIFs, try WebP first (supports animation), fallback to JPEG try { outputBuffer = await sharpInstance .webp({ quality: quality }) .toBuffer(); outputMediaType = 'image/webp'; } catch { // If WebP fails (e.g., animated GIF issues), convert to JPEG outputBuffer = await sharpInstance .jpeg({ quality: quality, mozjpeg: true }) .toBuffer(); outputMediaType = 'image/jpeg'; } } else if (mediaType === 'image/png') { // For PNGs, check if it has transparency // If it does, use WebP. Otherwise, JPEG compresses better. if (metadata.hasAlpha) { outputBuffer = await sharpInstance .webp({ quality: quality }) .toBuffer(); outputMediaType = 'image/webp'; } else { outputBuffer = await sharpInstance .jpeg({ quality: quality, mozjpeg: true }) .toBuffer(); outputMediaType = 'image/jpeg'; } } else { // For JPEG and WebP, output as JPEG for consistent compression outputBuffer = await sharpInstance .jpeg({ quality: quality, mozjpeg: true }) .toBuffer(); outputMediaType = 'image/jpeg'; } if (outputBuffer.length <= MAX_IMAGE_SIZE) { console.log(`Compressed: ${(originalSize / 1024 / 1024).toFixed(2)}MB -> ${(outputBuffer.length / 1024 / 1024).toFixed(2)}MB (${width}x${height}, quality ${quality})`); return { buffer: outputBuffer, mediaType: outputMediaType, wasCompressed: true, originalSize, finalSize: outputBuffer.length, finalDimensions: { width, height }, quality, }; } } } // Last resort: aggressive compression console.log('Using aggressive compression as last resort'); const finalBuffer = await sharp(imageBuffer) .resize(1920, 1920, { fit: 'inside', withoutEnlargement: true }) .jpeg({ quality: 35, mozjpeg: true }) .toBuffer(); console.log(`Aggressively compressed: ${(originalSize / 1024 / 1024).toFixed(2)}MB -> ${(finalBuffer.length / 1024 / 1024).toFixed(2)}MB`); return { buffer: finalBuffer, mediaType: 'image/jpeg', wasCompressed: true, originalSize, finalSize: finalBuffer.length, }; }"
      },
      {
        "id": "api/index.js:sendEvent:717",
        "name": "sendEvent",
        "file": "api/index.js",
        "startLine": 717,
        "endLine": 722,
        "async": false,
        "params": [
          "event",
          "data"
        ],
        "exported": false,
        "code": "  const sendEvent = (event, data) => {\n    res.write(`event: ${event}\\n`);\n    res.write(`data: ${JSON.stringify(data)}\\n\\n`);\n    // Force flush for Vercel\n    if (res.flush) res.flush();\n  };",
        "normalizedCode": " const sendEvent = (event, data) => { res.write(`event: ${event}\\n`); res.write(`data: ${JSON.stringify(data)}\\n\\n`); // Force flush for Vercel if (res.flush) res.flush(); };"
      },
      {
        "id": "api/llm/index.js:getAdapter:28",
        "name": "getAdapter",
        "file": "api/llm/index.js",
        "startLine": 28,
        "endLine": 44,
        "async": false,
        "generator": false,
        "params": [
          "provider=default",
          "config=default"
        ],
        "code": "function getAdapter(provider = 'claude', config = {}) {\n  const cacheKey = `${provider}:${JSON.stringify(config)}`;\n  \n  if (instances.has(cacheKey)) {\n    return instances.get(cacheKey);\n  }\n  \n  const AdapterClass = providers[provider];\n  if (!AdapterClass) {\n    throw new Error(`Unknown LLM provider: ${provider}. Available: ${Object.keys(providers).join(', ')}`);\n  }\n  \n  const instance = new AdapterClass(config);\n  instances.set(cacheKey, instance);\n  \n  return instance;\n}",
        "normalizedCode": "function getAdapter(provider = 'claude', config = {}) { const cacheKey = `${provider}:${JSON.stringify(config)}`; if (instances.has(cacheKey)) { return instances.get(cacheKey); } const AdapterClass = providers[provider]; if (!AdapterClass) { throw new Error(`Unknown LLM provider: ${provider}. Available: ${Object.keys(providers).join(', ')}`); } const instance = new AdapterClass(config); instances.set(cacheKey, instance); return instance; }"
      },
      {
        "id": "api/llm/index.js:getDefaultAdapter:51",
        "name": "getDefaultAdapter",
        "file": "api/llm/index.js",
        "startLine": 51,
        "endLine": 54,
        "async": false,
        "generator": false,
        "params": [
          "config=default"
        ],
        "code": "function getDefaultAdapter(config = {}) {\n  const defaultProvider = process.env.DEFAULT_LLM_PROVIDER || 'claude';\n  return getAdapter(defaultProvider, config);\n}",
        "normalizedCode": "function getDefaultAdapter(config = {}) { const defaultProvider = process.env.DEFAULT_LLM_PROVIDER || 'claude'; return getAdapter(defaultProvider, config); }"
      },
      {
        "id": "api/llm/index.js:getVisionAdapter:61",
        "name": "getVisionAdapter",
        "file": "api/llm/index.js",
        "startLine": 61,
        "endLine": 71,
        "async": false,
        "generator": false,
        "params": [
          "config=default"
        ],
        "code": "function getVisionAdapter(config = {}) {\n  // For MVP, Claude is our vision adapter\n  const visionProvider = process.env.VISION_LLM_PROVIDER || 'claude';\n  const adapter = getAdapter(visionProvider, config);\n  \n  if (!adapter.supportsVision()) {\n    throw new Error(`Provider ${visionProvider} does not support vision`);\n  }\n  \n  return adapter;\n}",
        "normalizedCode": "function getVisionAdapter(config = {}) { // For MVP, Claude is our vision adapter const visionProvider = process.env.VISION_LLM_PROVIDER || 'claude'; const adapter = getAdapter(visionProvider, config); if (!adapter.supportsVision()) { throw new Error(`Provider ${visionProvider} does not support vision`); } return adapter; }"
      },
      {
        "id": "api/llm/index.js:getResearchAdapter:79",
        "name": "getResearchAdapter",
        "file": "api/llm/index.js",
        "startLine": 79,
        "endLine": 82,
        "async": false,
        "generator": false,
        "params": [
          "config=default"
        ],
        "code": "function getResearchAdapter(config = {}) {\n  const researchProvider = process.env.RESEARCH_LLM_PROVIDER || 'claude';\n  return getAdapter(researchProvider, config);\n}",
        "normalizedCode": "function getResearchAdapter(config = {}) { const researchProvider = process.env.RESEARCH_LLM_PROVIDER || 'claude'; return getAdapter(researchProvider, config); }"
      },
      {
        "id": "api/llm/index.js:registerProvider:89",
        "name": "registerProvider",
        "file": "api/llm/index.js",
        "startLine": 89,
        "endLine": 94,
        "async": false,
        "generator": false,
        "params": [
          "name",
          "AdapterClass"
        ],
        "code": "function registerProvider(name, AdapterClass) {\n  if (!(AdapterClass.prototype instanceof LLMAdapter)) {\n    throw new Error('AdapterClass must extend LLMAdapter');\n  }\n  providers[name] = AdapterClass;\n}",
        "normalizedCode": "function registerProvider(name, AdapterClass) { if (!(AdapterClass.prototype instanceof LLMAdapter)) { throw new Error('AdapterClass must extend LLMAdapter'); } providers[name] = AdapterClass; }"
      },
      {
        "id": "api/llm/index.js:listProviders:100",
        "name": "listProviders",
        "file": "api/llm/index.js",
        "startLine": 100,
        "endLine": 102,
        "async": false,
        "generator": false,
        "params": [],
        "code": "function listProviders() {\n  return Object.keys(providers);\n}",
        "normalizedCode": "function listProviders() { return Object.keys(providers); }"
      },
      {
        "id": "api/llm/index.js:clearCache:107",
        "name": "clearCache",
        "file": "api/llm/index.js",
        "startLine": 107,
        "endLine": 109,
        "async": false,
        "generator": false,
        "params": [],
        "code": "function clearCache() {\n  instances.clear();\n}",
        "normalizedCode": "function clearCache() { instances.clear(); }"
      },
      {
        "id": "public/canvas.html:script:0:showState:27",
        "name": "showState",
        "file": "public/canvas.html:script:0",
        "startLine": 27,
        "endLine": 39,
        "async": false,
        "generator": false,
        "params": [
          "name"
        ],
        "code": "        function showState(name) {\n            Object.entries(states).forEach(([key, el]) => {\n                if (key === name) {\n                    el.classList.add('active');\n                    el.classList.remove('hidden');\n                } else {\n                    el.classList.remove('active');\n                    if (key === 'upload') {\n                        el.classList.add('hidden');\n                    }\n                }\n            });\n        }",
        "normalizedCode": " function showState(name) { Object.entries(states).forEach(([key, el]) => { if (key === name) { el.classList.add('active'); el.classList.remove('hidden'); } else { el.classList.remove('active'); if (key === 'upload') { el.classList.add('hidden'); } } }); }"
      },
      {
        "id": "public/canvas.html:script:0:checkUrlForJob:42",
        "name": "checkUrlForJob",
        "file": "public/canvas.html:script:0",
        "startLine": 42,
        "endLine": 54,
        "async": false,
        "generator": false,
        "params": [],
        "code": "        function checkUrlForJob() {\n            const params = new URLSearchParams(window.location.search);\n            const jobId = params.get('job');\n            \n            if (jobId && /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(jobId)) {\n                currentJobId = jobId;\n                showState('loading');\n                loadingStatus.textContent = 'loading canvas...';\n                startStream(jobId);\n                return true;\n            }\n            return false;\n        }",
        "normalizedCode": " function checkUrlForJob() { const params = new URLSearchParams(window.location.search); const jobId = params.get('job'); if (jobId && /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(jobId)) { currentJobId = jobId; showState('loading'); loadingStatus.textContent = 'loading canvas...'; startStream(jobId); return true; } return false; }"
      },
      {
        "id": "public/canvas.html:script:0:handleFile:57",
        "name": "handleFile",
        "file": "public/canvas.html:script:0",
        "startLine": 57,
        "endLine": 77,
        "async": false,
        "generator": false,
        "params": [
          "file"
        ],
        "code": "        function handleFile(file) {\n            if (!file.type.startsWith('image/')) {\n                showError('please upload an image file');\n                return;\n            }\n            \n            if (file.size > 20 * 1024 * 1024) {\n                showError('file too large (max 20mb)');\n                return;\n            }\n            \n            selectedFile = file;\n            \n            const reader = new FileReader();\n            reader.onload = (e) => {\n                uploadPreview.src = e.target.result;\n                uploadZone.classList.add('has-image');\n                generateBtn.classList.add('visible');\n            };\n            reader.readAsDataURL(file);\n        }",
        "normalizedCode": " function handleFile(file) { if (!file.type.startsWith('image/')) { showError('please upload an image file'); return; } if (file.size > 20 * 1024 * 1024) { showError('file too large (max 20mb)'); return; } selectedFile = file; const reader = new FileReader(); reader.onload = (e) => { uploadPreview.src = e.target.result; uploadZone.classList.add('has-image'); generateBtn.classList.add('visible'); }; reader.readAsDataURL(file); }"
      },
      {
        "id": "public/canvas.html:script:0:uploadAndGenerate:80",
        "name": "uploadAndGenerate",
        "file": "public/canvas.html:script:0",
        "startLine": 80,
        "endLine": 118,
        "async": true,
        "generator": false,
        "params": [],
        "code": "        async function uploadAndGenerate() {\n            if (!selectedFile) return;\n            \n            // Show loading state\n            loadingPreview.src = uploadPreview.src;\n            showState('loading');\n            progressBar.style.width = '5%';\n            loadingStatus.textContent = 'uploading screenshot...';\n            \n            try {\n                // Upload image\n                const formData = new FormData();\n                formData.append('image', selectedFile);\n                \n                const response = await fetch('/api/generate', {\n                    method: 'POST',\n                    body: formData,\n                });\n                \n                const data = await response.json();\n                \n                if (!response.ok) {\n                    throw new Error(data.message || data.error || 'upload failed');\n                }\n                \n                // Update URL\n                currentJobId = data.jobId;\n                window.history.pushState({}, '', `/canvas?job=${data.jobId}`);\n                \n                progressBar.style.width = '10%';\n                loadingStatus.textContent = 'analyzing screenshot...';\n                \n                // Start streaming\n                startStream(data.jobId);\n                \n            } catch (err) {\n                showError(err.message || 'upload failed');\n            }\n        }",
        "normalizedCode": " async function uploadAndGenerate() { if (!selectedFile) return; // Show loading state loadingPreview.src = uploadPreview.src; showState('loading'); progressBar.style.width = '5%'; loadingStatus.textContent = 'uploading screenshot...'; try { // Upload image const formData = new FormData(); formData.append('image', selectedFile); const response = await fetch('/api/generate', { method: 'POST', body: formData, }); const data = await response.json(); if (!response.ok) { throw new Error(data.message || data.error || 'upload failed'); } // Update URL currentJobId = data.jobId; window.history.pushState({}, '', `/canvas?job=${data.jobId}`); progressBar.style.width = '10%'; loadingStatus.textContent = 'analyzing screenshot...'; // Start streaming startStream(data.jobId); } catch (err) { showError(err.message || 'upload failed'); } }"
      },
      {
        "id": "public/canvas.html:script:0:startStream:121",
        "name": "startStream",
        "file": "public/canvas.html:script:0",
        "startLine": 121,
        "endLine": 173,
        "async": false,
        "generator": false,
        "params": [
          "jobId"
        ],
        "code": "        function startStream(jobId) {\n            htmlBuffer = '';\n            \n            const eventSource = new EventSource(`/api/job/${jobId}/canvas`);\n            \n            eventSource.addEventListener('status', (e) => {\n                const data = JSON.parse(e.data);\n                progressBar.style.width = `${data.progress || 10}%`;\n                loadingStatus.textContent = data.message || 'processing...';\n            });\n            \n            eventSource.addEventListener('manifest', (e) => {\n                const manifest = JSON.parse(e.data);\n                console.log('Received manifest:', manifest);\n                progressBar.style.width = '50%';\n                loadingStatus.textContent = 'generating canvas...';\n            });\n            \n            eventSource.addEventListener('html', (e) => {\n                const data = JSON.parse(e.data);\n                htmlBuffer += data.chunk;\n            });\n            \n            eventSource.addEventListener('complete', (e) => {\n                const data = JSON.parse(e.data);\n                console.log('Canvas complete:', data);\n                \n                progressBar.style.width = '100%';\n                loadingStatus.textContent = 'canvas ready!';\n                \n                // Render the canvas\n                setTimeout(() => {\n                    renderCanvas(htmlBuffer);\n                }, 300);\n                \n                eventSource.close();\n            });\n            \n            eventSource.addEventListener('error', (e) => {\n                try {\n                    const data = JSON.parse(e.data);\n                    showError(data.message || 'generation failed');\n                } catch {\n                    showError('connection lost');\n                }\n                eventSource.close();\n            });\n            \n            eventSource.onerror = () => {\n                showError('connection lost - please try again');\n                eventSource.close();\n            };\n        }",
        "normalizedCode": " function startStream(jobId) { htmlBuffer = ''; const eventSource = new EventSource(`/api/job/${jobId}/canvas`); eventSource.addEventListener('status', (e) => { const data = JSON.parse(e.data); progressBar.style.width = `${data.progress || 10}%`; loadingStatus.textContent = data.message || 'processing...'; }); eventSource.addEventListener('manifest', (e) => { const manifest = JSON.parse(e.data); console.log('Received manifest:', manifest); progressBar.style.width = '50%'; loadingStatus.textContent = 'generating canvas...'; }); eventSource.addEventListener('html', (e) => { const data = JSON.parse(e.data); htmlBuffer += data.chunk; }); eventSource.addEventListener('complete', (e) => { const data = JSON.parse(e.data); console.log('Canvas complete:', data); progressBar.style.width = '100%'; loadingStatus.textContent = 'canvas ready!'; // Render the canvas setTimeout(() => { renderCanvas(htmlBuffer); }, 300); eventSource.close(); }); eventSource.addEventListener('error', (e) => { try { const data = JSON.parse(e.data); showError(data.message || 'generation failed'); } catch { showError('connection lost'); } eventSource.close(); }); eventSource.onerror = () => { showError('connection lost - please try again'); eventSource.close(); }; }"
      },
      {
        "id": "public/canvas.html:script:0:renderCanvas:176",
        "name": "renderCanvas",
        "file": "public/canvas.html:script:0",
        "startLine": 176,
        "endLine": 190,
        "async": false,
        "generator": false,
        "params": [
          "html"
        ],
        "code": "        function renderCanvas(html) {\n            showState('canvas');\n            \n            // Write HTML to iframe\n            const doc = canvasFrame.contentDocument || canvasFrame.contentWindow.document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n            \n            // Listen for events from the canvas\n            canvasFrame.contentWindow.addEventListener('giue:investigate', (e) => {\n                console.log('Investigate triggered:', e.detail);\n                // Future: Trigger research API\n            });\n        }",
        "normalizedCode": " function renderCanvas(html) { showState('canvas'); // Write HTML to iframe const doc = canvasFrame.contentDocument || canvasFrame.contentWindow.document; doc.open(); doc.write(html); doc.close(); // Listen for events from the canvas canvasFrame.contentWindow.addEventListener('giue:investigate', (e) => { console.log('Investigate triggered:', e.detail); // Future: Trigger research API }); }"
      },
      {
        "id": "public/canvas.html:script:0:showError:193",
        "name": "showError",
        "file": "public/canvas.html:script:0",
        "startLine": 193,
        "endLine": 196,
        "async": false,
        "generator": false,
        "params": [
          "message"
        ],
        "code": "        function showError(message) {\n            errorMessage.textContent = message;\n            showState('error');\n        }",
        "normalizedCode": " function showError(message) { errorMessage.textContent = message; showState('error'); }"
      },
      {
        "id": "public/canvas.html:script:0:reset:199",
        "name": "reset",
        "file": "public/canvas.html:script:0",
        "startLine": 199,
        "endLine": 210,
        "async": false,
        "generator": false,
        "params": [],
        "code": "        function reset() {\n            selectedFile = null;\n            currentJobId = null;\n            htmlBuffer = '';\n            uploadPreview.src = '';\n            uploadZone.classList.remove('has-image');\n            generateBtn.classList.remove('visible');\n            progressBar.style.width = '0%';\n            window.history.pushState({}, '', '/canvas');\n            showState('upload');\n            states.upload.classList.remove('hidden');\n        }",
        "normalizedCode": " function reset() { selectedFile = null; currentJobId = null; htmlBuffer = ''; uploadPreview.src = ''; uploadZone.classList.remove('has-image'); generateBtn.classList.remove('visible'); progressBar.style.width = '0%'; window.history.pushState({}, '', '/canvas'); showState('upload'); states.upload.classList.remove('hidden'); }"
      },
      {
        "id": "public/index.html:script:0:handleFile:59",
        "name": "handleFile",
        "file": "public/index.html:script:0",
        "startLine": 59,
        "endLine": 82,
        "async": false,
        "generator": false,
        "params": [
          "file"
        ],
        "code": "        function handleFile(file) {\n            if (!file.type.startsWith('image/')) {\n                showError('please upload an image file');\n                return;\n            }\n            \n            if (file.size > 20 * 1024 * 1024) {\n                showError('file too large (max 20mb)');\n                return;\n            }\n            \n            selectedFile = file;\n            hideError();\n            \n            const reader = new FileReader();\n            reader.onload = (e) => {\n                imagePreview.src = e.target.result;\n                uploadContent.classList.add('hidden');\n                previewContainer.classList.add('show');\n                uploadArea.classList.add('has-image');\n                analyzeBtn.disabled = false;\n            };\n            reader.readAsDataURL(file);\n        }",
        "normalizedCode": " function handleFile(file) { if (!file.type.startsWith('image/')) { showError('please upload an image file'); return; } if (file.size > 20 * 1024 * 1024) { showError('file too large (max 20mb)'); return; } selectedFile = file; hideError(); const reader = new FileReader(); reader.onload = (e) => { imagePreview.src = e.target.result; uploadContent.classList.add('hidden'); previewContainer.classList.add('show'); uploadArea.classList.add('has-image'); analyzeBtn.disabled = false; }; reader.readAsDataURL(file); }"
      },
      {
        "id": "public/index.html:script:0:setLoading:133",
        "name": "setLoading",
        "file": "public/index.html:script:0",
        "startLine": 133,
        "endLine": 137,
        "async": false,
        "generator": false,
        "params": [
          "loading"
        ],
        "code": "        function setLoading(loading) {\n            analyzeBtn.disabled = loading;\n            spinner.classList.toggle('show', loading);\n            btnText.textContent = loading ? 'uploading' : 'analyze';\n        }",
        "normalizedCode": " function setLoading(loading) { analyzeBtn.disabled = loading; spinner.classList.toggle('show', loading); btnText.textContent = loading ? 'uploading' : 'analyze'; }"
      },
      {
        "id": "public/index.html:script:0:showError:139",
        "name": "showError",
        "file": "public/index.html:script:0",
        "startLine": 139,
        "endLine": 142,
        "async": false,
        "generator": false,
        "params": [
          "message"
        ],
        "code": "        function showError(message) {\n            errorText.textContent = message;\n            errorMessage.classList.add('show');\n        }",
        "normalizedCode": " function showError(message) { errorText.textContent = message; errorMessage.classList.add('show'); }"
      },
      {
        "id": "public/index.html:script:0:hideError:144",
        "name": "hideError",
        "file": "public/index.html:script:0",
        "startLine": 144,
        "endLine": 146,
        "async": false,
        "generator": false,
        "params": [],
        "code": "        function hideError() {\n            errorMessage.classList.remove('show');\n        }",
        "normalizedCode": " function hideError() { errorMessage.classList.remove('show'); }"
      },
      {
        "id": "public/index.html:script:0:showSuccess:148",
        "name": "showSuccess",
        "file": "public/index.html:script:0",
        "startLine": 148,
        "endLine": 170,
        "async": false,
        "generator": false,
        "params": [
          "jobId",
          "viewUrl"
        ],
        "code": "        function showSuccess(jobId, viewUrl) {\n            const fullUrl = window.location.origin + viewUrl;\n            \n            viewResultsLink.href = viewUrl;\n            jobUrl.textContent = fullUrl;\n            \n            uploadSection.style.display = 'none';\n            successSection.classList.add('show');\n            \n            let seconds = 2;\n            countdown.textContent = seconds;\n            \n            if (countdownInterval) clearInterval(countdownInterval);\n            \n            countdownInterval = setInterval(() => {\n                seconds--;\n                countdown.textContent = seconds;\n                if (seconds <= 0) {\n                    clearInterval(countdownInterval);\n                    window.location.href = viewUrl;\n                }\n            }, 1000);\n        }",
        "normalizedCode": " function showSuccess(jobId, viewUrl) { const fullUrl = window.location.origin + viewUrl; viewResultsLink.href = viewUrl; jobUrl.textContent = fullUrl; uploadSection.style.display = 'none'; successSection.classList.add('show'); let seconds = 2; countdown.textContent = seconds; if (countdownInterval) clearInterval(countdownInterval); countdownInterval = setInterval(() => { seconds--; countdown.textContent = seconds; if (seconds <= 0) { clearInterval(countdownInterval); window.location.href = viewUrl; } }, 1000); }"
      },
      {
        "id": "public/index.html:script:0:resetForm:172",
        "name": "resetForm",
        "file": "public/index.html:script:0",
        "startLine": 172,
        "endLine": 190,
        "async": false,
        "generator": false,
        "params": [],
        "code": "        function resetForm() {\n            if (countdownInterval) {\n                clearInterval(countdownInterval);\n                countdownInterval = null;\n            }\n            \n            selectedFile = null;\n            fileInput.value = '';\n            uploadContent.classList.remove('hidden');\n            previewContainer.classList.remove('show');\n            uploadArea.classList.remove('has-image');\n            imagePreview.src = '';\n            questionInput.value = '';\n            analyzeBtn.disabled = true;\n            setLoading(false);\n            successSection.classList.remove('show');\n            uploadSection.style.display = 'block';\n            hideError();\n        }",
        "normalizedCode": " function resetForm() { if (countdownInterval) { clearInterval(countdownInterval); countdownInterval = null; } selectedFile = null; fileInput.value = ''; uploadContent.classList.remove('hidden'); previewContainer.classList.remove('show'); uploadArea.classList.remove('has-image'); imagePreview.src = ''; questionInput.value = ''; analyzeBtn.disabled = true; setLoading(false); successSection.classList.remove('show'); uploadSection.style.display = 'block'; hideError(); }"
      },
      {
        "id": "public/job.html:script:1:init:37",
        "name": "init",
        "file": "public/job.html:script:1",
        "startLine": 37,
        "endLine": 48,
        "async": false,
        "generator": false,
        "params": [],
        "code": "        function init() {\n            if (!jobId || !/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(jobId)) {\n                showError('invalid job id');\n                return;\n            }\n            \n            imageToggle.addEventListener('click', () => {\n                imageSection.classList.toggle('collapsed');\n            });\n            \n            connectToStream();\n        }",
        "normalizedCode": " function init() { if (!jobId || !/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(jobId)) { showError('invalid job id'); return; } imageToggle.addEventListener('click', () => { imageSection.classList.toggle('collapsed'); }); connectToStream(); }"
      },
      {
        "id": "public/job.html:script:1:connectToStream:50",
        "name": "connectToStream",
        "file": "public/job.html:script:1",
        "startLine": 50,
        "endLine": 88,
        "async": false,
        "generator": false,
        "params": [],
        "code": "        function connectToStream() {\n            const eventSource = new EventSource(`/api/job/${jobId}/stream`);\n            \n            eventSource.addEventListener('init', (e) => {\n                const data = JSON.parse(e.data);\n                handleInit(data);\n            });\n            \n            eventSource.addEventListener('status', (e) => {\n                const data = JSON.parse(e.data);\n                updateProgress(data);\n            });\n            \n            eventSource.addEventListener('token', (e) => {\n                const data = JSON.parse(e.data);\n                appendToken(data.text);\n            });\n            \n            eventSource.addEventListener('complete', (e) => {\n                const data = JSON.parse(e.data);\n                handleComplete(data);\n                eventSource.close();\n            });\n            \n            eventSource.addEventListener('error', (e) => {\n                try {\n                    const data = JSON.parse(e.data);\n                    showError(data.message);\n                } catch {\n                    fallbackToPoll();\n                }\n                eventSource.close();\n            });\n            \n            eventSource.onerror = () => {\n                fallbackToPoll();\n                eventSource.close();\n            };\n        }",
        "normalizedCode": " function connectToStream() { const eventSource = new EventSource(`/api/job/${jobId}/stream`); eventSource.addEventListener('init', (e) => { const data = JSON.parse(e.data); handleInit(data); }); eventSource.addEventListener('status', (e) => { const data = JSON.parse(e.data); updateProgress(data); }); eventSource.addEventListener('token', (e) => { const data = JSON.parse(e.data); appendToken(data.text); }); eventSource.addEventListener('complete', (e) => { const data = JSON.parse(e.data); handleComplete(data); eventSource.close(); }); eventSource.addEventListener('error', (e) => { try { const data = JSON.parse(e.data); showError(data.message); } catch { fallbackToPoll(); } eventSource.close(); }); eventSource.onerror = () => { fallbackToPoll(); eventSource.close(); }; }"
      },
      {
        "id": "public/job.html:script:1:handleInit:90",
        "name": "handleInit",
        "file": "public/job.html:script:1",
        "startLine": 90,
        "endLine": 107,
        "async": false,
        "generator": false,
        "params": [
          "data"
        ],
        "code": "        function handleInit(data) {\n            if (data.imageData && data.mediaType) {\n                uploadedImage.src = `data:${data.mediaType};base64,${data.imageData}`;\n                uploadedImage.style.display = 'block';\n                imagePlaceholder.style.display = 'none';\n            }\n            \n            if (data.question) {\n                questionText.textContent = data.question;\n                questionDisplay.style.display = 'block';\n            }\n            \n            updateProgress({\n                status: data.status,\n                progress: data.progress || 0,\n                message: data.progressMessage\n            });\n        }",
        "normalizedCode": " function handleInit(data) { if (data.imageData && data.mediaType) { uploadedImage.src = `data:${data.mediaType};base64,${data.imageData}`; uploadedImage.style.display = 'block'; imagePlaceholder.style.display = 'none'; } if (data.question) { questionText.textContent = data.question; questionDisplay.style.display = 'block'; } updateProgress({ status: data.status, progress: data.progress || 0, message: data.progressMessage }); }"
      },
      {
        "id": "public/job.html:script:1:updateProgress:109",
        "name": "updateProgress",
        "file": "public/job.html:script:1",
        "startLine": 109,
        "endLine": 124,
        "async": false,
        "generator": false,
        "params": [
          "data"
        ],
        "code": "        function updateProgress(data) {\n            const status = data.status || 'processing';\n            const progress = data.progress || 0;\n            const message = data.message || data.progressMessage || 'processing...';\n            \n            statusDot.className = 'status-dot ' + status;\n            statusText.textContent = STATUS_NAMES[status] || status;\n            progressBar.style.width = `${progress}%`;\n            progressPercent.textContent = `${progress}%`;\n            progressMessage.textContent = message.toLowerCase();\n            \n            if (status === 'streaming' && !analysisSection.classList.contains('visible')) {\n                imageSection.classList.add('collapsed');\n                analysisSection.classList.add('visible');\n            }\n        }",
        "normalizedCode": " function updateProgress(data) { const status = data.status || 'processing'; const progress = data.progress || 0; const message = data.message || data.progressMessage || 'processing...'; statusDot.className = 'status-dot ' + status; statusText.textContent = STATUS_NAMES[status] || status; progressBar.style.width = `${progress}%`; progressPercent.textContent = `${progress}%`; progressMessage.textContent = message.toLowerCase(); if (status === 'streaming' && !analysisSection.classList.contains('visible')) { imageSection.classList.add('collapsed'); analysisSection.classList.add('visible'); } }"
      },
      {
        "id": "public/job.html:script:1:appendToken:126",
        "name": "appendToken",
        "file": "public/job.html:script:1",
        "startLine": 126,
        "endLine": 130,
        "async": false,
        "generator": false,
        "params": [
          "text"
        ],
        "code": "        function appendToken(text) {\n            fullText += text;\n            analysisContent.innerHTML = marked.parse(fullText);\n            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });\n        }",
        "normalizedCode": " function appendToken(text) { fullText += text; analysisContent.innerHTML = marked.parse(fullText); window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }); }"
      },
      {
        "id": "public/job.html:script:1:handleComplete:132",
        "name": "handleComplete",
        "file": "public/job.html:script:1",
        "startLine": 132,
        "endLine": 149,
        "async": false,
        "generator": false,
        "params": [
          "data"
        ],
        "code": "        function handleComplete(data) {\n            isComplete = true;\n            \n            if (!analysisSection.classList.contains('visible')) {\n                imageSection.classList.add('collapsed');\n                analysisSection.classList.add('visible');\n            }\n            \n            if (data.analysis && data.analysis.length > fullText.length) {\n                fullText = data.analysis;\n                analysisContent.innerHTML = marked.parse(fullText);\n            }\n            \n            typingCursor.classList.add('hidden');\n            progressSection.classList.add('hidden');\n            actionsSection.classList.add('visible');\n            document.title = 'done - thinx.fun';\n        }",
        "normalizedCode": " function handleComplete(data) { isComplete = true; if (!analysisSection.classList.contains('visible')) { imageSection.classList.add('collapsed'); analysisSection.classList.add('visible'); } if (data.analysis && data.analysis.length > fullText.length) { fullText = data.analysis; analysisContent.innerHTML = marked.parse(fullText); } typingCursor.classList.add('hidden'); progressSection.classList.add('hidden'); actionsSection.classList.add('visible'); document.title = 'done - thinx.fun'; }"
      },
      {
        "id": "public/job.html:script:1:fallbackToPoll:151",
        "name": "fallbackToPoll",
        "file": "public/job.html:script:1",
        "startLine": 151,
        "endLine": 192,
        "async": true,
        "generator": false,
        "params": [],
        "code": "        async function fallbackToPoll() {\n            try {\n                const response = await fetch(`/api/job/${jobId}/status?includeImage=true`);\n                const data = await response.json();\n                \n                if (data.error) {\n                    showError(data.message || data.error);\n                    return;\n                }\n                \n                if (data.imageData && data.mediaType) {\n                    uploadedImage.src = `data:${data.mediaType};base64,${data.imageData}`;\n                    uploadedImage.style.display = 'block';\n                    imagePlaceholder.style.display = 'none';\n                }\n                \n                if (data.question) {\n                    questionText.textContent = data.question;\n                    questionDisplay.style.display = 'block';\n                }\n                \n                updateProgress({\n                    status: data.status,\n                    progress: data.progress,\n                    message: data.progressMessage\n                });\n                \n                if (data.status === 'completed' && data.result) {\n                    fullText = data.result.analysis;\n                    imageSection.classList.add('collapsed');\n                    analysisSection.classList.add('visible');\n                    analysisContent.innerHTML = marked.parse(fullText);\n                    handleComplete(data.result);\n                } else if (data.status === 'failed') {\n                    showError(data.error || 'analysis failed');\n                } else {\n                    setTimeout(connectToStream, 2000);\n                }\n            } catch (error) {\n                showError('failed to load. refresh the page.');\n            }\n        }",
        "normalizedCode": " async function fallbackToPoll() { try { const response = await fetch(`/api/job/${jobId}/status?includeImage=true`); const data = await response.json(); if (data.error) { showError(data.message || data.error); return; } if (data.imageData && data.mediaType) { uploadedImage.src = `data:${data.mediaType};base64,${data.imageData}`; uploadedImage.style.display = 'block'; imagePlaceholder.style.display = 'none'; } if (data.question) { questionText.textContent = data.question; questionDisplay.style.display = 'block'; } updateProgress({ status: data.status, progress: data.progress, message: data.progressMessage }); if (data.status === 'completed' && data.result) { fullText = data.result.analysis; imageSection.classList.add('collapsed'); analysisSection.classList.add('visible'); analysisContent.innerHTML = marked.parse(fullText); handleComplete(data.result); } else if (data.status === 'failed') { showError(data.error || 'analysis failed'); } else { setTimeout(connectToStream, 2000); } } catch (error) { showError('failed to load. refresh the page.'); } }"
      },
      {
        "id": "public/job.html:script:1:showError:194",
        "name": "showError",
        "file": "public/job.html:script:1",
        "startLine": 194,
        "endLine": 199,
        "async": false,
        "generator": false,
        "params": [
          "message"
        ],
        "code": "        function showError(message) {\n            progressSection.style.display = 'none';\n            analysisSection.style.display = 'none';\n            errorSection.classList.add('visible');\n            errorMessageEl.textContent = message;\n        }",
        "normalizedCode": " function showError(message) { progressSection.style.display = 'none'; analysisSection.style.display = 'none'; errorSection.classList.add('visible'); errorMessageEl.textContent = message; }"
      },
      {
        "id": "public/paste.html:script:1:showState:27",
        "name": "showState",
        "file": "public/paste.html:script:1",
        "startLine": 27,
        "endLine": 30,
        "async": false,
        "generator": false,
        "params": [
          "name"
        ],
        "code": "        function showState(name) {\n            Object.values(states).forEach(s => s.classList.remove('active'));\n            states[name].classList.add('active');\n        }",
        "normalizedCode": " function showState(name) { Object.values(states).forEach(s => s.classList.remove('active')); states[name].classList.add('active'); }"
      },
      {
        "id": "public/paste.html:script:1:readClipboard:33",
        "name": "readClipboard",
        "file": "public/paste.html:script:1",
        "startLine": 33,
        "endLine": 57,
        "async": true,
        "generator": false,
        "params": [],
        "code": "        async function readClipboard() {\n            try {\n                const items = await navigator.clipboard.read();\n                \n                for (const item of items) {\n                    const imageType = item.types.find(t => t.startsWith('image/'));\n                    if (imageType) {\n                        const blob = await item.getType(imageType);\n                        handleImage(blob, imageType);\n                        return;\n                    }\n                }\n                \n                // No image\n                showError('no image in clipboard');\n                \n            } catch (err) {\n                console.error('Clipboard error:', err);\n                if (err.name === 'NotAllowedError') {\n                    showError('clipboard access denied');\n                } else {\n                    showError('couldn\\'t read clipboard');\n                }\n            }\n        }",
        "normalizedCode": " async function readClipboard() { try { const items = await navigator.clipboard.read(); for (const item of items) { const imageType = item.types.find(t => t.startsWith('image/')); if (imageType) { const blob = await item.getType(imageType); handleImage(blob, imageType); return; } } // No image showError('no image in clipboard'); } catch (err) { console.error('Clipboard error:', err); if (err.name === 'NotAllowedError') { showError('clipboard access denied'); } else { showError('couldn\\'t read clipboard'); } } }"
      },
      {
        "id": "public/paste.html:script:1:handleImage:59",
        "name": "handleImage",
        "file": "public/paste.html:script:1",
        "startLine": 59,
        "endLine": 70,
        "async": false,
        "generator": false,
        "params": [
          "blob",
          "type"
        ],
        "code": "        function handleImage(blob, type) {\n            currentFile = new File([blob], 'screenshot.png', { type });\n            currentImageUrl = URL.createObjectURL(blob);\n            \n            // Show full-screen scan\n            scanImage.src = currentImageUrl;\n            resultsImage.src = currentImageUrl;\n            showState('analyze');\n            \n            // Start upload and streaming\n            uploadAndStream();\n        }",
        "normalizedCode": " function handleImage(blob, type) { currentFile = new File([blob], 'screenshot.png', { type }); currentImageUrl = URL.createObjectURL(blob); // Show full-screen scan scanImage.src = currentImageUrl; resultsImage.src = currentImageUrl; showState('analyze'); // Start upload and streaming uploadAndStream(); }"
      },
      {
        "id": "public/paste.html:script:1:uploadAndStream:72",
        "name": "uploadAndStream",
        "file": "public/paste.html:script:1",
        "startLine": 72,
        "endLine": 95,
        "async": true,
        "generator": false,
        "params": [],
        "code": "        async function uploadAndStream() {\n            try {\n                // Upload\n                const formData = new FormData();\n                formData.append('image', currentFile);\n                \n                const response = await fetch('/api/upload', {\n                    method: 'POST',\n                    body: formData,\n                });\n                \n                const data = await response.json();\n                \n                if (!response.ok) {\n                    throw new Error(data.message || data.error || 'upload failed');\n                }\n                \n                // Start streaming\n                startStream(data.jobId);\n                \n            } catch (err) {\n                showError(err.message || 'upload failed');\n            }\n        }",
        "normalizedCode": " async function uploadAndStream() { try { // Upload const formData = new FormData(); formData.append('image', currentFile); const response = await fetch('/api/upload', { method: 'POST', body: formData, }); const data = await response.json(); if (!response.ok) { throw new Error(data.message || data.error || 'upload failed'); } // Start streaming startStream(data.jobId); } catch (err) { showError(err.message || 'upload failed'); } }"
      },
      {
        "id": "public/paste.html:script:1:startStream:97",
        "name": "startStream",
        "file": "public/paste.html:script:1",
        "startLine": 97,
        "endLine": 183,
        "async": true,
        "generator": false,
        "params": [
          "jobId"
        ],
        "code": "        async function startStream(jobId) {\n            rawText = '';\n            resultsText.innerHTML = '';\n            autoScroll = true;\n            isStreaming = true;\n            cursor.classList.remove('done');\n            resultsContent.classList.add('auto-scroll');\n            \n            let transitionedToResults = false;\n            \n            try {\n                // Use fetch with ReadableStream instead of EventSource\n                // This often works better with Vercel's edge network\n                const response = await fetch(`/api/job/${jobId}/stream`);\n                \n                if (!response.ok) {\n                    throw new Error(`HTTP ${response.status}`);\n                }\n                \n                const reader = response.body.getReader();\n                const decoder = new TextDecoder();\n                let buffer = '';\n                \n                while (true) {\n                    const { done, value } = await reader.read();\n                    \n                    if (done) break;\n                    \n                    buffer += decoder.decode(value, { stream: true });\n                    \n                    // Parse SSE events from buffer\n                    const lines = buffer.split('\\n');\n                    buffer = lines.pop() || ''; // Keep incomplete line in buffer\n                    \n                    for (const line of lines) {\n                        if (line.startsWith('data: ')) {\n                            try {\n                                const data = JSON.parse(line.slice(6));\n                                \n                                if (data.type === 'token' || data.text) {\n                                    if (!transitionedToResults) {\n                                        showState('results');\n                                        transitionedToResults = true;\n                                    }\n                                    \n                                    rawText += data.token || data.text || '';\n                                    renderMarkdown();\n                                    scrollToBottom();\n                                }\n                                \n                                if (data.type === 'complete') {\n                                    isStreaming = false;\n                                    cursor.classList.add('done');\n                                    resultsContent.classList.remove('auto-scroll');\n                                    return;\n                                }\n                                \n                                if (data.type === 'error') {\n                                    if (!transitionedToResults) {\n                                        showError(data.message || 'analysis failed');\n                                    }\n                                    isStreaming = false;\n                                    cursor.classList.add('done');\n                                    return;\n                                }\n                            } catch (e) {\n                                // Ignore parse errors for non-JSON lines\n                            }\n                        }\n                    }\n                }\n                \n                // Stream ended\n                isStreaming = false;\n                cursor.classList.add('done');\n                resultsContent.classList.remove('auto-scroll');\n                \n            } catch (err) {\n                console.error('Stream error:', err);\n                isStreaming = false;\n                cursor.classList.add('done');\n                \n                if (!transitionedToResults) {\n                    showError('connection lost');\n                }\n            }\n        }",
        "normalizedCode": " async function startStream(jobId) { rawText = ''; resultsText.innerHTML = ''; autoScroll = true; isStreaming = true; cursor.classList.remove('done'); resultsContent.classList.add('auto-scroll'); let transitionedToResults = false; try { // Use fetch with ReadableStream instead of EventSource // This often works better with Vercel's edge network const response = await fetch(`/api/job/${jobId}/stream`); if (!response.ok) { throw new Error(`HTTP ${response.status}`); } const reader = response.body.getReader(); const decoder = new TextDecoder(); let buffer = ''; while (true) { const { done, value } = await reader.read(); if (done) break; buffer += decoder.decode(value, { stream: true }); // Parse SSE events from buffer const lines = buffer.split('\\n'); buffer = lines.pop() || ''; // Keep incomplete line in buffer for (const line of lines) { if (line.startsWith('data: ')) { try { const data = JSON.parse(line.slice(6)); if (data.type === 'token' || data.text) { if (!transitionedToResults) { showState('results'); transitionedToResults = true; } rawText += data.token || data.text || ''; renderMarkdown(); scrollToBottom(); } if (data.type === 'complete') { isStreaming = false; cursor.classList.add('done'); resultsContent.classList.remove('auto-scroll'); return; } if (data.type === 'error') { if (!transitionedToResults) { showError(data.message || 'analysis failed'); } isStreaming = false; cursor.classList.add('done'); return; } } catch (e) { // Ignore parse errors for non-JSON lines } } } } // Stream ended isStreaming = false; cursor.classList.add('done'); resultsContent.classList.remove('auto-scroll'); } catch (err) { console.error('Stream error:', err); isStreaming = false; cursor.classList.add('done'); if (!transitionedToResults) { showError('connection lost'); } } }"
      },
      {
        "id": "public/paste.html:script:1:renderMarkdown:185",
        "name": "renderMarkdown",
        "file": "public/paste.html:script:1",
        "startLine": 185,
        "endLine": 188,
        "async": false,
        "generator": false,
        "params": [],
        "code": "        function renderMarkdown() {\n            const html = marked.parse(rawText);\n            resultsText.innerHTML = html;\n        }",
        "normalizedCode": " function renderMarkdown() { const html = marked.parse(rawText); resultsText.innerHTML = html; }"
      },
      {
        "id": "public/paste.html:script:1:scrollToBottom:190",
        "name": "scrollToBottom",
        "file": "public/paste.html:script:1",
        "startLine": 190,
        "endLine": 194,
        "async": false,
        "generator": false,
        "params": [],
        "code": "        function scrollToBottom() {\n            if (autoScroll && isStreaming) {\n                resultsContent.scrollTop = resultsContent.scrollHeight;\n            }\n        }",
        "normalizedCode": " function scrollToBottom() { if (autoScroll && isStreaming) { resultsContent.scrollTop = resultsContent.scrollHeight; } }"
      },
      {
        "id": "public/paste.html:script:1:showError:231",
        "name": "showError",
        "file": "public/paste.html:script:1",
        "startLine": 231,
        "endLine": 234,
        "async": false,
        "generator": false,
        "params": [
          "message"
        ],
        "code": "        function showError(message) {\n            errorText.textContent = message;\n            showState('error');\n        }",
        "normalizedCode": " function showError(message) { errorText.textContent = message; showState('error'); }"
      },
      {
        "id": "public/paste.html:script:1:reset:236",
        "name": "reset",
        "file": "public/paste.html:script:1",
        "startLine": 236,
        "endLine": 245,
        "async": false,
        "generator": false,
        "params": [],
        "code": "        function reset() {\n            currentFile = null;\n            if (currentImageUrl) {\n                URL.revokeObjectURL(currentImageUrl);\n                currentImageUrl = null;\n            }\n            rawText = '';\n            resultsText.innerHTML = '';\n            showState('paste');\n        }",
        "normalizedCode": " function reset() { currentFile = null; if (currentImageUrl) { URL.revokeObjectURL(currentImageUrl); currentImageUrl = null; } rawText = ''; resultsText.innerHTML = ''; showState('paste'); }"
      },
      {
        "id": "scripts/generate-shortcut.js:generateShortcut:6",
        "name": "generateShortcut",
        "file": "scripts/generate-shortcut.js",
        "startLine": 6,
        "endLine": 112,
        "async": false,
        "generator": false,
        "params": [
          "apiBaseUrl=default"
        ],
        "code": "function generateShortcut(apiBaseUrl = 'https://thinx.fun') {\n  const shortcut = {\n    WFWorkflowMinimumClientVersionString: '900',\n    WFWorkflowMinimumClientVersion: 900,\n    WFWorkflowIcon: {\n      WFWorkflowIconStartColor: 4282601983, // Purple color\n      WFWorkflowIconGlyphNumber: 59511, // Camera icon\n    },\n    WFWorkflowClientVersion: '2302.0.4',\n    WFWorkflowOutputContentItemClasses: [],\n    WFWorkflowHasOutputFallback: false,\n    WFWorkflowActions: [\n      // Action 1: Take Screenshot\n      {\n        WFWorkflowActionIdentifier: 'is.workflow.actions.takescreenshot',\n        WFWorkflowActionParameters: {},\n      },\n      // Action 2: Get Contents of URL (POST with image)\n      {\n        WFWorkflowActionIdentifier: 'is.workflow.actions.downloadurl',\n        WFWorkflowActionParameters: {\n          WFURL: `${apiBaseUrl}/api/upload`,\n          WFHTTPMethod: 'POST',\n          WFHTTPBodyType: 'Form',\n          WFFormValues: {\n            Value: {\n              WFDictionaryFieldValueItems: [\n                {\n                  WFKey: {\n                    Value: {\n                      string: 'image',\n                    },\n                    WFSerializationType: 'WFTextTokenString',\n                  },\n                  WFItemType: 3, // File type\n                  WFValue: {\n                    Value: {\n                      Type: 'ExtensionInput',\n                    },\n                    WFSerializationType: 'WFTokenAttachment',\n                  },\n                },\n              ],\n            },\n            WFSerializationType: 'WFDictionaryFieldValue',\n          },\n        },\n      },\n      // Action 3: Get Dictionary Value (get viewUrl)\n      {\n        WFWorkflowActionIdentifier: 'is.workflow.actions.getvalueforkey',\n        WFWorkflowActionParameters: {\n          WFDictionaryKey: 'viewUrl',\n        },\n      },\n      // Action 4: Create full URL by combining base URL with viewUrl\n      {\n        WFWorkflowActionIdentifier: 'is.workflow.actions.gettext',\n        WFWorkflowActionParameters: {\n          WFTextActionText: {\n            Value: {\n              string: `${apiBaseUrl}\\uFFFC`,\n              attachmentsByRange: {\n                '{11, 1}': {\n                  Type: 'ActionOutput',\n                  OutputName: 'Value',\n                  OutputUUID: 'value-uuid',\n                },\n              },\n            },\n            WFSerializationType: 'WFTextTokenString',\n          },\n        },\n      },\n      // Action 5: Open URL\n      {\n        WFWorkflowActionIdentifier: 'is.workflow.actions.openurl',\n        WFWorkflowActionParameters: {},\n      },\n    ],\n    WFWorkflowInputContentItemClasses: [\n      'WFAppStoreAppContentItem',\n      'WFArticleContentItem',\n      'WFContactContentItem',\n      'WFDateContentItem',\n      'WFEmailAddressContentItem',\n      'WFGenericFileContentItem',\n      'WFImageContentItem',\n      'WFiTunesProductContentItem',\n      'WFLocationContentItem',\n      'WFDCMapsLinkContentItem',\n      'WFAVAssetContentItem',\n      'WFPDFContentItem',\n      'WFPhoneNumberContentItem',\n      'WFRichTextContentItem',\n      'WFSafariWebPageContentItem',\n      'WFStringContentItem',\n      'WFURLContentItem',\n    ],\n    WFWorkflowTypes: [],\n    WFWorkflowImportQuestions: [],\n    WFQuickActionSurfaces: [],\n    WFWorkflowHasShortcutInputVariables: false,\n  };\n\n  return shortcut;\n}",
        "normalizedCode": "function generateShortcut(apiBaseUrl = 'https://thinx.fun') { const shortcut = { WFWorkflowMinimumClientVersionString: '900', WFWorkflowMinimumClientVersion: 900, WFWorkflowIcon: { WFWorkflowIconStartColor: 4282601983, // Purple color WFWorkflowIconGlyphNumber: 59511, // Camera icon }, WFWorkflowClientVersion: '2302.0.4', WFWorkflowOutputContentItemClasses: [], WFWorkflowHasOutputFallback: false, WFWorkflowActions: [ // Action 1: Take Screenshot { WFWorkflowActionIdentifier: 'is.workflow.actions.takescreenshot', WFWorkflowActionParameters: {}, }, // Action 2: Get Contents of URL (POST with image) { WFWorkflowActionIdentifier: 'is.workflow.actions.downloadurl', WFWorkflowActionParameters: { WFURL: `${apiBaseUrl}/api/upload`, WFHTTPMethod: 'POST', WFHTTPBodyType: 'Form', WFFormValues: { Value: { WFDictionaryFieldValueItems: [ { WFKey: { Value: { string: 'image', }, WFSerializationType: 'WFTextTokenString', }, WFItemType: 3, // File type WFValue: { Value: { Type: 'ExtensionInput', }, WFSerializationType: 'WFTokenAttachment', }, }, ], }, WFSerializationType: 'WFDictionaryFieldValue', }, }, }, // Action 3: Get Dictionary Value (get viewUrl) { WFWorkflowActionIdentifier: 'is.workflow.actions.getvalueforkey', WFWorkflowActionParameters: { WFDictionaryKey: 'viewUrl', }, }, // Action 4: Create full URL by combining base URL with viewUrl { WFWorkflowActionIdentifier: 'is.workflow.actions.gettext', WFWorkflowActionParameters: { WFTextActionText: { Value: { string: `${apiBaseUrl}\\uFFFC`, attachmentsByRange: { '{11, 1}': { Type: 'ActionOutput', OutputName: 'Value', OutputUUID: 'value-uuid', }, }, }, WFSerializationType: 'WFTextTokenString', }, }, }, // Action 5: Open URL { WFWorkflowActionIdentifier: 'is.workflow.actions.openurl', WFWorkflowActionParameters: {}, }, ], WFWorkflowInputContentItemClasses: [ 'WFAppStoreAppContentItem', 'WFArticleContentItem', 'WFContactContentItem', 'WFDateContentItem', 'WFEmailAddressContentItem', 'WFGenericFileContentItem', 'WFImageContentItem', 'WFiTunesProductContentItem', 'WFLocationContentItem', 'WFDCMapsLinkContentItem', 'WFAVAssetContentItem', 'WFPDFContentItem', 'WFPhoneNumberContentItem', 'WFRichTextContentItem', 'WFSafariWebPageContentItem', 'WFStringContentItem', 'WFURLContentItem', ], WFWorkflowTypes: [], WFWorkflowImportQuestions: [], WFQuickActionSurfaces: [], WFWorkflowHasShortcutInputVariables: false, }; return shortcut; }"
      },
      {
        "id": "scripts/generate-shortcut.js:generateSimpleShortcut:115",
        "name": "generateSimpleShortcut",
        "file": "scripts/generate-shortcut.js",
        "startLine": 115,
        "endLine": 220,
        "async": false,
        "generator": false,
        "params": [
          "apiBaseUrl=default"
        ],
        "code": "function generateSimpleShortcut(apiBaseUrl = 'https://thinx.fun') {\n  const shortcut = {\n    WFWorkflowMinimumClientVersionString: '900',\n    WFWorkflowMinimumClientVersion: 900,\n    WFWorkflowIcon: {\n      WFWorkflowIconStartColor: 4282601983,\n      WFWorkflowIconGlyphNumber: 59511,\n    },\n    WFWorkflowClientVersion: '2605.0.5',\n    WFWorkflowOutputContentItemClasses: [],\n    WFWorkflowHasOutputFallback: false,\n    WFWorkflowActions: [\n      // Action 1: Take Screenshot\n      {\n        WFWorkflowActionIdentifier: 'is.workflow.actions.takescreenshot',\n        WFWorkflowActionParameters: {\n          WFScreenshotMainMonitorOnly: false,\n          WFScreenshotType: 'Full Screen',\n        },\n      },\n      // Action 2: Set Variable to store the screenshot\n      {\n        WFWorkflowActionIdentifier: 'is.workflow.actions.setvariable',\n        WFWorkflowActionParameters: {\n          WFVariableName: 'Screenshot',\n        },\n      },\n      // Action 3: Get Contents of URL (POST multipart with image)\n      {\n        WFWorkflowActionIdentifier: 'is.workflow.actions.downloadurl',\n        WFWorkflowActionParameters: {\n          WFURL: `${apiBaseUrl}/api/upload`,\n          WFHTTPMethod: 'POST',\n          WFHTTPBodyType: 'Form',\n          WFFormValues: {\n            Value: {\n              WFDictionaryFieldValueItems: [\n                {\n                  WFKey: {\n                    Value: {\n                      string: 'image',\n                    },\n                    WFSerializationType: 'WFTextTokenString',\n                  },\n                  WFItemType: 3,\n                  WFValue: {\n                    Value: {\n                      VariableName: 'Screenshot',\n                      Type: 'Variable',\n                    },\n                    WFSerializationType: 'WFTokenAttachment',\n                  },\n                },\n              ],\n            },\n            WFSerializationType: 'WFDictionaryFieldValue',\n          },\n        },\n      },\n      // Action 4: Get Dictionary Value (viewUrl)\n      {\n        WFWorkflowActionIdentifier: 'is.workflow.actions.getvalueforkey',\n        WFWorkflowActionParameters: {\n          WFDictionaryKey: 'viewUrl',\n        },\n      },\n      // Action 5: Set variable for viewUrl\n      {\n        WFWorkflowActionIdentifier: 'is.workflow.actions.setvariable',\n        WFWorkflowActionParameters: {\n          WFVariableName: 'ViewUrl',\n        },\n      },\n      // Action 6: Text - combine base URL with viewUrl\n      {\n        WFWorkflowActionIdentifier: 'is.workflow.actions.gettext',\n        WFWorkflowActionParameters: {\n          WFTextActionText: {\n            Value: {\n              string: `${apiBaseUrl}\\uFFFC`,\n              attachmentsByRange: {\n                '{11, 1}': {\n                  VariableName: 'ViewUrl',\n                  Type: 'Variable',\n                },\n              },\n            },\n            WFSerializationType: 'WFTextTokenString',\n          },\n        },\n      },\n      // Action 7: Open URL in Safari\n      {\n        WFWorkflowActionIdentifier: 'is.workflow.actions.openurl',\n        WFWorkflowActionParameters: {},\n      },\n    ],\n    WFWorkflowInputContentItemClasses: [],\n    WFWorkflowTypes: [],\n    WFWorkflowImportQuestions: [],\n    WFQuickActionSurfaces: [],\n    WFWorkflowHasShortcutInputVariables: false,\n  };\n\n  return shortcut;\n}",
        "normalizedCode": "function generateSimpleShortcut(apiBaseUrl = 'https://thinx.fun') { const shortcut = { WFWorkflowMinimumClientVersionString: '900', WFWorkflowMinimumClientVersion: 900, WFWorkflowIcon: { WFWorkflowIconStartColor: 4282601983, WFWorkflowIconGlyphNumber: 59511, }, WFWorkflowClientVersion: '2605.0.5', WFWorkflowOutputContentItemClasses: [], WFWorkflowHasOutputFallback: false, WFWorkflowActions: [ // Action 1: Take Screenshot { WFWorkflowActionIdentifier: 'is.workflow.actions.takescreenshot', WFWorkflowActionParameters: { WFScreenshotMainMonitorOnly: false, WFScreenshotType: 'Full Screen', }, }, // Action 2: Set Variable to store the screenshot { WFWorkflowActionIdentifier: 'is.workflow.actions.setvariable', WFWorkflowActionParameters: { WFVariableName: 'Screenshot', }, }, // Action 3: Get Contents of URL (POST multipart with image) { WFWorkflowActionIdentifier: 'is.workflow.actions.downloadurl', WFWorkflowActionParameters: { WFURL: `${apiBaseUrl}/api/upload`, WFHTTPMethod: 'POST', WFHTTPBodyType: 'Form', WFFormValues: { Value: { WFDictionaryFieldValueItems: [ { WFKey: { Value: { string: 'image', }, WFSerializationType: 'WFTextTokenString', }, WFItemType: 3, WFValue: { Value: { VariableName: 'Screenshot', Type: 'Variable', }, WFSerializationType: 'WFTokenAttachment', }, }, ], }, WFSerializationType: 'WFDictionaryFieldValue', }, }, }, // Action 4: Get Dictionary Value (viewUrl) { WFWorkflowActionIdentifier: 'is.workflow.actions.getvalueforkey', WFWorkflowActionParameters: { WFDictionaryKey: 'viewUrl', }, }, // Action 5: Set variable for viewUrl { WFWorkflowActionIdentifier: 'is.workflow.actions.setvariable', WFWorkflowActionParameters: { WFVariableName: 'ViewUrl', }, }, // Action 6: Text - combine base URL with viewUrl { WFWorkflowActionIdentifier: 'is.workflow.actions.gettext', WFWorkflowActionParameters: { WFTextActionText: { Value: { string: `${apiBaseUrl}\\uFFFC`, attachmentsByRange: { '{11, 1}': { VariableName: 'ViewUrl', Type: 'Variable', }, }, }, WFSerializationType: 'WFTextTokenString', }, }, }, // Action 7: Open URL in Safari { WFWorkflowActionIdentifier: 'is.workflow.actions.openurl', WFWorkflowActionParameters: {}, }, ], WFWorkflowInputContentItemClasses: [], WFWorkflowTypes: [], WFWorkflowImportQuestions: [], WFQuickActionSurfaces: [], WFWorkflowHasShortcutInputVariables: false, }; return shortcut; }"
      }
    ],
    "endpoints": [
      {
        "id": "USE:",
        "method": "USE",
        "path": "",
        "handler": "anonymous",
        "file": "api/index.js",
        "line": 110,
        "middleware": []
      },
      {
        "id": "USE:",
        "method": "USE",
        "path": "",
        "handler": "anonymous",
        "file": "api/index.js",
        "line": 111,
        "middleware": []
      },
      {
        "id": "USE:",
        "method": "USE",
        "path": "",
        "handler": "anonymous",
        "file": "api/index.js",
        "line": 114,
        "middleware": []
      },
      {
        "id": "GET:/paste",
        "method": "GET",
        "path": "/paste",
        "handler": "inline@117",
        "file": "api/index.js",
        "line": 117,
        "middleware": []
      },
      {
        "id": "GET:/",
        "method": "GET",
        "path": "/",
        "handler": "inline@122",
        "file": "api/index.js",
        "line": 122,
        "middleware": []
      },
      {
        "id": "GET:/api/health",
        "method": "GET",
        "path": "/api/health",
        "handler": "inline@128",
        "file": "api/index.js",
        "line": 128,
        "middleware": []
      },
      {
        "id": "GET:/canvas",
        "method": "GET",
        "path": "/canvas",
        "handler": "inline@147",
        "file": "api/index.js",
        "line": 147,
        "middleware": []
      },
      {
        "id": "POST:/api/generate",
        "method": "POST",
        "path": "/api/generate",
        "handler": "inline@152",
        "file": "api/index.js",
        "line": 152,
        "middleware": [
          "anonymous"
        ]
      },
      {
        "id": "GET:/api/job/:jobId/canvas",
        "method": "GET",
        "path": "/api/job/:jobId/canvas",
        "handler": "inline@242",
        "file": "api/index.js",
        "line": 242,
        "middleware": []
      },
      {
        "id": "POST:/api/investigate/:hotspotId",
        "method": "POST",
        "path": "/api/investigate/:hotspotId",
        "handler": "inline@364",
        "file": "api/index.js",
        "line": 364,
        "middleware": []
      },
      {
        "id": "POST:/api/upload",
        "method": "POST",
        "path": "/api/upload",
        "handler": "inline@416",
        "file": "api/index.js",
        "line": 416,
        "middleware": [
          "anonymous"
        ]
      },
      {
        "id": "GET:/api/job/:jobId/stream",
        "method": "GET",
        "path": "/api/job/:jobId/stream",
        "handler": "inline@704",
        "file": "api/index.js",
        "line": 704,
        "middleware": []
      },
      {
        "id": "GET:/api/job/:jobId/status",
        "method": "GET",
        "path": "/api/job/:jobId/status",
        "handler": "inline@944",
        "file": "api/index.js",
        "line": 944,
        "middleware": []
      },
      {
        "id": "GET:/api/job/:jobId/image",
        "method": "GET",
        "path": "/api/job/:jobId/image",
        "handler": "inline@981",
        "file": "api/index.js",
        "line": 981,
        "middleware": []
      },
      {
        "id": "POST:/api/analyze",
        "method": "POST",
        "path": "/api/analyze",
        "handler": "inline@1001",
        "file": "api/index.js",
        "line": 1001,
        "middleware": [
          "anonymous"
        ]
      },
      {
        "id": "GET:/api/jobs",
        "method": "GET",
        "path": "/api/jobs",
        "handler": "inline@1088",
        "file": "api/index.js",
        "line": 1088,
        "middleware": []
      },
      {
        "id": "USE:",
        "method": "USE",
        "path": "",
        "handler": "inline@1101",
        "file": "api/index.js",
        "line": 1101,
        "middleware": []
      },
      {
        "id": "GET:[UUID_REGEX]",
        "method": "GET",
        "path": "[UUID_REGEX]",
        "handler": "inline@1122",
        "file": "api/index.js",
        "line": 1122,
        "middleware": []
      },
      {
        "id": "GET:*",
        "method": "GET",
        "path": "*",
        "handler": "inline@1140",
        "file": "api/index.js",
        "line": 1140,
        "middleware": []
      }
    ],
    "ui": [
      {
        "id": "public/canvas.html:uploadState:state:0",
        "name": "uploadState",
        "type": "state",
        "file": "public/canvas.html",
        "htmlId": "uploadState",
        "className": "upload-state",
        "innerText": "thinx.fun\n        transform screenshots into explorable canvases\n        \n        \n            \n    "
      },
      {
        "id": "public/canvas.html:loadingState:state:1",
        "name": "loadingState",
        "type": "state",
        "file": "public/canvas.html",
        "htmlId": "loadingState",
        "className": "loading-state",
        "innerText": "analyzing screenshot..."
      },
      {
        "id": "public/canvas.html:canvasState:state:2",
        "name": "canvasState",
        "type": "state",
        "file": "public/canvas.html",
        "htmlId": "canvasState",
        "className": "canvas-state",
        "innerText": ""
      },
      {
        "id": "public/canvas.html:errorState:state:3",
        "name": "errorState",
        "type": "state",
        "file": "public/canvas.html",
        "htmlId": "errorState",
        "className": "error-state",
        "innerText": "something went wrong\n        try again"
      },
      {
        "id": "public/index.html:upload-section:section:0",
        "name": "upload-section",
        "type": "section",
        "file": "public/index.html",
        "htmlId": null,
        "className": "upload-section",
        "innerText": "↑\n                        \n                            drop image or click to upload\n               "
      },
      {
        "id": "public/index.html:successSection:section:1",
        "name": "successSection",
        "type": "section",
        "file": "public/index.html",
        "htmlId": "successSection",
        "className": "success-section",
        "innerText": "uploaded\n                your image is being analyzed\n                \n                view results "
      },
      {
        "id": "public/index.html:container:container:0",
        "name": "container",
        "type": "container",
        "file": "public/index.html",
        "htmlId": null,
        "className": "container",
        "innerText": "thinx.fun\n            analyze images with ai\n            \n                → try canvas mode (transfo"
      },
      {
        "id": "public/index.html:previewContainer:container:1",
        "name": "previewContainer",
        "type": "container",
        "file": "public/index.html",
        "htmlId": "previewContainer",
        "className": "preview-container",
        "innerText": "change"
      },
      {
        "id": "public/index.html:job-url-container:container:2",
        "name": "job-url-container",
        "type": "container",
        "file": "public/index.html",
        "htmlId": null,
        "className": "job-url-container",
        "innerText": "copy"
      },
      {
        "id": "public/index.html:upload-section:section:0",
        "name": "upload-section",
        "type": "section",
        "file": "public/index.html",
        "htmlId": null,
        "className": "upload-section",
        "innerText": "↑\n                        \n                            drop image or click to upload\n               "
      },
      {
        "id": "public/index.html:question-section:section:1",
        "name": "question-section",
        "type": "section",
        "file": "public/index.html",
        "htmlId": null,
        "className": "question-section",
        "innerText": "question (optional)"
      },
      {
        "id": "public/index.html:successSection:section:2",
        "name": "successSection",
        "type": "section",
        "file": "public/index.html",
        "htmlId": "successSection",
        "className": "success-section",
        "innerText": "uploaded\n                your image is being analyzed\n                \n                view results "
      },
      {
        "id": "public/job.html:imageSection:section:0",
        "name": "imageSection",
        "type": "section",
        "file": "public/job.html",
        "htmlId": "imageSection",
        "className": "image-section",
        "innerText": "▼\n                    image\n                \n                \n                    \n                 "
      },
      {
        "id": "public/job.html:progressSection:section:1",
        "name": "progressSection",
        "type": "section",
        "file": "public/job.html",
        "htmlId": "progressSection",
        "className": "progress-section",
        "innerText": "connecting\n                    \n                    0%\n                \n                \n           "
      },
      {
        "id": "public/job.html:analysisSection:section:2",
        "name": "analysisSection",
        "type": "section",
        "file": "public/job.html",
        "htmlId": "analysisSection",
        "className": "analysis-section",
        "innerText": "copy\n                    new\n                    share"
      },
      {
        "id": "public/job.html:errorSection:section:3",
        "name": "errorSection",
        "type": "section",
        "file": "public/job.html",
        "htmlId": "errorSection",
        "className": "error-section",
        "innerText": "failed\n                something went wrong\n                try again"
      },
      {
        "id": "public/job.html:container:container:0",
        "name": "container",
        "type": "container",
        "file": "public/job.html",
        "htmlId": null,
        "className": "container",
        "innerText": "← thinx.fun\n        \n        \n        \n            \n                \n                    ▼\n         "
      },
      {
        "id": "public/job.html:imageSection:section:0",
        "name": "imageSection",
        "type": "section",
        "file": "public/job.html",
        "htmlId": "imageSection",
        "className": "image-section",
        "innerText": "▼\n                    image\n                \n                \n                    \n                 "
      },
      {
        "id": "public/job.html:progressSection:section:1",
        "name": "progressSection",
        "type": "section",
        "file": "public/job.html",
        "htmlId": "progressSection",
        "className": "progress-section",
        "innerText": "connecting\n                    \n                    0%\n                \n                \n           "
      },
      {
        "id": "public/job.html:analysisSection:section:2",
        "name": "analysisSection",
        "type": "section",
        "file": "public/job.html",
        "htmlId": "analysisSection",
        "className": "analysis-section",
        "innerText": "copy\n                    new\n                    share"
      },
      {
        "id": "public/job.html:errorSection:section:3",
        "name": "errorSection",
        "type": "section",
        "file": "public/job.html",
        "htmlId": "errorSection",
        "className": "error-section",
        "innerText": "failed\n                something went wrong\n                try again"
      },
      {
        "id": "public/paste.html:pasteState:state:0",
        "name": "pasteState",
        "type": "state",
        "file": "public/paste.html",
        "htmlId": "pasteState",
        "className": "state active",
        "innerText": "tap to paste\n        \n        ⌘V"
      },
      {
        "id": "public/paste.html:analyzeState:state:1",
        "name": "analyzeState",
        "type": "state",
        "file": "public/paste.html",
        "htmlId": "analyzeState",
        "className": "state",
        "innerText": "analyzing"
      },
      {
        "id": "public/paste.html:resultsState:state:2",
        "name": "resultsState",
        "type": "state",
        "file": "public/paste.html",
        "htmlId": "resultsState",
        "className": "state",
        "innerText": "auto-scroll paused"
      },
      {
        "id": "public/paste.html:errorState:state:3",
        "name": "errorState",
        "type": "state",
        "file": "public/paste.html",
        "htmlId": "errorState",
        "className": "state",
        "innerText": "something went wrong\n        try again"
      },
      {
        "id": "public/paste.html:scan-container:container:0",
        "name": "scan-container",
        "type": "container",
        "file": "public/paste.html",
        "htmlId": null,
        "className": "scan-container",
        "innerText": ""
      },
      {
        "id": "public/paste.html:results-image-container:container:1",
        "name": "results-image-container",
        "type": "container",
        "file": "public/paste.html",
        "htmlId": null,
        "className": "results-image-container",
        "innerText": ""
      }
    ],
    "calls": [
      {
        "callee": "require",
        "file": "api/agents/orchestrator.js",
        "line": 14,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/agents/orchestrator.js",
        "line": 15,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/agents/orchestrator.js",
        "line": 16,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "createStyleManifest",
        "file": "api/agents/orchestrator.js",
        "line": 28,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "onProgress",
        "file": "api/agents/orchestrator.js",
        "line": 96,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "analyzeScreenshot",
        "file": "api/agents/orchestrator.js",
        "line": 98,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "onProgress",
        "file": "api/agents/orchestrator.js",
        "line": 104,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "onProgress",
        "file": "api/agents/orchestrator.js",
        "line": 109,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "generateHTML",
        "file": "api/agents/orchestrator.js",
        "line": 117,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "onProgress",
        "file": "api/agents/orchestrator.js",
        "line": 124,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "api/agents/orchestrator.js",
        "line": 156,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "onProgress",
        "file": "api/agents/orchestrator.js",
        "line": 160,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "api/agents/orchestrator.js",
        "line": 162,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "analyzeScreenshot",
        "file": "api/agents/orchestrator.js",
        "line": 163,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "api/agents/orchestrator.js",
        "line": 168,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 2
      },
      {
        "callee": "onProgress",
        "file": "api/agents/orchestrator.js",
        "line": 170,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "onProgress",
        "file": "api/agents/orchestrator.js",
        "line": 175,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "onChunk",
        "file": "api/agents/orchestrator.js",
        "line": 179,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "generateHTMLStream",
        "file": "api/agents/orchestrator.js",
        "line": 191,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "onChunk",
        "file": "api/agents/orchestrator.js",
        "line": 197,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "onProgress",
        "file": "api/agents/orchestrator.js",
        "line": 200,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "onComplete",
        "file": "api/agents/orchestrator.js",
        "line": 211,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "onError",
        "file": "api/agents/orchestrator.js",
        "line": 224,
        "caller": null,
        "callerFile": "api/agents/orchestrator.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/generators/html-generator.js",
        "line": 9,
        "caller": null,
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "text.replace",
        "file": "api/generators/html-generator.js",
        "line": 18,
        "caller": "escapeHtml",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 2
      },
      {
        "callee": "Math.min",
        "file": "api/generators/html-generator.js",
        "line": 42,
        "caller": "generateHotspotHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 2
      },
      {
        "callee": "escapeHtml",
        "file": "api/generators/html-generator.js",
        "line": 47,
        "caller": "generateHotspotHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "escapeHtml",
        "file": "api/generators/html-generator.js",
        "line": 59,
        "caller": "generateHotspotHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "escapeHtml",
        "file": "api/generators/html-generator.js",
        "line": 60,
        "caller": "generateHotspotHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "escapeHtml",
        "file": "api/generators/html-generator.js",
        "line": 61,
        "caller": "generateHotspotHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "escapeHtml",
        "file": "api/generators/html-generator.js",
        "line": 65,
        "caller": "generateHotspotHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "type.replace",
        "file": "api/generators/html-generator.js",
        "line": 65,
        "caller": "generateHotspotHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 2
      },
      {
        "callee": "escapeHtml",
        "file": "api/generators/html-generator.js",
        "line": 66,
        "caller": "generateHotspotHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "escapeHtml",
        "file": "api/generators/html-generator.js",
        "line": 67,
        "caller": "generateHotspotHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "escapeHtml",
        "file": "api/generators/html-generator.js",
        "line": 68,
        "caller": "generateHotspotHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "escapeHtml",
        "file": "api/generators/html-generator.js",
        "line": 91,
        "caller": "generateNoiseRegionHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "escapeHtml",
        "file": "api/generators/html-generator.js",
        "line": 92,
        "caller": "generateNoiseRegionHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "escapeHtml",
        "file": "api/generators/html-generator.js",
        "line": 94,
        "caller": "generateNoiseRegionHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "escapeHtml",
        "file": "api/generators/html-generator.js",
        "line": 110,
        "caller": "generateContextBar",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "generateBaseCSS",
        "file": "api/generators/html-generator.js",
        "line": 302,
        "caller": "generateHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "generateContextBar",
        "file": "api/generators/html-generator.js",
        "line": 303,
        "caller": "generateHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 2
      },
      {
        "callee": "hotspots.map",
        "file": "api/generators/html-generator.js",
        "line": 304,
        "caller": "generateHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "generateHotspotHTML",
        "file": "api/generators/html-generator.js",
        "line": 304,
        "caller": "generateHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 2
      },
      {
        "callee": "noiseRegions.map",
        "file": "api/generators/html-generator.js",
        "line": 305,
        "caller": "generateHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "generateNoiseRegionHTML",
        "file": "api/generators/html-generator.js",
        "line": 305,
        "caller": "generateHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "generateResearchPanelCSS",
        "file": "api/generators/html-generator.js",
        "line": 306,
        "caller": "generateHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 0
      },
      {
        "callee": "generateClientScript",
        "file": "api/generators/html-generator.js",
        "line": 307,
        "caller": "generateHTML",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 0
      },
      {
        "callee": "generateBaseCSS",
        "file": "api/generators/html-generator.js",
        "line": 357,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "generateContextBar",
        "file": "api/generators/html-generator.js",
        "line": 358,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 2
      },
      {
        "callee": "generateResearchPanelCSS",
        "file": "api/generators/html-generator.js",
        "line": 359,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 0
      },
      {
        "callee": "onChunk",
        "file": "api/generators/html-generator.js",
        "line": 370,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "onProgress",
        "file": "api/generators/html-generator.js",
        "line": 387,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "onChunk",
        "file": "api/generators/html-generator.js",
        "line": 391,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "generateNoiseRegionHTML",
        "file": "api/generators/html-generator.js",
        "line": 391,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "delay",
        "file": "api/generators/html-generator.js",
        "line": 392,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "onProgress",
        "file": "api/generators/html-generator.js",
        "line": 395,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "onChunk",
        "file": "api/generators/html-generator.js",
        "line": 400,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "generateHotspotHTML",
        "file": "api/generators/html-generator.js",
        "line": 400,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 2
      },
      {
        "callee": "onProgress",
        "file": "api/generators/html-generator.js",
        "line": 401,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "delay",
        "file": "api/generators/html-generator.js",
        "line": 402,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "generateClientScript",
        "file": "api/generators/html-generator.js",
        "line": 406,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 0
      },
      {
        "callee": "onChunk",
        "file": "api/generators/html-generator.js",
        "line": 407,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "onProgress",
        "file": "api/generators/html-generator.js",
        "line": 414,
        "caller": "generateHTMLStream",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 1
      },
      {
        "callee": "setTimeout",
        "file": "api/generators/html-generator.js",
        "line": 421,
        "caller": "delay",
        "callerFile": "api/generators/html-generator.js",
        "arguments": 2
      },
      {
        "callee": "hexColor.replace",
        "file": "api/generators/style-manager.js",
        "line": 84,
        "caller": "analyzeColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "parseInt",
        "file": "api/generators/style-manager.js",
        "line": 85,
        "caller": "analyzeColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "hex.substr",
        "file": "api/generators/style-manager.js",
        "line": 85,
        "caller": "analyzeColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "parseInt",
        "file": "api/generators/style-manager.js",
        "line": 86,
        "caller": "analyzeColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "hex.substr",
        "file": "api/generators/style-manager.js",
        "line": 86,
        "caller": "analyzeColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "parseInt",
        "file": "api/generators/style-manager.js",
        "line": 87,
        "caller": "analyzeColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "hex.substr",
        "file": "api/generators/style-manager.js",
        "line": 87,
        "caller": "analyzeColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "Math.max",
        "file": "api/generators/style-manager.js",
        "line": 93,
        "caller": "analyzeColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 3
      },
      {
        "callee": "Math.min",
        "file": "api/generators/style-manager.js",
        "line": 94,
        "caller": "analyzeColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 3
      },
      {
        "callee": "hexColor.replace",
        "file": "api/generators/style-manager.js",
        "line": 114,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "parseInt",
        "file": "api/generators/style-manager.js",
        "line": 115,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "hex.substr",
        "file": "api/generators/style-manager.js",
        "line": 115,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "parseInt",
        "file": "api/generators/style-manager.js",
        "line": 116,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "hex.substr",
        "file": "api/generators/style-manager.js",
        "line": 116,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "parseInt",
        "file": "api/generators/style-manager.js",
        "line": 117,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "hex.substr",
        "file": "api/generators/style-manager.js",
        "line": 117,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "Math.round",
        "file": "api/generators/style-manager.js",
        "line": 121,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 1
      },
      {
        "callee": "Math.round",
        "file": "api/generators/style-manager.js",
        "line": 123,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 1
      },
      {
        "callee": "Math.min",
        "file": "api/generators/style-manager.js",
        "line": 126,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "Math.max",
        "file": "api/generators/style-manager.js",
        "line": 126,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "adjust",
        "file": "api/generators/style-manager.js",
        "line": 126,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 1
      },
      {
        "callee": "Math.min",
        "file": "api/generators/style-manager.js",
        "line": 127,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "Math.max",
        "file": "api/generators/style-manager.js",
        "line": 127,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "adjust",
        "file": "api/generators/style-manager.js",
        "line": 127,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 1
      },
      {
        "callee": "Math.min",
        "file": "api/generators/style-manager.js",
        "line": 128,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "Math.max",
        "file": "api/generators/style-manager.js",
        "line": 128,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "adjust",
        "file": "api/generators/style-manager.js",
        "line": 128,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 1
      },
      {
        "callee": "nr.toString",
        "file": "api/generators/style-manager.js",
        "line": 130,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 1
      },
      {
        "callee": "ng.toString",
        "file": "api/generators/style-manager.js",
        "line": 130,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 1
      },
      {
        "callee": "nb.toString",
        "file": "api/generators/style-manager.js",
        "line": 130,
        "caller": "adjustColor",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 1
      },
      {
        "callee": "hexColor.replace",
        "file": "api/generators/style-manager.js",
        "line": 140,
        "caller": "hexToRgba",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "parseInt",
        "file": "api/generators/style-manager.js",
        "line": 141,
        "caller": "hexToRgba",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "hex.substr",
        "file": "api/generators/style-manager.js",
        "line": 141,
        "caller": "hexToRgba",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "parseInt",
        "file": "api/generators/style-manager.js",
        "line": 142,
        "caller": "hexToRgba",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "hex.substr",
        "file": "api/generators/style-manager.js",
        "line": 142,
        "caller": "hexToRgba",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "parseInt",
        "file": "api/generators/style-manager.js",
        "line": 143,
        "caller": "hexToRgba",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "hex.substr",
        "file": "api/generators/style-manager.js",
        "line": 143,
        "caller": "hexToRgba",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "colors.find",
        "file": "api/generators/style-manager.js",
        "line": 158,
        "caller": "createStyleManifest",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 1
      },
      {
        "callee": "colors.reduce",
        "file": "api/generators/style-manager.js",
        "line": 161,
        "caller": "createStyleManifest",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "colors.reduce",
        "file": "api/generators/style-manager.js",
        "line": 165,
        "caller": "createStyleManifest",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "adjustColor",
        "file": "api/generators/style-manager.js",
        "line": 172,
        "caller": "createStyleManifest",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "adjustColor",
        "file": "api/generators/style-manager.js",
        "line": 173,
        "caller": "createStyleManifest",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "adjustColor",
        "file": "api/generators/style-manager.js",
        "line": 176,
        "caller": "createStyleManifest",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "adjustColor",
        "file": "api/generators/style-manager.js",
        "line": 177,
        "caller": "createStyleManifest",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "adjustColor",
        "file": "api/generators/style-manager.js",
        "line": 180,
        "caller": "createStyleManifest",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "hexToRgba",
        "file": "api/generators/style-manager.js",
        "line": 181,
        "caller": "createStyleManifest",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 2
      },
      {
        "callee": "colors.map",
        "file": "api/generators/style-manager.js",
        "line": 217,
        "caller": "createStyleManifest",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 1
      },
      {
        "callee": "Object.entries",
        "file": "api/generators/style-manager.js",
        "line": 232,
        "caller": "generateCSSString",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 1
      },
      {
        "callee": "generateCSSString",
        "file": "api/generators/style-manager.js",
        "line": 245,
        "caller": "generateBaseCSS",
        "callerFile": "api/generators/style-manager.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/generators/vision-analyzer.js",
        "line": 14,
        "caller": null,
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "getVisionAdapter",
        "file": "api/generators/vision-analyzer.js",
        "line": 131,
        "caller": "analyzeScreenshot",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "adapter.analyzeImage",
        "file": "api/generators/vision-analyzer.js",
        "line": 133,
        "caller": "analyzeScreenshot",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "parseAnalysisFromText",
        "file": "api/generators/vision-analyzer.js",
        "line": 141,
        "caller": "analyzeScreenshot",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "normalizeAnalysis",
        "file": "api/generators/vision-analyzer.js",
        "line": 143,
        "caller": "analyzeScreenshot",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "text.match",
        "file": "api/generators/vision-analyzer.js",
        "line": 154,
        "caller": "parseAnalysisFromText",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "JSON.parse",
        "file": "api/generators/vision-analyzer.js",
        "line": 156,
        "caller": "parseAnalysisFromText",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "JSON.parse",
        "file": "api/generators/vision-analyzer.js",
        "line": 160,
        "caller": "parseAnalysisFromText",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "text.trim",
        "file": "api/generators/vision-analyzer.js",
        "line": 160,
        "caller": "parseAnalysisFromText",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 0
      },
      {
        "callee": "console.error",
        "file": "api/generators/vision-analyzer.js",
        "line": 162,
        "caller": "parseAnalysisFromText",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 2
      },
      {
        "callee": "Array.isArray",
        "file": "api/generators/vision-analyzer.js",
        "line": 191,
        "caller": "normalizeAnalysis",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "analysis.hotspots.map",
        "file": "api/generators/vision-analyzer.js",
        "line": 192,
        "caller": "normalizeAnalysis",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "normalizeBounds",
        "file": "api/generators/vision-analyzer.js",
        "line": 194,
        "caller": "normalizeAnalysis",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "Array.isArray",
        "file": "api/generators/vision-analyzer.js",
        "line": 205,
        "caller": "normalizeAnalysis",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "noiseArr.map",
        "file": "api/generators/vision-analyzer.js",
        "line": 207,
        "caller": "normalizeAnalysis",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "normalizeBounds",
        "file": "api/generators/vision-analyzer.js",
        "line": 209,
        "caller": "normalizeAnalysis",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "normalized.hotspots.sort",
        "file": "api/generators/vision-analyzer.js",
        "line": 216,
        "caller": "normalizeAnalysis",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "clamp",
        "file": "api/generators/vision-analyzer.js",
        "line": 234,
        "caller": "normalizeBounds",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 3
      },
      {
        "callee": "clamp",
        "file": "api/generators/vision-analyzer.js",
        "line": 235,
        "caller": "normalizeBounds",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 3
      },
      {
        "callee": "clamp",
        "file": "api/generators/vision-analyzer.js",
        "line": 236,
        "caller": "normalizeBounds",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 3
      },
      {
        "callee": "clamp",
        "file": "api/generators/vision-analyzer.js",
        "line": 237,
        "caller": "normalizeBounds",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 3
      },
      {
        "callee": "Math.min",
        "file": "api/generators/vision-analyzer.js",
        "line": 245,
        "caller": "clamp",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 2
      },
      {
        "callee": "Math.max",
        "file": "api/generators/vision-analyzer.js",
        "line": 245,
        "caller": "clamp",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 2
      },
      {
        "callee": "analysis.hotspots.filter",
        "file": "api/generators/vision-analyzer.js",
        "line": 254,
        "caller": "getInvestigatableHotspots",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 1
      },
      {
        "callee": "analysis.hotspots.slice",
        "file": "api/generators/vision-analyzer.js",
        "line": 264,
        "caller": "getTopHotspots",
        "callerFile": "api/generators/vision-analyzer.js",
        "arguments": 2
      },
      {
        "callee": "require",
        "file": "api/index.js",
        "line": 1,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/index.js",
        "line": 2,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/index.js",
        "line": 3,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/index.js",
        "line": 4,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/index.js",
        "line": 5,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/index.js",
        "line": 6,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/index.js",
        "line": 7,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "express",
        "file": "api/index.js",
        "line": 9,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "require",
        "file": "api/index.js",
        "line": 41,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "getRedis",
        "file": "api/index.js",
        "line": 55,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "redis.setex",
        "file": "api/index.js",
        "line": 57,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 3
      },
      {
        "callee": "JSON.stringify",
        "file": "api/index.js",
        "line": 57,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "jobStore.set",
        "file": "api/index.js",
        "line": 59,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "getRedis",
        "file": "api/index.js",
        "line": 64,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "redis.get",
        "file": "api/index.js",
        "line": 66,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "JSON.parse",
        "file": "api/index.js",
        "line": 67,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "jobStore.get",
        "file": "api/index.js",
        "line": 69,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "this.getJob",
        "file": "api/index.js",
        "line": 74,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "this.setJob",
        "file": "api/index.js",
        "line": 77,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "multer",
        "file": "api/index.js",
        "line": 85,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "multer.memoryStorage",
        "file": "api/index.js",
        "line": 86,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "file.mimetype.startsWith",
        "file": "api/index.js",
        "line": 91,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "cb",
        "file": "api/index.js",
        "line": 92,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "cb",
        "file": "api/index.js",
        "line": 94,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "app.use",
        "file": "api/index.js",
        "line": 110,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "express.json",
        "file": "api/index.js",
        "line": 110,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "app.use",
        "file": "api/index.js",
        "line": 111,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "express.urlencoded",
        "file": "api/index.js",
        "line": 111,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "app.use",
        "file": "api/index.js",
        "line": 114,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "express.static",
        "file": "api/index.js",
        "line": 114,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "path.join",
        "file": "api/index.js",
        "line": 114,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 3
      },
      {
        "callee": "app.get",
        "file": "api/index.js",
        "line": 117,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.sendFile",
        "file": "api/index.js",
        "line": 118,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "path.join",
        "file": "api/index.js",
        "line": 118,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 4
      },
      {
        "callee": "app.get",
        "file": "api/index.js",
        "line": 122,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.sendFile",
        "file": "api/index.js",
        "line": 123,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "path.join",
        "file": "api/index.js",
        "line": 123,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 4
      },
      {
        "callee": "app.get",
        "file": "api/index.js",
        "line": 128,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.json",
        "file": "api/index.js",
        "line": 129,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/index.js",
        "line": 135,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "app.get",
        "file": "api/index.js",
        "line": 147,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.sendFile",
        "file": "api/index.js",
        "line": 148,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "path.join",
        "file": "api/index.js",
        "line": 148,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 4
      },
      {
        "callee": "app.post",
        "file": "api/index.js",
        "line": 152,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 3
      },
      {
        "callee": "upload.single",
        "file": "api/index.js",
        "line": 152,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "api/index.js",
        "line": 153,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "req.is",
        "file": "api/index.js",
        "line": 159,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 163,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "base64Data.startsWith",
        "file": "api/index.js",
        "line": 168,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "base64Data.match",
        "file": "api/index.js",
        "line": 169,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 174,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 186,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "validTypes.includes",
        "file": "api/index.js",
        "line": 194,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 195,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "crypto.randomUUID",
        "file": "api/index.js",
        "line": 202,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "storage.setJob",
        "file": "api/index.js",
        "line": 219,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 3
      },
      {
        "callee": "console.log",
        "file": "api/index.js",
        "line": 222,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.json",
        "file": "api/index.js",
        "line": 223,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "console.error",
        "file": "api/index.js",
        "line": 233,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 234,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "app.get",
        "file": "api/index.js",
        "line": 242,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "console.log",
        "file": "api/index.js",
        "line": 244,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.setHeader",
        "file": "api/index.js",
        "line": 247,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.setHeader",
        "file": "api/index.js",
        "line": 248,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.setHeader",
        "file": "api/index.js",
        "line": 249,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.setHeader",
        "file": "api/index.js",
        "line": 250,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.setHeader",
        "file": "api/index.js",
        "line": 251,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.setHeader",
        "file": "api/index.js",
        "line": 252,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.flushHeaders",
        "file": "api/index.js",
        "line": 253,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "res.write",
        "file": "api/index.js",
        "line": 256,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.write",
        "file": "api/index.js",
        "line": 257,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "JSON.stringify",
        "file": "api/index.js",
        "line": 257,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.flush",
        "file": "api/index.js",
        "line": 258,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "storage.getJob",
        "file": "api/index.js",
        "line": 262,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 265,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.end",
        "file": "api/index.js",
        "line": 266,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 272,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 273,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 274,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.end",
        "file": "api/index.js",
        "line": 278,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 284,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.end",
        "file": "api/index.js",
        "line": 285,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 290,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "createOrchestrator",
        "file": "api/index.js",
        "line": 297,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "orchestrator.processStream",
        "file": "api/index.js",
        "line": 302,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 306,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "storage.updateJob",
        "file": "api/index.js",
        "line": 312,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 320,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 322,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "storage.updateJob",
        "file": "api/index.js",
        "line": 327,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 340,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "storage.updateJob",
        "file": "api/index.js",
        "line": 347,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 351,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "console.error",
        "file": "api/index.js",
        "line": 356,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 357,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.end",
        "file": "api/index.js",
        "line": 359,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "app.post",
        "file": "api/index.js",
        "line": 364,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.json",
        "file": "api/index.js",
        "line": 370,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "app.post",
        "file": "api/index.js",
        "line": 416,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 3
      },
      {
        "callee": "upload.single",
        "file": "api/index.js",
        "line": 416,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "req.is",
        "file": "api/index.js",
        "line": 423,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 428,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "base64Data.startsWith",
        "file": "api/index.js",
        "line": 435,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "base64Data.match",
        "file": "api/index.js",
        "line": 436,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 441,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 450,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "Buffer.from",
        "file": "api/index.js",
        "line": 455,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 457,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "detectMediaType",
        "file": "api/index.js",
        "line": 461,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 466,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 471,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 483,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "validTypes.includes",
        "file": "api/index.js",
        "line": 491,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 492,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "Buffer.from",
        "file": "api/index.js",
        "line": 501,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "console.log",
        "file": "api/index.js",
        "line": 502,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "crypto.randomUUID",
        "file": "api/index.js",
        "line": 505,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "storage.setJob",
        "file": "api/index.js",
        "line": 525,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 3
      },
      {
        "callee": "res.json",
        "file": "api/index.js",
        "line": 528,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "console.error",
        "file": "api/index.js",
        "line": 539,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 540,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "api/index.js",
        "line": 591,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "sharp",
        "file": "api/index.js",
        "line": 593,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "sharpInstance.metadata",
        "file": "api/index.js",
        "line": 594,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "Math.min",
        "file": "api/index.js",
        "line": 602,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "Math.round",
        "file": "api/index.js",
        "line": 603,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "Math.round",
        "file": "api/index.js",
        "line": 604,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "Math.round",
        "file": "api/index.js",
        "line": 616,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "Math.round",
        "file": "api/index.js",
        "line": 617,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "sharp",
        "file": "api/index.js",
        "line": 620,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "sharpInstance.webp",
        "file": "api/index.js",
        "line": 634,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "sharpInstance.jpeg",
        "file": "api/index.js",
        "line": 640,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "sharpInstance.webp",
        "file": "api/index.js",
        "line": 649,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "sharpInstance.jpeg",
        "file": "api/index.js",
        "line": 654,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "sharpInstance.jpeg",
        "file": "api/index.js",
        "line": 661,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "api/index.js",
        "line": 668,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "api/index.js",
        "line": 683,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "sharp",
        "file": "api/index.js",
        "line": 684,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "api/index.js",
        "line": 689,
        "caller": "compressImageForAPI",
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "app.get",
        "file": "api/index.js",
        "line": 704,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.setHeader",
        "file": "api/index.js",
        "line": 708,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.setHeader",
        "file": "api/index.js",
        "line": 709,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.setHeader",
        "file": "api/index.js",
        "line": 710,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.setHeader",
        "file": "api/index.js",
        "line": 711,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.setHeader",
        "file": "api/index.js",
        "line": 712,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.setHeader",
        "file": "api/index.js",
        "line": 713,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.flushHeaders",
        "file": "api/index.js",
        "line": 714,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "res.write",
        "file": "api/index.js",
        "line": 718,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.write",
        "file": "api/index.js",
        "line": 719,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "JSON.stringify",
        "file": "api/index.js",
        "line": 719,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.flush",
        "file": "api/index.js",
        "line": 721,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "storage.getJob",
        "file": "api/index.js",
        "line": 730,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 733,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.end",
        "file": "api/index.js",
        "line": 734,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "console.log",
        "file": "api/index.js",
        "line": 740,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "Buffer.from",
        "file": "api/index.js",
        "line": 742,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "compressImageForAPI",
        "file": "api/index.js",
        "line": 743,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "compressionResult.buffer.toString",
        "file": "api/index.js",
        "line": 746,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "api/index.js",
        "line": 748,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "storage.updateJob",
        "file": "api/index.js",
        "line": 750,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "console.error",
        "file": "api/index.js",
        "line": 757,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 758,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "storage.updateJob",
        "file": "api/index.js",
        "line": 759,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.end",
        "file": "api/index.js",
        "line": 763,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 775,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 782,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.end",
        "file": "api/index.js",
        "line": 786,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 792,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 799,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.end",
        "file": "api/index.js",
        "line": 800,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 805,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "storage.updateJob",
        "file": "api/index.js",
        "line": 816,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 822,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "getAnthropicClient",
        "file": "api/index.js",
        "line": 829,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 832,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "storage.updateJob",
        "file": "api/index.js",
        "line": 838,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "buildAnalysisPrompt",
        "file": "api/index.js",
        "line": 845,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "anthropic.messages.stream",
        "file": "api/index.js",
        "line": 851,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "stream.on",
        "file": "api/index.js",
        "line": 876,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 880,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "storage.updateJob",
        "file": "api/index.js",
        "line": 885,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 893,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "stream.finalMessage",
        "file": "api/index.js",
        "line": 897,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "storage.updateJob",
        "file": "api/index.js",
        "line": 900,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 916,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "console.error",
        "file": "api/index.js",
        "line": 923,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "storage.updateJob",
        "file": "api/index.js",
        "line": 926,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "sendEvent",
        "file": "api/index.js",
        "line": 933,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.end",
        "file": "api/index.js",
        "line": 937,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "app.get",
        "file": "api/index.js",
        "line": 944,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "storage.getJob",
        "file": "api/index.js",
        "line": 946,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 949,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.json",
        "file": "api/index.js",
        "line": 977,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "app.get",
        "file": "api/index.js",
        "line": 981,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "storage.getJob",
        "file": "api/index.js",
        "line": 983,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 986,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.json",
        "file": "api/index.js",
        "line": 993,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "app.post",
        "file": "api/index.js",
        "line": 1001,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 3
      },
      {
        "callee": "upload.single",
        "file": "api/index.js",
        "line": 1001,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 1004,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "getAnthropicClient",
        "file": "api/index.js",
        "line": 1007,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "buildAnalysisPrompt",
        "file": "api/index.js",
        "line": 1009,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "compressImageForAPI",
        "file": "api/index.js",
        "line": 1016,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "console.log",
        "file": "api/index.js",
        "line": 1020,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "console.error",
        "file": "api/index.js",
        "line": 1023,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 1026,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "imageBuffer.toString",
        "file": "api/index.js",
        "line": 1033,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "anthropic.messages.create",
        "file": "api/index.js",
        "line": 1035,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "response.content.filter",
        "file": "api/index.js",
        "line": 1059,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.json",
        "file": "api/index.js",
        "line": 1064,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "console.error",
        "file": "api/index.js",
        "line": 1071,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "error.message.includes",
        "file": "api/index.js",
        "line": 1073,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 1074,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 1080,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "app.get",
        "file": "api/index.js",
        "line": 1088,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "Array.from",
        "file": "api/index.js",
        "line": 1090,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "jobStore.values",
        "file": "api/index.js",
        "line": 1090,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 0
      },
      {
        "callee": "res.json",
        "file": "api/index.js",
        "line": 1097,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "app.use",
        "file": "api/index.js",
        "line": 1101,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 1104,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.status",
        "file": "api/index.js",
        "line": 1111,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "next",
        "file": "api/index.js",
        "line": 1116,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "app.get",
        "file": "api/index.js",
        "line": 1122,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "storage.getJob",
        "file": "api/index.js",
        "line": 1127,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.redirect",
        "file": "api/index.js",
        "line": 1130,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "res.sendFile",
        "file": "api/index.js",
        "line": 1136,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "path.join",
        "file": "api/index.js",
        "line": 1136,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 4
      },
      {
        "callee": "app.get",
        "file": "api/index.js",
        "line": 1140,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "res.sendFile",
        "file": "api/index.js",
        "line": 1141,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "path.join",
        "file": "api/index.js",
        "line": 1141,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 4
      },
      {
        "callee": "app.listen",
        "file": "api/index.js",
        "line": 1147,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 2
      },
      {
        "callee": "console.log",
        "file": "api/index.js",
        "line": 1148,
        "caller": null,
        "callerFile": "api/index.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/llm/claude.js",
        "line": 8,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/llm/claude.js",
        "line": 9,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 1
      },
      {
        "callee": "JSON.stringify",
        "file": "api/llm/claude.js",
        "line": 60,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 3
      },
      {
        "callee": "response.content.filter",
        "file": "api/llm/claude.js",
        "line": 73,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 1
      },
      {
        "callee": "text.match",
        "file": "api/llm/claude.js",
        "line": 82,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 1
      },
      {
        "callee": "JSON.parse",
        "file": "api/llm/claude.js",
        "line": 84,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 1
      },
      {
        "callee": "jsonStr.trim",
        "file": "api/llm/claude.js",
        "line": 84,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 0
      },
      {
        "callee": "console.warn",
        "file": "api/llm/claude.js",
        "line": 86,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 2
      },
      {
        "callee": "JSON.stringify",
        "file": "api/llm/claude.js",
        "line": 106,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 3
      },
      {
        "callee": "response.content.filter",
        "file": "api/llm/claude.js",
        "line": 123,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 1
      },
      {
        "callee": "JSON.stringify",
        "file": "api/llm/claude.js",
        "line": 144,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 3
      },
      {
        "callee": "stream.on",
        "file": "api/llm/claude.js",
        "line": 162,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 2
      },
      {
        "callee": "onToken",
        "file": "api/llm/claude.js",
        "line": 164,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 1
      },
      {
        "callee": "stream.finalMessage",
        "file": "api/llm/claude.js",
        "line": 167,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 0
      },
      {
        "callee": "onComplete",
        "file": "api/llm/claude.js",
        "line": 170,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 2
      },
      {
        "callee": "onError",
        "file": "api/llm/claude.js",
        "line": 174,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 1
      },
      {
        "callee": "stream.on",
        "file": "api/llm/claude.js",
        "line": 214,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 2
      },
      {
        "callee": "onToken",
        "file": "api/llm/claude.js",
        "line": 216,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 1
      },
      {
        "callee": "stream.finalMessage",
        "file": "api/llm/claude.js",
        "line": 219,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 0
      },
      {
        "callee": "onComplete",
        "file": "api/llm/claude.js",
        "line": 222,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 2
      },
      {
        "callee": "onError",
        "file": "api/llm/claude.js",
        "line": 226,
        "caller": null,
        "callerFile": "api/llm/claude.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/llm/index.js",
        "line": 8,
        "caller": null,
        "callerFile": "api/llm/index.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "api/llm/index.js",
        "line": 9,
        "caller": null,
        "callerFile": "api/llm/index.js",
        "arguments": 1
      },
      {
        "callee": "JSON.stringify",
        "file": "api/llm/index.js",
        "line": 29,
        "caller": "getAdapter",
        "callerFile": "api/llm/index.js",
        "arguments": 1
      },
      {
        "callee": "instances.has",
        "file": "api/llm/index.js",
        "line": 31,
        "caller": "getAdapter",
        "callerFile": "api/llm/index.js",
        "arguments": 1
      },
      {
        "callee": "instances.get",
        "file": "api/llm/index.js",
        "line": 32,
        "caller": "getAdapter",
        "callerFile": "api/llm/index.js",
        "arguments": 1
      },
      {
        "callee": "Object.keys",
        "file": "api/llm/index.js",
        "line": 37,
        "caller": "getAdapter",
        "callerFile": "api/llm/index.js",
        "arguments": 1
      },
      {
        "callee": "instances.set",
        "file": "api/llm/index.js",
        "line": 41,
        "caller": "getAdapter",
        "callerFile": "api/llm/index.js",
        "arguments": 2
      },
      {
        "callee": "getAdapter",
        "file": "api/llm/index.js",
        "line": 53,
        "caller": "getDefaultAdapter",
        "callerFile": "api/llm/index.js",
        "arguments": 2
      },
      {
        "callee": "getAdapter",
        "file": "api/llm/index.js",
        "line": 64,
        "caller": "getVisionAdapter",
        "callerFile": "api/llm/index.js",
        "arguments": 2
      },
      {
        "callee": "adapter.supportsVision",
        "file": "api/llm/index.js",
        "line": 66,
        "caller": "getVisionAdapter",
        "callerFile": "api/llm/index.js",
        "arguments": 0
      },
      {
        "callee": "getAdapter",
        "file": "api/llm/index.js",
        "line": 81,
        "caller": "getResearchAdapter",
        "callerFile": "api/llm/index.js",
        "arguments": 2
      },
      {
        "callee": "Object.keys",
        "file": "api/llm/index.js",
        "line": 101,
        "caller": "listProviders",
        "callerFile": "api/llm/index.js",
        "arguments": 1
      },
      {
        "callee": "instances.clear",
        "file": "api/llm/index.js",
        "line": 108,
        "caller": "clearCache",
        "callerFile": "api/llm/index.js",
        "arguments": 0
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 4,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 5,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 6,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 7,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 11,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 12,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 13,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 14,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 15,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 16,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 17,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 18,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 19,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/canvas.html:script:0",
        "line": 20,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "Object.entries",
        "file": "public/canvas.html:script:0",
        "line": 28,
        "caller": "showState",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "el.classList.add",
        "file": "public/canvas.html:script:0",
        "line": 30,
        "caller": "showState",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "el.classList.remove",
        "file": "public/canvas.html:script:0",
        "line": 31,
        "caller": "showState",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "el.classList.remove",
        "file": "public/canvas.html:script:0",
        "line": 33,
        "caller": "showState",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "el.classList.add",
        "file": "public/canvas.html:script:0",
        "line": 35,
        "caller": "showState",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "params.get",
        "file": "public/canvas.html:script:0",
        "line": 44,
        "caller": "checkUrlForJob",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "showState",
        "file": "public/canvas.html:script:0",
        "line": 48,
        "caller": "checkUrlForJob",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "startStream",
        "file": "public/canvas.html:script:0",
        "line": 50,
        "caller": "checkUrlForJob",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "file.type.startsWith",
        "file": "public/canvas.html:script:0",
        "line": 58,
        "caller": "handleFile",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/canvas.html:script:0",
        "line": 59,
        "caller": "handleFile",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/canvas.html:script:0",
        "line": 64,
        "caller": "handleFile",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "uploadZone.classList.add",
        "file": "public/canvas.html:script:0",
        "line": 73,
        "caller": "handleFile",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "generateBtn.classList.add",
        "file": "public/canvas.html:script:0",
        "line": 74,
        "caller": "handleFile",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "reader.readAsDataURL",
        "file": "public/canvas.html:script:0",
        "line": 76,
        "caller": "handleFile",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "showState",
        "file": "public/canvas.html:script:0",
        "line": 85,
        "caller": "uploadAndGenerate",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "formData.append",
        "file": "public/canvas.html:script:0",
        "line": 92,
        "caller": "uploadAndGenerate",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "fetch",
        "file": "public/canvas.html:script:0",
        "line": 94,
        "caller": "uploadAndGenerate",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "response.json",
        "file": "public/canvas.html:script:0",
        "line": 99,
        "caller": "uploadAndGenerate",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 0
      },
      {
        "callee": "window.history.pushState",
        "file": "public/canvas.html:script:0",
        "line": 107,
        "caller": "uploadAndGenerate",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 3
      },
      {
        "callee": "startStream",
        "file": "public/canvas.html:script:0",
        "line": 113,
        "caller": "uploadAndGenerate",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/canvas.html:script:0",
        "line": 116,
        "caller": "uploadAndGenerate",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "eventSource.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 126,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "JSON.parse",
        "file": "public/canvas.html:script:0",
        "line": 127,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "eventSource.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 132,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "JSON.parse",
        "file": "public/canvas.html:script:0",
        "line": 133,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "public/canvas.html:script:0",
        "line": 134,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "eventSource.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 139,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "JSON.parse",
        "file": "public/canvas.html:script:0",
        "line": 140,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "eventSource.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 144,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "JSON.parse",
        "file": "public/canvas.html:script:0",
        "line": 145,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "public/canvas.html:script:0",
        "line": 146,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "setTimeout",
        "file": "public/canvas.html:script:0",
        "line": 152,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "renderCanvas",
        "file": "public/canvas.html:script:0",
        "line": 153,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "eventSource.close",
        "file": "public/canvas.html:script:0",
        "line": 156,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 0
      },
      {
        "callee": "eventSource.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 159,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "JSON.parse",
        "file": "public/canvas.html:script:0",
        "line": 161,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/canvas.html:script:0",
        "line": 162,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/canvas.html:script:0",
        "line": 164,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "eventSource.close",
        "file": "public/canvas.html:script:0",
        "line": 166,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 0
      },
      {
        "callee": "showError",
        "file": "public/canvas.html:script:0",
        "line": 170,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "eventSource.close",
        "file": "public/canvas.html:script:0",
        "line": 171,
        "caller": "startStream",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 0
      },
      {
        "callee": "showState",
        "file": "public/canvas.html:script:0",
        "line": 177,
        "caller": "renderCanvas",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "doc.open",
        "file": "public/canvas.html:script:0",
        "line": 181,
        "caller": "renderCanvas",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 0
      },
      {
        "callee": "doc.write",
        "file": "public/canvas.html:script:0",
        "line": 182,
        "caller": "renderCanvas",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "doc.close",
        "file": "public/canvas.html:script:0",
        "line": 183,
        "caller": "renderCanvas",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 0
      },
      {
        "callee": "canvasFrame.contentWindow.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 186,
        "caller": "renderCanvas",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "console.log",
        "file": "public/canvas.html:script:0",
        "line": 187,
        "caller": "renderCanvas",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "showState",
        "file": "public/canvas.html:script:0",
        "line": 195,
        "caller": "showError",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "uploadZone.classList.remove",
        "file": "public/canvas.html:script:0",
        "line": 204,
        "caller": "reset",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "generateBtn.classList.remove",
        "file": "public/canvas.html:script:0",
        "line": 205,
        "caller": "reset",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "window.history.pushState",
        "file": "public/canvas.html:script:0",
        "line": 207,
        "caller": "reset",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 3
      },
      {
        "callee": "showState",
        "file": "public/canvas.html:script:0",
        "line": 208,
        "caller": "reset",
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "uploadZone.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 213,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "fileInput.click",
        "file": "public/canvas.html:script:0",
        "line": 213,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 0
      },
      {
        "callee": "uploadZone.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 215,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "e.preventDefault",
        "file": "public/canvas.html:script:0",
        "line": 216,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 0
      },
      {
        "callee": "uploadZone.classList.add",
        "file": "public/canvas.html:script:0",
        "line": 217,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "uploadZone.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 220,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "uploadZone.classList.remove",
        "file": "public/canvas.html:script:0",
        "line": 221,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "uploadZone.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 224,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "e.preventDefault",
        "file": "public/canvas.html:script:0",
        "line": 225,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 0
      },
      {
        "callee": "uploadZone.classList.remove",
        "file": "public/canvas.html:script:0",
        "line": 226,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "handleFile",
        "file": "public/canvas.html:script:0",
        "line": 228,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "fileInput.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 232,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "handleFile",
        "file": "public/canvas.html:script:0",
        "line": 234,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "generateBtn.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 238,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "retryBtn.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 239,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "document.addEventListener",
        "file": "public/canvas.html:script:0",
        "line": 242,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 2
      },
      {
        "callee": "item.type.startsWith",
        "file": "public/canvas.html:script:0",
        "line": 247,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "e.preventDefault",
        "file": "public/canvas.html:script:0",
        "line": 248,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 0
      },
      {
        "callee": "handleFile",
        "file": "public/canvas.html:script:0",
        "line": 249,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "item.getAsFile",
        "file": "public/canvas.html:script:0",
        "line": 249,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 0
      },
      {
        "callee": "checkUrlForJob",
        "file": "public/canvas.html:script:0",
        "line": 256,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 0
      },
      {
        "callee": "showState",
        "file": "public/canvas.html:script:0",
        "line": 257,
        "caller": null,
        "callerFile": "public/canvas.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 2,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 3,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 4,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 5,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 6,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 7,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 8,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 9,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 10,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 11,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 12,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 13,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 14,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 15,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 16,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 17,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 18,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/index.html:script:0",
        "line": 19,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "document.querySelector",
        "file": "public/index.html:script:0",
        "line": 20,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "uploadArea.addEventListener",
        "file": "public/index.html:script:0",
        "line": 25,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "e.preventDefault",
        "file": "public/index.html:script:0",
        "line": 26,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 0
      },
      {
        "callee": "uploadArea.classList.add",
        "file": "public/index.html:script:0",
        "line": 27,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "uploadArea.addEventListener",
        "file": "public/index.html:script:0",
        "line": 30,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "uploadArea.classList.remove",
        "file": "public/index.html:script:0",
        "line": 31,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "uploadArea.addEventListener",
        "file": "public/index.html:script:0",
        "line": 34,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "e.preventDefault",
        "file": "public/index.html:script:0",
        "line": 35,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 0
      },
      {
        "callee": "uploadArea.classList.remove",
        "file": "public/index.html:script:0",
        "line": 36,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "handleFile",
        "file": "public/index.html:script:0",
        "line": 38,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "uploadArea.addEventListener",
        "file": "public/index.html:script:0",
        "line": 42,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "fileInput.click",
        "file": "public/index.html:script:0",
        "line": 44,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 0
      },
      {
        "callee": "fileInput.addEventListener",
        "file": "public/index.html:script:0",
        "line": 48,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "handleFile",
        "file": "public/index.html:script:0",
        "line": 50,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "changeImageBtn.addEventListener",
        "file": "public/index.html:script:0",
        "line": 54,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "e.stopPropagation",
        "file": "public/index.html:script:0",
        "line": 55,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 0
      },
      {
        "callee": "fileInput.click",
        "file": "public/index.html:script:0",
        "line": 56,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 0
      },
      {
        "callee": "file.type.startsWith",
        "file": "public/index.html:script:0",
        "line": 60,
        "caller": "handleFile",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/index.html:script:0",
        "line": 61,
        "caller": "handleFile",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/index.html:script:0",
        "line": 66,
        "caller": "handleFile",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "hideError",
        "file": "public/index.html:script:0",
        "line": 71,
        "caller": "handleFile",
        "callerFile": "public/index.html:script:0",
        "arguments": 0
      },
      {
        "callee": "uploadContent.classList.add",
        "file": "public/index.html:script:0",
        "line": 76,
        "caller": "handleFile",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "previewContainer.classList.add",
        "file": "public/index.html:script:0",
        "line": 77,
        "caller": "handleFile",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "uploadArea.classList.add",
        "file": "public/index.html:script:0",
        "line": 78,
        "caller": "handleFile",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "reader.readAsDataURL",
        "file": "public/index.html:script:0",
        "line": 81,
        "caller": "handleFile",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "analyzeBtn.addEventListener",
        "file": "public/index.html:script:0",
        "line": 84,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "setLoading",
        "file": "public/index.html:script:0",
        "line": 87,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "hideError",
        "file": "public/index.html:script:0",
        "line": 88,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 0
      },
      {
        "callee": "formData.append",
        "file": "public/index.html:script:0",
        "line": 92,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "questionInput.value.trim",
        "file": "public/index.html:script:0",
        "line": 94,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 0
      },
      {
        "callee": "formData.append",
        "file": "public/index.html:script:0",
        "line": 96,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "fetch",
        "file": "public/index.html:script:0",
        "line": 99,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "response.json",
        "file": "public/index.html:script:0",
        "line": 104,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 0
      },
      {
        "callee": "setLoading",
        "file": "public/index.html:script:0",
        "line": 110,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "showSuccess",
        "file": "public/index.html:script:0",
        "line": 111,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "showError",
        "file": "public/index.html:script:0",
        "line": 114,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "setLoading",
        "file": "public/index.html:script:0",
        "line": 115,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "copyUrlBtn.addEventListener",
        "file": "public/index.html:script:0",
        "line": 119,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "navigator.clipboard.writeText",
        "file": "public/index.html:script:0",
        "line": 120,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "setTimeout",
        "file": "public/index.html:script:0",
        "line": 122,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "uploadAnotherLink.addEventListener",
        "file": "public/index.html:script:0",
        "line": 128,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "e.preventDefault",
        "file": "public/index.html:script:0",
        "line": 129,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 0
      },
      {
        "callee": "resetForm",
        "file": "public/index.html:script:0",
        "line": 130,
        "caller": null,
        "callerFile": "public/index.html:script:0",
        "arguments": 0
      },
      {
        "callee": "spinner.classList.toggle",
        "file": "public/index.html:script:0",
        "line": 135,
        "caller": "setLoading",
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "errorMessage.classList.add",
        "file": "public/index.html:script:0",
        "line": 141,
        "caller": "showError",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "errorMessage.classList.remove",
        "file": "public/index.html:script:0",
        "line": 145,
        "caller": "hideError",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "successSection.classList.add",
        "file": "public/index.html:script:0",
        "line": 155,
        "caller": "showSuccess",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "clearInterval",
        "file": "public/index.html:script:0",
        "line": 160,
        "caller": "showSuccess",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "setInterval",
        "file": "public/index.html:script:0",
        "line": 162,
        "caller": "showSuccess",
        "callerFile": "public/index.html:script:0",
        "arguments": 2
      },
      {
        "callee": "clearInterval",
        "file": "public/index.html:script:0",
        "line": 166,
        "caller": "showSuccess",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "clearInterval",
        "file": "public/index.html:script:0",
        "line": 174,
        "caller": "resetForm",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "uploadContent.classList.remove",
        "file": "public/index.html:script:0",
        "line": 180,
        "caller": "resetForm",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "previewContainer.classList.remove",
        "file": "public/index.html:script:0",
        "line": 181,
        "caller": "resetForm",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "uploadArea.classList.remove",
        "file": "public/index.html:script:0",
        "line": 182,
        "caller": "resetForm",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "setLoading",
        "file": "public/index.html:script:0",
        "line": 186,
        "caller": "resetForm",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "successSection.classList.remove",
        "file": "public/index.html:script:0",
        "line": 187,
        "caller": "resetForm",
        "callerFile": "public/index.html:script:0",
        "arguments": 1
      },
      {
        "callee": "hideError",
        "file": "public/index.html:script:0",
        "line": 189,
        "caller": "resetForm",
        "callerFile": "public/index.html:script:0",
        "arguments": 0
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 4,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 5,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 6,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 7,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 8,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 9,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 10,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 11,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 12,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 13,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 14,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 15,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 16,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 17,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 18,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 19,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 20,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 21,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 22,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/job.html:script:1",
        "line": 23,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/job.html:script:1",
        "line": 39,
        "caller": "init",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "imageToggle.addEventListener",
        "file": "public/job.html:script:1",
        "line": 43,
        "caller": "init",
        "callerFile": "public/job.html:script:1",
        "arguments": 2
      },
      {
        "callee": "imageSection.classList.toggle",
        "file": "public/job.html:script:1",
        "line": 44,
        "caller": "init",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "connectToStream",
        "file": "public/job.html:script:1",
        "line": 47,
        "caller": "init",
        "callerFile": "public/job.html:script:1",
        "arguments": 0
      },
      {
        "callee": "eventSource.addEventListener",
        "file": "public/job.html:script:1",
        "line": 53,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 2
      },
      {
        "callee": "JSON.parse",
        "file": "public/job.html:script:1",
        "line": 54,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "handleInit",
        "file": "public/job.html:script:1",
        "line": 55,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "eventSource.addEventListener",
        "file": "public/job.html:script:1",
        "line": 58,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 2
      },
      {
        "callee": "JSON.parse",
        "file": "public/job.html:script:1",
        "line": 59,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "updateProgress",
        "file": "public/job.html:script:1",
        "line": 60,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "eventSource.addEventListener",
        "file": "public/job.html:script:1",
        "line": 63,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 2
      },
      {
        "callee": "JSON.parse",
        "file": "public/job.html:script:1",
        "line": 64,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "appendToken",
        "file": "public/job.html:script:1",
        "line": 65,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "eventSource.addEventListener",
        "file": "public/job.html:script:1",
        "line": 68,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 2
      },
      {
        "callee": "JSON.parse",
        "file": "public/job.html:script:1",
        "line": 69,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "handleComplete",
        "file": "public/job.html:script:1",
        "line": 70,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "eventSource.close",
        "file": "public/job.html:script:1",
        "line": 71,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 0
      },
      {
        "callee": "eventSource.addEventListener",
        "file": "public/job.html:script:1",
        "line": 74,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 2
      },
      {
        "callee": "JSON.parse",
        "file": "public/job.html:script:1",
        "line": 76,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/job.html:script:1",
        "line": 77,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "fallbackToPoll",
        "file": "public/job.html:script:1",
        "line": 79,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 0
      },
      {
        "callee": "eventSource.close",
        "file": "public/job.html:script:1",
        "line": 81,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 0
      },
      {
        "callee": "fallbackToPoll",
        "file": "public/job.html:script:1",
        "line": 85,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 0
      },
      {
        "callee": "eventSource.close",
        "file": "public/job.html:script:1",
        "line": 86,
        "caller": "connectToStream",
        "callerFile": "public/job.html:script:1",
        "arguments": 0
      },
      {
        "callee": "updateProgress",
        "file": "public/job.html:script:1",
        "line": 102,
        "caller": "handleInit",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "message.toLowerCase",
        "file": "public/job.html:script:1",
        "line": 118,
        "caller": "updateProgress",
        "callerFile": "public/job.html:script:1",
        "arguments": 0
      },
      {
        "callee": "analysisSection.classList.contains",
        "file": "public/job.html:script:1",
        "line": 120,
        "caller": "updateProgress",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "imageSection.classList.add",
        "file": "public/job.html:script:1",
        "line": 121,
        "caller": "updateProgress",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "analysisSection.classList.add",
        "file": "public/job.html:script:1",
        "line": 122,
        "caller": "updateProgress",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "marked.parse",
        "file": "public/job.html:script:1",
        "line": 128,
        "caller": "appendToken",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "window.scrollTo",
        "file": "public/job.html:script:1",
        "line": 129,
        "caller": "appendToken",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "analysisSection.classList.contains",
        "file": "public/job.html:script:1",
        "line": 135,
        "caller": "handleComplete",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "imageSection.classList.add",
        "file": "public/job.html:script:1",
        "line": 136,
        "caller": "handleComplete",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "analysisSection.classList.add",
        "file": "public/job.html:script:1",
        "line": 137,
        "caller": "handleComplete",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "marked.parse",
        "file": "public/job.html:script:1",
        "line": 142,
        "caller": "handleComplete",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "typingCursor.classList.add",
        "file": "public/job.html:script:1",
        "line": 145,
        "caller": "handleComplete",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "progressSection.classList.add",
        "file": "public/job.html:script:1",
        "line": 146,
        "caller": "handleComplete",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "actionsSection.classList.add",
        "file": "public/job.html:script:1",
        "line": 147,
        "caller": "handleComplete",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "fetch",
        "file": "public/job.html:script:1",
        "line": 153,
        "caller": "fallbackToPoll",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "response.json",
        "file": "public/job.html:script:1",
        "line": 154,
        "caller": "fallbackToPoll",
        "callerFile": "public/job.html:script:1",
        "arguments": 0
      },
      {
        "callee": "showError",
        "file": "public/job.html:script:1",
        "line": 157,
        "caller": "fallbackToPoll",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "updateProgress",
        "file": "public/job.html:script:1",
        "line": 172,
        "caller": "fallbackToPoll",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "imageSection.classList.add",
        "file": "public/job.html:script:1",
        "line": 180,
        "caller": "fallbackToPoll",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "analysisSection.classList.add",
        "file": "public/job.html:script:1",
        "line": 181,
        "caller": "fallbackToPoll",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "marked.parse",
        "file": "public/job.html:script:1",
        "line": 182,
        "caller": "fallbackToPoll",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "handleComplete",
        "file": "public/job.html:script:1",
        "line": 183,
        "caller": "fallbackToPoll",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/job.html:script:1",
        "line": 185,
        "caller": "fallbackToPoll",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "setTimeout",
        "file": "public/job.html:script:1",
        "line": 187,
        "caller": "fallbackToPoll",
        "callerFile": "public/job.html:script:1",
        "arguments": 2
      },
      {
        "callee": "showError",
        "file": "public/job.html:script:1",
        "line": 190,
        "caller": "fallbackToPoll",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "errorSection.classList.add",
        "file": "public/job.html:script:1",
        "line": 197,
        "caller": "showError",
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "copyBtn.addEventListener",
        "file": "public/job.html:script:1",
        "line": 201,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 2
      },
      {
        "callee": "navigator.clipboard.writeText",
        "file": "public/job.html:script:1",
        "line": 203,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "setTimeout",
        "file": "public/job.html:script:1",
        "line": 205,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 2
      },
      {
        "callee": "shareBtn.addEventListener",
        "file": "public/job.html:script:1",
        "line": 209,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 2
      },
      {
        "callee": "navigator.share",
        "file": "public/job.html:script:1",
        "line": 212,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "navigator.clipboard.writeText",
        "file": "public/job.html:script:1",
        "line": 215,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "setTimeout",
        "file": "public/job.html:script:1",
        "line": 217,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 2
      },
      {
        "callee": "marked.setOptions",
        "file": "public/job.html:script:1",
        "line": 222,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 1
      },
      {
        "callee": "init",
        "file": "public/job.html:script:1",
        "line": 223,
        "caller": null,
        "callerFile": "public/job.html:script:1",
        "arguments": 0
      },
      {
        "callee": "document.getElementById",
        "file": "public/paste.html:script:1",
        "line": 4,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/paste.html:script:1",
        "line": 5,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/paste.html:script:1",
        "line": 6,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/paste.html:script:1",
        "line": 7,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/paste.html:script:1",
        "line": 11,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/paste.html:script:1",
        "line": 12,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/paste.html:script:1",
        "line": 13,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/paste.html:script:1",
        "line": 14,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/paste.html:script:1",
        "line": 15,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/paste.html:script:1",
        "line": 16,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/paste.html:script:1",
        "line": 17,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/paste.html:script:1",
        "line": 18,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "document.getElementById",
        "file": "public/paste.html:script:1",
        "line": 19,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "Object.values",
        "file": "public/paste.html:script:1",
        "line": 28,
        "caller": "showState",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "s.classList.remove",
        "file": "public/paste.html:script:1",
        "line": 28,
        "caller": "showState",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "navigator.clipboard.read",
        "file": "public/paste.html:script:1",
        "line": 35,
        "caller": "readClipboard",
        "callerFile": "public/paste.html:script:1",
        "arguments": 0
      },
      {
        "callee": "item.types.find",
        "file": "public/paste.html:script:1",
        "line": 38,
        "caller": "readClipboard",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "t.startsWith",
        "file": "public/paste.html:script:1",
        "line": 38,
        "caller": "readClipboard",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "item.getType",
        "file": "public/paste.html:script:1",
        "line": 40,
        "caller": "readClipboard",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "handleImage",
        "file": "public/paste.html:script:1",
        "line": 41,
        "caller": "readClipboard",
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "showError",
        "file": "public/paste.html:script:1",
        "line": 47,
        "caller": "readClipboard",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "console.error",
        "file": "public/paste.html:script:1",
        "line": 50,
        "caller": "readClipboard",
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "showError",
        "file": "public/paste.html:script:1",
        "line": 52,
        "caller": "readClipboard",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/paste.html:script:1",
        "line": 54,
        "caller": "readClipboard",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "URL.createObjectURL",
        "file": "public/paste.html:script:1",
        "line": 61,
        "caller": "handleImage",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "showState",
        "file": "public/paste.html:script:1",
        "line": 66,
        "caller": "handleImage",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "uploadAndStream",
        "file": "public/paste.html:script:1",
        "line": 69,
        "caller": "handleImage",
        "callerFile": "public/paste.html:script:1",
        "arguments": 0
      },
      {
        "callee": "formData.append",
        "file": "public/paste.html:script:1",
        "line": 76,
        "caller": "uploadAndStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "fetch",
        "file": "public/paste.html:script:1",
        "line": 78,
        "caller": "uploadAndStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "response.json",
        "file": "public/paste.html:script:1",
        "line": 83,
        "caller": "uploadAndStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 0
      },
      {
        "callee": "startStream",
        "file": "public/paste.html:script:1",
        "line": 90,
        "caller": "uploadAndStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/paste.html:script:1",
        "line": 93,
        "caller": "uploadAndStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "cursor.classList.remove",
        "file": "public/paste.html:script:1",
        "line": 102,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "resultsContent.classList.add",
        "file": "public/paste.html:script:1",
        "line": 103,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "fetch",
        "file": "public/paste.html:script:1",
        "line": 110,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "response.body.getReader",
        "file": "public/paste.html:script:1",
        "line": 116,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 0
      },
      {
        "callee": "reader.read",
        "file": "public/paste.html:script:1",
        "line": 121,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 0
      },
      {
        "callee": "decoder.decode",
        "file": "public/paste.html:script:1",
        "line": 125,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "buffer.split",
        "file": "public/paste.html:script:1",
        "line": 128,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "lines.pop",
        "file": "public/paste.html:script:1",
        "line": 129,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 0
      },
      {
        "callee": "line.startsWith",
        "file": "public/paste.html:script:1",
        "line": 132,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "JSON.parse",
        "file": "public/paste.html:script:1",
        "line": 134,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "line.slice",
        "file": "public/paste.html:script:1",
        "line": 134,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "showState",
        "file": "public/paste.html:script:1",
        "line": 138,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "renderMarkdown",
        "file": "public/paste.html:script:1",
        "line": 143,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 0
      },
      {
        "callee": "scrollToBottom",
        "file": "public/paste.html:script:1",
        "line": 144,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 0
      },
      {
        "callee": "cursor.classList.add",
        "file": "public/paste.html:script:1",
        "line": 149,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "resultsContent.classList.remove",
        "file": "public/paste.html:script:1",
        "line": 150,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/paste.html:script:1",
        "line": 156,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "cursor.classList.add",
        "file": "public/paste.html:script:1",
        "line": 159,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "cursor.classList.add",
        "file": "public/paste.html:script:1",
        "line": 171,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "resultsContent.classList.remove",
        "file": "public/paste.html:script:1",
        "line": 172,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "console.error",
        "file": "public/paste.html:script:1",
        "line": 175,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "cursor.classList.add",
        "file": "public/paste.html:script:1",
        "line": 177,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "showError",
        "file": "public/paste.html:script:1",
        "line": 180,
        "caller": "startStream",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "marked.parse",
        "file": "public/paste.html:script:1",
        "line": 186,
        "caller": "renderMarkdown",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "resultsContent.addEventListener",
        "file": "public/paste.html:script:1",
        "line": 198,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "scrollIndicator.classList.remove",
        "file": "public/paste.html:script:1",
        "line": 207,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "scrollIndicator.classList.add",
        "file": "public/paste.html:script:1",
        "line": 211,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "clearTimeout",
        "file": "public/paste.html:script:1",
        "line": 214,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "setTimeout",
        "file": "public/paste.html:script:1",
        "line": 215,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "scrollIndicator.classList.remove",
        "file": "public/paste.html:script:1",
        "line": 217,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "resultsContent.addEventListener",
        "file": "public/paste.html:script:1",
        "line": 224,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 3
      },
      {
        "callee": "scrollIndicator.classList.add",
        "file": "public/paste.html:script:1",
        "line": 227,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "showState",
        "file": "public/paste.html:script:1",
        "line": 233,
        "caller": "showError",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "URL.revokeObjectURL",
        "file": "public/paste.html:script:1",
        "line": 239,
        "caller": "reset",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "showState",
        "file": "public/paste.html:script:1",
        "line": 244,
        "caller": "reset",
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "pasteZone.addEventListener",
        "file": "public/paste.html:script:1",
        "line": 248,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "retryBtn.addEventListener",
        "file": "public/paste.html:script:1",
        "line": 249,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "resultsImage.addEventListener",
        "file": "public/paste.html:script:1",
        "line": 252,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "window.open",
        "file": "public/paste.html:script:1",
        "line": 255,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "document.addEventListener",
        "file": "public/paste.html:script:1",
        "line": 260,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "item.type.startsWith",
        "file": "public/paste.html:script:1",
        "line": 265,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 1
      },
      {
        "callee": "e.preventDefault",
        "file": "public/paste.html:script:1",
        "line": 266,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 0
      },
      {
        "callee": "item.getAsFile",
        "file": "public/paste.html:script:1",
        "line": 267,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 0
      },
      {
        "callee": "handleImage",
        "file": "public/paste.html:script:1",
        "line": 268,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 2
      },
      {
        "callee": "readClipboard",
        "file": "public/paste.html:script:1",
        "line": 279,
        "caller": null,
        "callerFile": "public/paste.html:script:1",
        "arguments": 0
      },
      {
        "callee": "require",
        "file": "scripts/generate-shortcut.js",
        "line": 1,
        "caller": null,
        "callerFile": "scripts/generate-shortcut.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "scripts/generate-shortcut.js",
        "line": 2,
        "caller": null,
        "callerFile": "scripts/generate-shortcut.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "scripts/generate-shortcut.js",
        "line": 3,
        "caller": null,
        "callerFile": "scripts/generate-shortcut.js",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "scripts/generate-shortcut.js",
        "line": 224,
        "caller": null,
        "callerFile": "scripts/generate-shortcut.js",
        "arguments": 1
      },
      {
        "callee": "generateSimpleShortcut",
        "file": "scripts/generate-shortcut.js",
        "line": 226,
        "caller": null,
        "callerFile": "scripts/generate-shortcut.js",
        "arguments": 1
      },
      {
        "callee": "plist.build",
        "file": "scripts/generate-shortcut.js",
        "line": 227,
        "caller": null,
        "callerFile": "scripts/generate-shortcut.js",
        "arguments": 1
      },
      {
        "callee": "path.join",
        "file": "scripts/generate-shortcut.js",
        "line": 230,
        "caller": null,
        "callerFile": "scripts/generate-shortcut.js",
        "arguments": 4
      },
      {
        "callee": "fs.writeFileSync",
        "file": "scripts/generate-shortcut.js",
        "line": 231,
        "caller": null,
        "callerFile": "scripts/generate-shortcut.js",
        "arguments": 2
      },
      {
        "callee": "console.log",
        "file": "scripts/generate-shortcut.js",
        "line": 233,
        "caller": null,
        "callerFile": "scripts/generate-shortcut.js",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "scripts/generate-shortcut.js",
        "line": 234,
        "caller": null,
        "callerFile": "scripts/generate-shortcut.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "scripts/generate-test-image.js",
        "line": 4,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 1
      },
      {
        "callee": "require",
        "file": "scripts/generate-test-image.js",
        "line": 5,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 1
      },
      {
        "callee": "path.join",
        "file": "scripts/generate-test-image.js",
        "line": 37,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 3
      },
      {
        "callee": "fs.existsSync",
        "file": "scripts/generate-test-image.js",
        "line": 40,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 1
      },
      {
        "callee": "fs.mkdirSync",
        "file": "scripts/generate-test-image.js",
        "line": 41,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 2
      },
      {
        "callee": "fs.writeFileSync",
        "file": "scripts/generate-test-image.js",
        "line": 45,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 2
      },
      {
        "callee": "path.join",
        "file": "scripts/generate-test-image.js",
        "line": 46,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 2
      },
      {
        "callee": "Buffer.from",
        "file": "scripts/generate-test-image.js",
        "line": 47,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 2
      },
      {
        "callee": "console.log",
        "file": "scripts/generate-test-image.js",
        "line": 49,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 1
      },
      {
        "callee": "fs.writeFileSync",
        "file": "scripts/generate-test-image.js",
        "line": 51,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 2
      },
      {
        "callee": "path.join",
        "file": "scripts/generate-test-image.js",
        "line": 52,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 2
      },
      {
        "callee": "Buffer.from",
        "file": "scripts/generate-test-image.js",
        "line": 53,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 2
      },
      {
        "callee": "console.log",
        "file": "scripts/generate-test-image.js",
        "line": 55,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 1
      },
      {
        "callee": "fs.writeFileSync",
        "file": "scripts/generate-test-image.js",
        "line": 57,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 2
      },
      {
        "callee": "path.join",
        "file": "scripts/generate-test-image.js",
        "line": 58,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 2
      },
      {
        "callee": "Buffer.from",
        "file": "scripts/generate-test-image.js",
        "line": 59,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 2
      },
      {
        "callee": "console.log",
        "file": "scripts/generate-test-image.js",
        "line": 61,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 1
      },
      {
        "callee": "console.log",
        "file": "scripts/generate-test-image.js",
        "line": 63,
        "caller": null,
        "callerFile": "scripts/generate-test-image.js",
        "arguments": 2
      }
    ],
    "similarities": []
  }
}